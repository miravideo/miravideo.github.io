/*! For license information please see mira-editor.min.js.LICENSE.txt */
(()=>{var t=[,(t,e,i)=>{"use strict";const r=i(2),n=i(11),{deg:s}=i(8),o=i(5),a=i(25),h=(i(34),i(63)),l=i(31),{MAX:d}=i(6),c=i(10);t.exports=class extends r{constructor(t){super({type:"group"}),this.visible=!0,this.nodes={},this.boxes={},this.initContainer(),Array.isArray(t)?t.map((t=>this.toggleNode(t))):"object"==typeof t&&this.toggleNode(t)}creator(){return Object.values(this.nodes)[0].creator()}initContainer(){this.container=document.createElement("div"),this.container.setAttribute("mira-editor-el",""),this.container.classList.add("mira-editor-group")}appendTo(t){t.classList.add("group"),t.append(this.container),this.fit(t.scale)}fit(t){void 0!==t&&(this.scale=t,Object.values(this.boxes).map((e=>e&&e.fit(t))),this._dirty_=!0);const{size:[e,i],position:r}=this.metrcs(),{x:n,y:o}=new c(r).scale(-this.scale).rotate(-this._rotation),a=s(-this._rotation,1);return this.container.style.transform=`translate(${n}px, ${o}px) rotate(${a}deg)`,this}createBox(t){const{scale:e,container:i}=this;return t.getAnchor?n.create({node:t,container:i,scale:e,selected:!1}):null}toggleNode(t){if(this.groupSelect(t))Object.values(this.nodes).map((t=>{this.boxes[t.id]||(this.boxes[t.id]=this.createBox(t))}));else if(this.nodes[t.id]){this.boxes[t.id]?.remove(),delete this.nodes[t.id],delete this.boxes[t.id];const e=Object.values(this.nodes);if(1===e.length)return this.boxes[e[0].id]?.remove(),this.boxes=null,this.nodes=null,e[0]}else this.nodes[t.id]=t,this.boxes[t.id]=this.createBox(t);return this._dirty_=!0,this}setRotate(t){const e=t-this._rotation;this._rotation=t;const i=this.metrcs().position;return Object.values(this.nodes).map((t=>{const r=this.boxes[t.id];if(!r)return;const n=r.position.rebase(i),{x:s,y:o}=n.rotate(e).rebase(n),a={rotation:e,position:{x:s,y:o}};l.apply(t,a,"group-rotate"),r.move().rotate()})),this.fit()}setXY(t,e){return t-=this.getX(),e-=this.getY(),Object.values(this.nodes).map((i=>{a.apply(i,{position:{x:t,y:e}}),this.boxes[i.id]?.move()})),this._metrcs_.position[0]+=t,this._metrcs_.position[1]+=e,this.fit()}setWH(t,e){const[i,r]=this.getWH();let n={x:(t-=i)/i,y:(e-=r)/r};n.x>0&&n.y>0&&(n.x=n.y=Math.max(n.x,n.y));const s=this.metrcs().position;return Object.values(this.nodes).map((t=>{const e=this.boxes[t.id];if(!e)return;const i={size:{width:e.size.width*n.x,height:e.size.height*n.y},position:e.position.rebase(s).scale(n)};h.apply(t,i),this.boxes[t.id].resize()})),this._metrcs_.size[0]+=t,this._metrcs_.size[1]+=e,this}metrcs(){if(!this._dirty_)return this._metrcs_;this._metrcs_={};const t={top:d,left:d,bottom:0,right:0};for(const e of Object.values(this.boxes)){if(!e)continue;const{top:i,bottom:r,left:n,right:s}=e.bounds();t.top=Math.min(t.top,i),t.bottom=Math.max(t.bottom,r),t.left=Math.min(t.left,n),t.right=Math.max(t.right,s)}const e=o.from(t),{x:i,y:r}=e.center;return this._metrcs_.size=[e.width+2,e.height+2],this._metrcs_.position=[i,r],this._dirty_=!1,this._metrcs_}destroy(){super.destroy(),this.nodes=null,this.boxes=null}}},(t,e,i)=>{"use strict";const r=i(3),n=i(5),{rotate:s}=i(8),o=i(10);let a=0;class h extends r{constructor(t){super(),this.conf=t||{},this.type=this.conf.type||"vnode",this.id=`vn_${this.type}_${a++}`,this.scale=1,this._rotation=0,this._anchor={x:.5,y:.5},this._size={w:0,h:0},this._position={x:0,y:0},this._proxy=new Proxy(this,{})}static from(t){return(new h).syncWith(t)}groupSelect(t){return!(!t.groupId||"NULL"==t.groupId||!this.nodes||(t.creator().allNodes.map((e=>{e.groupId===t.groupId&&(this.nodes[e.id]=e)})),this.id=t.groupId,0))}get display(){return this._proxy}annotate(){}addEventsTo(t,e){t.apply({node:this,enable:e,recursive:!1,types:{group:!0}})}creator(){return this.parent?this.parent.creator():this._proxy}emit(t,e={}){super.emit(t,{...e,target:this})}getAnchor(){return this._anchor}getRotation(){return this._rotation}getX(){return this.getXY()[0]}getY(){return this.getXY()[1]}getXY(){return this.metrcs().position}getWH(){return this.metrcs().size}metrcs(){return{position:[this._position.x,this._position.y],size:[this._size.w,this._size.h]}}setRotate(t){return this._rotation=t,this}setXY(t,e){return this._position.x=t,this._position.y=e,this}setWH(t,e){return this._size.w=t,this._size.h=e,this}fitSize(){}fitTexture(){}points(){const{w:t,h:e}=this._size,i=-t*this._anchor.x,r=-e*this._anchor.y;return[[i,r],[i+t,r],[i,r+e],[i+t,r+e]].map((t=>new o(t).rotate(this._rotation).offset(this._position)))}bounds(){return n.bounds(this.points())}syncWith(t){this._rotation=t.getRotation();const[e,i]=t.getXY(),{x:r,y:n}=t.getAnchor(),[s,o]=t.getWH();return this._size={w:s,h:o},this._anchor={x:r,y:n},this._position={x:e,y:i},this}remove(){return this.parent&&this.parent.removeChild(this),this}destroy(){this._proxy=null,this.removeAllListeners()}}t.exports=h},(t,e,i)=>{"use strict";const r=i(4);t.exports=class extends r{emit(t,e={}){e.preventDefault?super.emit(t,e):super.emit(t,{...e,type:t})}}},t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,d=this._events[a],c=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),c){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,r),!0;case 4:return d.fn.call(d.context,e,r,n),!0;case 5:return d.fn.call(d.context,e,r,n,s),!0;case 6:return d.fn.call(d.context,e,r,n,s,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];d.fn.apply(d.context,h)}else{var u,p=d.length;for(l=0;l<p;l++)switch(d[l].once&&this.removeListener(t,d[l].fn,void 0,!0),c){case 1:d[l].fn.call(d[l].context);break;case 2:d[l].fn.call(d[l].context,e);break;case 3:d[l].fn.call(d[l].context,e,r);break;case 4:d[l].fn.call(d[l].context,e,r,n);break;default:if(!h)for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];d[l].fn.apply(d[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||o(this,s);else{for(var h=0,l=[],d=a.length;h<d;h++)(a[h].fn!==e||n&&!a[h].once||r&&a[h].context!==r)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},(t,e,i)=>{"use strict";const{MAX:r}=i(6),{mixin:n}=i(7),{rotate:s}=i(8),o=i(10),a={intersect:(t,e)=>{if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return;const[i,r]=["left","top"].map((i=>Math.max(t[i],e[i]))),[n,s]=["right","bottom"].map((i=>Math.min(t[i],e[i])));return new l({top:r,bottom:s,left:i,right:n})},center:t=>{const{left:e,right:i,top:r,bottom:n}=t;return new o({x:(e+i)/2,y:(r+n)/2})},bounds:t=>{const e={top:r,left:r,bottom:0,right:0};return t.map((t=>{t instanceof o||(t=new o(t));const{x:i,y:r}=t;e.top=Math.min(e.top,r),e.bottom=Math.max(e.bottom,r),e.left=Math.min(e.left,i),e.right=Math.max(e.right,i)})),a.from(e)},from:t=>new l(t)},h={get center(){return a.center(this)},get position(){return new o(this.x,this.y)},xs(t=!0){return this.ss([this.left,this.right],t)},ys(t=!0){return this.ss([this.top,this.bottom],t)},ss:(t,e=!0)=>e?t.splice(1,0,(t[0]+t[1])/2)&&t:t,offset(t){return this.move(t,"offset")},rebase(t){return this.move(t,"rebase")},move(t,e){const{x:i,y:r}=this.position[e](t);return a.from({x:i,y:r,width:this.width,height:this.height})},expand(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this}};class l extends DOMRect{constructor(...t){if(t.length>1)return super(...t);let{top:e,bottom:i,left:r,right:n,x:s,y:o,width:a,height:h,w:l,h:d}=t[0];s=void 0===s?r:s,o=void 0===o?e:o,l=void 0===l?a:l,l=void 0===l?n-s:l,d=void 0===d?h:d,d=void 0===d?i-o:d,super(s||0,o||0,l,d)}}n({src:h,dst:DOMRectReadOnly}),t.exports=a},t=>{"use strict";t.exports={CHANGING:"changing",CHANGED:"changed",SELECT:"select",HOVER:"hover",RESIZE:"resize",CROPFRAME:"crop-frame",OP_ADD:"op_add",OP_SPLIT:"op_split",OP_MOVE:"op_move",OP_DELETE:"op_del",OP_END:"op_end",OP_START:"op_start",OP_CHANGE:"op_change",OP_CLEAR_CACHE:"clear_cache",MAX:99999999,TYPE_SPINE:"spine",TYPE_PLACEHOLDER:"placeholder",TYPE_VIDEO:"video",TYPE_AUDIO:"audio",TYPE_STICKER:"sticker",TYPE_TEXT:"text",VERSION:"1.2.0.20220819.185819"}},t=>{"use strict";const e={mixin:({src:t,dst:e})=>{const i=Object.keys(t);for(let r=0;r<i.length;++r){const n=i[r],s=Object.getOwnPropertyDescriptor(t,n);Object.getOwnPropertyDescriptor(e,n)!==s&&Object.defineProperty(e.prototype,n,s)}},wrap:(t,e)=>{const i=t[e],r={before:[],after:[]};t[e]=function(...t){r.before.map((e=>{const i=e.call(this,t);t=void 0!==i?i:t}));let e=i.call(this,...t);return r.after.map((i=>{const r=i.call(this,t,e);e=void 0!==r?r:e})),e};const n={before:t=>r.before.push(t)&&n,after:t=>r.after.push(t)&&n,revoke:()=>{r.before=[],r.after=[]}};return n}};t.exports=e},(t,e,i)=>{"use strict";const{dmap:r}=i(9),n=i(10),s={deg:(t,e=0)=>{for(;t<0;)t+=2*Math.PI;for(;t>Math.PI;)t-=2*Math.PI;return s.round(t*(180/Math.PI)%360,e)},rad:(t,e=9)=>s.round(t*(Math.PI/180),e),round:(t,e=0)=>"object"==typeof t?r(t,(t=>s.round(t,e))):isNaN(t)?t:Number(t.toFixed(e)),floor:(t,e=0)=>s.apply(Math.floor,t,e),ceil:(t,e=0)=>s.apply(Math.ceil,t,e),apply:(t,e,i=0)=>{const r=Math.pow(10,i);return Number((t(e*r)/r).toFixed(i))},theta:(t,e)=>(t=new n(t),e=new n(e),Math.acos(s.dot(t,e)/(s.norm2d(t)*s.norm2d(e)))*(s.cross(t,e)>0?1:-1)),norm2d:t=>{const{x:e,y:i}=new n(t);return Math.hypot(e,i)},cross:(t,e)=>(t=new n(t),e=new n(e),t.x*e.y-e.x*t.y),dot:(t,e)=>s.sum(s.arrMulti(t,e)),sum:t=>"object"!=typeof t?t:Object.values(t).reduce(((t,e)=>e+t)),arrMulti:(t,e)=>s.arrMap(t,e,((t,e)=>t*e)),arrAnd:(t,e)=>s.arrMap(t,e,((t,e)=>t&e)),arrFill:(t,e)=>new Array(e).fill(t),arrMap:(t,e,i)=>{if("object"==typeof t&&(t=Object.values(t)),"object"==typeof e&&(e=Object.values(e)),Array.isArray(t)||(t=s.arrFill(t,e.length)),Array.isArray(e)||(e=s.arrFill(e,t.length)),t.length!==e.length)throw new Error(`length not match when array apply ${i}`);return t.map(((r,n)=>i(t[n],e[n])))}};t.exports=s},t=>{"use strict";const e={zip:(t,e)=>Object.assign(...t.map(((t,i)=>({[t]:e[i]})))),ucfirst:t=>t?t.charAt(0).toUpperCase()+t.slice(1):"",dmap:(t,i,r=[])=>{if("object"!=typeof t)return i(t);const n=Array.isArray(t)?[]:{},s=Array.isArray(t)?t.map(((t,e)=>[e,t])):Object.entries(t);for(const[t,o]of s){const s=[...r,t];n[t]="object"==typeof o?e.dmap(o,i,s):i(o,t,s)}return n},uuid:()=>{let t=(new Date).getTime(),e="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(i){let r=16*Math.random();return t>0?(r=(t+r)%16|0,t=Math.floor(t/16)):(r=(e+r)%16|0,e=Math.floor(e/16)),("x"===i?r:3&r|8).toString(16)})).toUpperCase()},short:(t,e,i=0)=>{if(!t)return t;const r=Array.from(t);if(r.length<e||e<i)return t;const n=i>0?r.slice(-i).join(""):"";return`${r.slice(0,e-i-3).join("")}...${n}`}};t.exports=e},t=>{"use strict";class e{constructor(...t){let e,i;if(1==t.length&&"object"==typeof t[0]&&(1===t[0].nodeType?t=this.getDomCoord(t[0]):void 0!==t[0].pageX&&(t=[t[0].pageX,t[0].pageY])),1==t.length&&Array.isArray(t[0])&&(t=t[0]),2==t.length&&Array.isArray(t)&&([e,i]=t),"object"==typeof t[0])return this.x=t[0].x,void(this.y=t[0].y);this.x=e,this.y=i}getDomCoord(t){let[e,i]=[t.offsetLeft,t.offsetTop],r=t.offsetParent;for(;null!==r;)e+=r.offsetLeft,i+=r.offsetTop,r=r.offsetParent;return[e,i]}offset(t){return t=new e(t),new e({x:this.x+t.x,y:this.y+t.y})}rebase(t){return t=new e(t),this.offset({x:-t.x,y:-t.y})}scale(t){const i=isNaN(t)?new e(t):new e(t,t);return new e({x:this.x*i.x,y:this.y*i.y})}rotate(t){const[i,r]=[this.x,-this.y],n=Math.sin(t),s=Math.cos(t);return new e({x:i*s+r*n,y:-(r*s-i*n)})}f(t=3){return{x:this.x.toFixed(t),y:this.y.toFixed(t)}}}t.exports=e},(t,e,i)=>{"use strict";i(12);const r=i(22),n=i(10),s=i(5),{floor:o,ceil:a,round:h,deg:l,theta:d,rotate:c,arrMulti:u}=i(8);class p extends r{static TAG="mira-editor-box";init(){return this.addClass("mirae-box"),this.scale=1,super.init()}bind(t){return this.node=t,t.cropMode&&this.addClass("mirae-box-none"),this}setAnchor(t){const{x:e,y:i}=t||this.node.getAnchor();return this.anchor={x:e,y:i},this.setStyle({"transform-origin":`${h(100*e,1)}% ${h(100*i,1)}%`})}setRotate(t){void 0===t&&(t=this.node.getRotation()),this.rotation=t%(2*Math.PI);const e=l(this.rotation,1);return this.setStyleVars({"--rotate":`${e}deg`,"--revert-rot":`-${e}deg`})}setXY(t){let[e,i]=t||this.node.getXY();this.position=new n({x:e,y:i});const{width:r,height:s}=this.size;return e=(e-r*this.anchor.x)*this.scale,i=(i-s*this.anchor.y)*this.scale,this.setStyleVars({"--x":`${o(e-1)}px`,"--y":`${o(i-1)}px`})}setWH(t){let[e,i]=t||this.node.getWH();return this.size={width:e,height:i},e=`${a(e*this.scale+2)}px`,i=`${a(i*this.scale+2)}px`,this.setStyle({width:e,height:i})}crop(){return this}move(){return this.setXY().refreshHandle()}resize(){return this.setWH().move()}rotate(){return this.setRotate()}fit(t){return this.scale=t,this.setAnchor().setRotate().resize()}select(t){t&&this.addHandleBox();const e="mirae-selected";return t?this.addClass(e):this.removeClass(e)}points(){const{width:t,height:e}=this.size,i=-t*this.anchor.x,r=-e*this.anchor.y;return[[i,r],[i+t,r],[i,r+e],[i+t,r+e]].map((t=>new n(t).rotate(this.rotation).offset(this.position)))}bounds(){return s.bounds(this.points())}addHandleBox(){this.handleBox||(this.handleBox=document.createElement("div"),this.handleBox.setAttribute("mira-editor-el",""),this.handleBox.classList.add("mirae-box-handles","left"),this.append(this.handleBox))}refreshHandle(){const t=this.parentNode;if(!this.handleBox||!t||!t?.classList.contains("mira-editor"))return this;const e=this.parentNode.getBoundingClientRect(),i=this.getBoundingClientRect().center.rebase(e.center);let r="left";if(Math.abs(i.x)+Math.abs(i.y)>10){const t=l(d(i,{x:e.width,y:e.height})-this.rotation),n=l(d(i,{x:e.width,y:-e.height})-this.rotation);r=t<0&&n<0?"top":t<0&&n>0?"right":t>0&&n<0?"left":"bottom"}return this.handleBox.classList.contains(r)||(this.handleBox.classList.remove("left","right","top","bottom"),this.handleBox.classList.add(r),this.setRotate()),this}remove(){this.handleBox&&this.handleBox.remove(),super.remove()}static create({node:t,scale:e,container:i,selected:r}){return super.create(i).bind(t).select(r).fit(e||1)}}p.register(),t.exports=p},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(19),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},t=>{"use strict";var e=[];function i(t){for(var i=-1,r=0;r<e.length;r++)if(e[r].identifier===t){i=r;break}return i}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var h=t[a],l=r.base?h[0]+r.base:h[0],d=s[l]||0,c="".concat(l," ").concat(d);s[l]=d+1;var u=i(c),p={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==u)e[u].references++,e[u].updater(p);else{var f=n(p,r);r.byIndex=a,e.splice(a,0,{identifier:c,updater:f,references:1})}o.push(c)}return o}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var s=r(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=i(s[o]);e[a].references--}for(var h=r(t,n),l=0;l<s.length;l++){var d=i(s[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}s=h}}},t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,n&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var s=i.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},t=>{"use strict";var e={};t.exports=function(t,i){var r=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},t=>{"use strict";t.exports=function(t,e){Object.keys(e).forEach((function(i){t.setAttribute(i,e[i])}))}},t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var r=i(20),n=i.n(r),s=i(21),o=i.n(s)()(n());o.push([t.id,"*[mira-editor-el] {\n  position: absolute;\n  box-sizing: border-box;\n  pointer-events: none;\n  margin: 0;\n  padding: 0;\n}\n*[mira-editor-el] .hide {\n  opacity: 0 !important;\n  pointer-events: none !important;\n  cursor: default !important;\n}\n*[mira-editor-el] .hide:after {\n  opacity: 0 !important;\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n}\n.mira-editor[mira-editor-el] {\n  position: relative;\n  user-select: none;\n}\n.mirae-debug-box[mira-editor-el] {\n  border: 1px dotted #C00 !important;\n}\n.mirae-center-cross[mira-editor-el] {\n  margin: 0;\n}\n.mirae-center-cross[mira-editor-el]:before {\n  left: 50%;\n  top: 0;\n  bottom: 0;\n  width: 1px;\n}\n.mirae-center-cross[mira-editor-el]:after {\n  top: 50%;\n  left: 0;\n  right: 0;\n  height: 1px;\n}\n.mirae-center-cross[mira-editor-el]:before,\n.mirae-center-cross[mira-editor-el]:after {\n  content: '';\n  position: absolute;\n  background: red;\n}\n.mirae-box[mira-editor-el] {\n  border: 2px solid var(--miraeBorderColor);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transform: translate(var(--x), var(--y)) rotate(var(--rotate));\n  /* <- order matters!! */\n  transition-duration: 0;\n}\n.mirae-box[mira-editor-el].mirae-box-none[mira-editor-el] {\n  border: 0px;\n}\n.mirae-box[mira-editor-el].editMode {\n  border: 2px dashed var(--miraeBorderColor) !important;\n}\n.mirae-box[mira-editor-el] .mira-editor-group[mira-editor-el] {\n  width: 0px;\n  height: 0px;\n  border-radius: 0px;\n  transform-origin: 50% 50%;\n}\n.mirae-box[mira-editor-el].group {\n  border-style: dashed!important;\n}\n.mirae-box[mira-editor-el].copy {\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.mirae-box[mira-editor-el].ani {\n  transition-duration: 0.3s;\n  transition-property: width, height, transform;\n}\n.mirae-box[mira-editor-el] * {\n  pointer-events: none;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.mirae-box[mira-editor-el].mirae-selected {\n  border-color: var(--miraeSelBorderColor);\n  z-index: 2!important;\n}\n.mirae-box[mira-editor-el] .mirae-box-handles[mira-editor-el] {\n  border: 0;\n  position: relative;\n  /*background: #000;*/\n  display: flex;\n  width: 128px;\n  height: 32px;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n}\n.mirae-box[mira-editor-el] .side {\n  transform: rotate(90deg);\n}\n.mirae-box[mira-editor-el] .mirae-box-handles.top {\n  top: -50%;\n  margin-top: -48px;\n}\n.mirae-box[mira-editor-el] .mirae-box-handles.bottom {\n  bottom: -50%;\n  margin-bottom: -48px;\n}\n.mirae-box[mira-editor-el] .mirae-box-handles.left {\n  left: -50%;\n  margin-left: -48px;\n  transform: rotate(90deg);\n}\n.mirae-box[mira-editor-el] .mirae-box-handles.right {\n  right: -50%;\n  margin-right: -48px;\n  transform: rotate(90deg);\n}\n",""]);const a=o},t=>{"use strict";t.exports=function(t){return t[1]}},t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",r=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),r&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),r&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,r,n,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(o[h]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);r&&o[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),n&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=n):d[4]="".concat(n)),e.push(d))}},e}},(t,e,i)=>{"use strict";const{norm2d:r}=i(8);i(23);class n extends HTMLElement{static TAG="div";constructor(){super(),this.lockTimer={}}scrollToVisible(t={center:!1,top:!1,smooth:!0}){"boolean"==typeof t&&(t={center:!!t,top:!1,smooth:!0});const e=t.smooth?"smooth":"auto",i=t.center?"center":"nearest",r=t.top?"center":"nearest";return this.scrollIntoView({behavior:e,block:r,inline:i}),this}clear(){this.dragstart&&(this.dragstart=!1,this.moveListener&&this.moveListener.onMoveEnd&&this.moveListener.onMoveEnd({target:this,position:{x:0,y:0},moved:this.moved>5,event:null}))}locked(t="default"){return!!this.lockTimer[t]}lock(t,e,i="default"){return this.lockTimer[i]&&(clearTimeout(this.lockTimer[i]),this.lockTimer[i]=null),this.lockTimer[i]=setTimeout((()=>{this.lockTimer[i]=null,e&&e()}),t),this}get(t){return this.getAttribute(t)}set(t,e){return this.setAttribute(t,e),this}show(t){return t?this.removeClass("hide"):this.addClass("hide")}setStyleVars(t={}){for(const[e,i]of Object.entries(t))this.style.setProperty(e,i);return this}setStyle(t={}){return this.setAttr("style",t)}setAttr(t,e={}){for(const[i,r]of Object.entries(e))this[t][i]=r;return this}toggleClass(t,e=null){return null===e&&(e=!this.classList.contains(t)),e?this.addClass(t):this.removeClass(t),e}addClass(t,e){return Array.isArray(t)||(t=[t]),this.classList.add(...t),e>0&&this.lock(e,(()=>this.removeClass(t)),`class.${t}`),this}removeClass(t){return Array.isArray(t)||(t=[t]),this.classList.remove(...t),this}hasClass(t){return Array.isArray(t)||(t=[t]),t.filter((t=>this.classList.contains(t))).length>0}appendTo(t){return t&&t.append(this),this}remove(){this.cbs&&this.bindEvents(!1),Object.values(this.lockTimer).map((t=>t&&clearTimeout(t))),this.lockTimer={},this.onClick=null,this.moveListener=null,super.remove()}hide(){super.remove()}onDragStart(){return t=>{if(this.dragstart||0!==t.button)return;this.bindBodyEvents(!0),t.stopPropagation(),this.dragstart=!0,this.moved=0;const{clientX:e,clientY:i}=t;this.lastPosition={x:e,y:i},this.moveListener&&this.moveListener.onMoveStart&&this.moveListener.onMoveStart({target:this,position:this.lastPosition,event:t})}}onDragMove(){return t=>{const{clientX:e,clientY:i}=t,n={x:e,y:i};if(this.moveListener&&this.moveListener.onCursor&&this.moveListener.onCursor({target:this,position:n,event:t}),!this.dragstart)return!1;t.stopPropagation();const{x:s,y:o}=this.lastPosition;this.move={x:e-s,y:i-o},this.moved+=r(this.move),this.lastPosition=n,this.moveListener&&this.moveListener.onMove&&(0!==this.move.x||0!==this.move.y)&&this.moveListener.onMove({target:this,position:n,moved:this.moved>5,delta:this.move,event:t})}}onDragEnd(){return t=>{if(!this.dragstart)return!1;t.stopPropagation(),this.bindBodyEvents(!1),this.dragstart=!1,this.move=null,this.lastPosition=null;const{clientX:e,clientY:i}=t;if(this.moved<=5){const e=Date.now();if(this.moveListener?.onDblClick&&this.lastClickTime&&e-this.lastClickTime<600){const{clientX:e,clientY:i}=t;this.moveListener.onDblClick({target:this,position:{x:e,y:i},event:t})}this.onClick&&this.onClick(t),this.lastClickTime=e}this.moveListener?.onMoveEnd&&this.moveListener.onMoveEnd({target:this,position:{x:e,y:i},moved:this.moved>5,event:t})}}onHover(){return t=>{if(this.moveListener&&this.moveListener.onHover){const{clientX:e,clientY:i}=t;this.moveListener.onHover({target:this,position:{x:e,y:i},drag:this.dragstart,moved:this.moved,event:t})}this.toggleClass("hover","mouseover"===t.type)}}onDblClick(){return t=>{if(this.moveListener&&this.moveListener.onDblClick){const{clientX:e,clientY:i}=t;this.moveListener.onDblClick({target:this,position:{x:e,y:i},event:t})}}}addMoveListener(t){return this.moveListener=t,this.cbs||this.bindEvents(),this}events(){return{hover:["mouseover","mouseout"],start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","mouseupoutside","touchend","touchendoutside"],dblclick:["dblclick"]}}eventCallbacks(){return{hover:this.onHover(),dblclick:this.onDblClick(),start:this.onDragStart(),move:this.onDragMove(),end:this.onDragEnd()}}bindEvents(t=!0){t&&(this.cbs=this.eventCallbacks());for(const[e,i]of Object.entries(this.events())){const r=this.cbs[e];for(const e of i)t?this.addEventListener(e,r):this.removeEventListener(e,r)}t||(this.cbs=null)}bindBodyEvents(t=!0,e=["move","end"]){if(!this.cbs)return;const i=this.events();for(const r of e)for(const e of i[r])t?document.body.addEventListener(e,this.cbs[r]):document.body.removeEventListener(e,this.cbs[r])}init(){return this.setAttribute("mira-editor-el",""),this}static create(t){return document.createElement(this.TAG).init().appendTo(t)}static register(){customElements.get(this.TAG)||customElements.define(this.TAG,this)}}t.exports=n},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(24),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var r=i(20),n=i.n(r),s=i(21),o=i.n(s)()(n());o.push([t.id,"*[mira-editor-el] {\n  position: absolute;\n  box-sizing: border-box;\n  pointer-events: none;\n  margin: 0;\n  padding: 0;\n}\n*[mira-editor-el] .hide {\n  opacity: 0 !important;\n  pointer-events: none !important;\n  cursor: default !important;\n}\n*[mira-editor-el] .hide:after {\n  opacity: 0 !important;\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n}\n.mira-editor[mira-editor-el] {\n  position: relative;\n  user-select: none;\n}\n.mirae-debug-box[mira-editor-el] {\n  border: 1px dotted #C00 !important;\n}\n.mirae-center-cross[mira-editor-el] {\n  margin: 0;\n}\n.mirae-center-cross[mira-editor-el]:before {\n  left: 50%;\n  top: 0;\n  bottom: 0;\n  width: 1px;\n}\n.mirae-center-cross[mira-editor-el]:after {\n  top: 50%;\n  left: 0;\n  right: 0;\n  height: 1px;\n}\n.mirae-center-cross[mira-editor-el]:before,\n.mirae-center-cross[mira-editor-el]:after {\n  content: '';\n  position: absolute;\n  background: red;\n}\n",""]);const a=o},(t,e,i)=>{"use strict";const{CHANGING:r,SELECT:n,OP_CHANGE:s}=i(6),o=i(26),a=i(31),{arrMulti:h,round:l}=i(8),{wrap:d}=i(7),{dmap:c,uuid:u}=i(9),p=i(10),{Record:f}=i(32);class m extends a{static type="move";static TAG=o;static CHG_HOOK="setWH";static KEY_MAP={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};constructor(t){super(t),this.uuid=u(),this.selector=t.controls.select,this._controls={},this.wrap(this.selector,"createBox").after(((t,e)=>{const[i,r]=t;r&&e&&this.setNode().appendControl(e).show()})),this.wrap(this.selector,"enableMulti").after((()=>{this.show()})),this.wrap(this.selector,"hideSelect").after((()=>{this.remove()})),"move"===this.constructor.type&&this.wrap(this.selector,"fit").after((()=>{this.updateCursor(!1)}))}show(t){return void 0===t&&(t=!this.selector.withMulti),this.view&&this.view.show(t),this}events(){const t={keydown:this.onKeyDown(),keyup:this.onKeyUp()};return"move"===this.constructor.type&&(t[n]=this.onSelect()),t}onKeyDown(){return t=>{if("move"!==this.constructor.type||!this.box||!this.view.hasClass("hover")&&!this.editMode)return;if(this.editMode){if("Backspace"===t.key)return this.updateText(this.node.delete());if("Escape"===t.key)return this.remove();if("z"===t.key.toLowerCase()&&t.mctrlKey)return t.preventDefault(),this.opHistory(t.shiftKey);if("y"===t.key.toLowerCase()&&t.mctrlKey)return t.preventDefault(),this.opHistory(!0);if("c"===t.key.toLowerCase()&&t.mctrlKey)return this.copyText();if("x"===t.key.toLowerCase()&&t.mctrlKey)return this.copyText(),this.updateText(this.node.delete())}const e=this.constructor.KEY_MAP[t.key];if(!e)return;t.preventDefault();const[i,r]=h(e,t.shiftKey?10*this.box.scale:this.box.scale);this.onMove({delta:{x:i,y:r},type:"keyboard",event:t})}}onKeyUp(){return t=>{"move"===this.constructor.type&&this.constructor.KEY_MAP[t.key]&&this.node&&!this.editMode&&this.node.emit(r,{action:`${this.constructor.type}end`})}}setNode(){return this.node=this.selector.selected,this}controls(t){return this.node.cropMode?{}:{move:{box:t,styleClass:"box"},moveHandle:{box:t.handleBox,styleClass:"handle"}}}appendControl(t){if(!this.node)return this;this.box=t,this._controls&&Object.values(this._controls).map((t=>t.remove())),this._controls={};for(const[e,i]of Object.entries(this.controls(t))){i.box||(i.box=t),"string"==typeof i.box&&this._controls[i.box]&&(i.box=this._controls[i.box]),i.moveListener=this;const r=i.tag||this.constructor.TAG;this._controls[e]=r.create(i)}return this.boxWrapper&&this.boxWrapper.revoke(),this.boxWrapper=this.wrap(t,this.constructor.CHG_HOOK).after((()=>{this.updateShow(t)})),"time"!==this.node.cropMode&&this.updateShow(t),this}updateShow(t){const e=Math.min(t.size.width,t.size.height)*t.scale<50;this._controls.moveHandle&&this._controls.moveHandle.show(e)}onSelect(){return t=>{"start"===t.action&&this.view&&this.view.start(t.event.data.originalEvent)}}get canMove(){return this.node&&this.box&&!this.node.cropMode}getDelta(t){return{position:c(t.delta,(t=>t/this.box.scale))}}point(t){const e=this.box.points()[0];return this.canvasCoord(t,1/this.box.scale).rebase(e).rotate(-this.box.rotation)}onMove(t){if(!this.canMove)return;if(this.editMode)return void("keyboard"===t.type?(this.node.selectMove(t.delta,t.event.shiftKey,t.event.mctrlKey),this.updateCursor()):this.textSelect(t));m.apply(this.node,this.getDelta(t)),this.box.move();const{x:e,y:i}=l(this.box.position,0);this.toast(`X:${e} Y:${i}`,3e3)}onMoveStart(t){if(this.canMove)return this.editMode?this.node.selectStart(this.point(t)):(this.node.emit(r,{action:`${this.constructor.type}start`}),this.selector.showHover(this.node,t),this)}onMoveEnd(t){if(!this.canMove)return;if(this.node.emit(r,{action:`${this.constructor.type}end`}),this.editMode)return this.textSelect(t);if(t.moved)return this.selector.hideHover();this.selector.toggleSelect();const e=Date.now();return e-this.lastClickTime<600&&this.node.id===this.lastClickNodeId&&this.onDblClick(t),this.lastClickTime=e,this.lastClickNodeId=this.node.id,this}onDblClick(t){"text"===this.node?.type&&this.textEditStart(t)}textEditStart(t){this.view&&(this.view.addClass("editMode"),this.box.addClass("editMode"),this.node.editMode=!0,this.node.selectionBgColor=this.editor.opts.textSelectionColor,this.node.selectStart(this.point(t)),this.selector.hideHover(),this.selector.enableMulti(!1),this.textSelect(t))}textSelect(t){this.locked("updateText")||this.node.selectEnd(this.point(t)),this.updateCursor()}updateCursor(t=!0){if(!this.view)return;if(!this.cursorView){if(!t)return;this.cursorView=document.createElement("div"),this.cursorView.setAttribute("mira-editor-el",""),this.cursorView.classList.add("mirae-text-cursor"),this.cursorView.style.backgroundColor=this.editor.opts.textCursorColor,this.textView=document.createElement("textarea"),this.textView.setAttribute("mira-editor-el",""),this.textView.addEventListener("compositionstart",this.onCompStart.bind(this)),this.textView.addEventListener("compositionend",this.onCompEnd.bind(this)),this.textView.addEventListener("input",this.onInputChar.bind(this));const e=this.cachedEvents();this.textView.addEventListener("keyup",e.keyup),this.textView.addEventListener("keydown",e.keydown),this.cursorView.append(this.textView)}const e=this.node.cursor(),i=this.box.scale,r=new p(e).scale(i),n=e.height*i;this.cursorView.style.transform=`translate(${r.x}px, ${r.y+.5*n-1}px) scaleY(${n+2})`,t&&(this.cursorView.parentNode!==this.view&&this.view.append(this.cursorView),this.textView.focus(),this.cursorView.classList.remove("mirae-text-cursor-flash"),this.lock(500,(()=>{this.cursorView.classList.add("mirae-text-cursor-flash")}),"cursor"),this.editor.enableKeyboard(!1))}onCompStart(t){this.inputStatus="COMP_START"}onCompEnd(t){setTimeout((()=>{this.input(),this.inputStatus="COMP_END"}),100)}onInputChar(t){"COMP_START"!==this.inputStatus&&(this.inputStatus="INPUT",this.input())}clearTextValue(){this.textView.value=""}input(){const t=this.textView.value;this.updateText(this.node.input(t),t),this.clearTextValue()}updateText(t,e){if(t.text===this.node.text)return;const i=a.apply(this.node,{to:t},s),r=new f(s,this.node,i);r.editType=e?"add":"del",e?.includes("\n")&&(this.record=null),this.box.resize(),this.updateCursor(),this.lock(500,null,"updateText"),this.record&&this.record.editType===r.editType?(this.record.merge(r,!0),this.editor._history.emit("change",{record:r})):(this.record=r,this.editor._history.append(r))}copyText(){const t=this.node.selection();navigator.clipboard.writeText(t)}get editMode(){return!!this.node?.editMode}get view(){return this._controls?.move}opHistory(t=!0){const e=t?"redo":"undo";this.editor[e](1,!1),this.box.resize(),this.updateCursor(),this.record=null}remove(){"move"===this.constructor.type&&(this.view&&this.view.remove(),this.cursorView&&this.cursorView.remove(),this.textView&&this.textView.remove(),this.cursorView=null,this.editMode&&(this.node.editMode=!1,this.node.selectClean(),this.editor.enableKeyboard(!0),this.selector.enableMulti(!1)))}destroy(){return this.selector=null,this.remove(),super.destroy()}}t.exports=m},(t,e,i)=>{"use strict";i(27);const r=i(22);class n extends r{static TAG="mira-editor-move";static STYLE_CLASS="mirae-move";init(){return this.addClass(this.constructor.STYLE_CLASS),super.init()}setOpts({styleClass:t}){return this.styleClass=t,this.addClass(t)}start(t){this.cbs.start&&this.cbs.start(t)}static create(t){const{box:e,moveListener:i}=t;return super.create(e).setOpts(t).addMoveListener(i)}}n.register(),t.exports=n},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(28),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>u});var r=i(20),n=i.n(r),s=i(21),o=i.n(s),a=i(29),h=i.n(a),l=new URL(i(30),i.b),d=o()(n()),c=h()(l);d.push([t.id,'.mirae-move.box[mira-editor-el] {\n  width: 100%;\n  height: 100%;\n  cursor: move;\n  pointer-events: auto;\n  background: rgba(0, 0, 0, 0.2);\n}\n.mirae-move.box[mira-editor-el].hide {\n  pointer-events: none;\n}\n.mirae-move.box[mira-editor-el].editMode {\n  background: transparent !important;\n  cursor: text !important;\n}\n.mirae-move.box[mira-editor-el] .mirae-text-cursor[mira-editor-el] {\n  position: absolute;\n  width: 2px;\n  height: 1px;\n  background-color: #FFF;\n  overflow: hidden;\n  pointer-events: none;\n  cursor: text !important;\n}\n@keyframes flash {\n  0% {\n    opacity: 0;\n  }\n  49% {\n    opacity: 0;\n  }\n  50% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.mirae-move.box[mira-editor-el] .mirae-text-cursor[mira-editor-el].mirae-text-cursor-flash {\n  animation: flash 1s linear infinite;\n}\n.mirae-move.box[mira-editor-el] .mirae-text-cursor[mira-editor-el] textarea[mira-editor-el] {\n  opacity: 0;\n  width: 1px;\n  height: 1px;\n  pointer-events: none;\n  resize: none;\n  border: none;\n  overflow: auto;\n  outline: none;\n  -webkit-box-shadow: none;\n  -moz-box-shadow: none;\n  box-shadow: none;\n  cursor: text !important;\n}\n.mirae-move.handle[mira-editor-el] {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: auto;\n  z-index: 3;\n  cursor: move;\n  position: relative;\n}\n.mirae-move.handle[mira-editor-el].hide {\n  width: 0px;\n  height: 0px;\n  pointer-events: none;\n}\n.mirae-move.handle[mira-editor-el]:after {\n  width: 20px;\n  height: 20px;\n  content: "";\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n  position: relative;\n  border-radius: 10px;\n  box-shadow: 0 0 5px 1px rgba(57, 76, 96, 0.15), 0 0 0 1px rgba(53, 71, 90, 0.2);\n  opacity: 1;\n  background: #FFF 2px no-repeat;\n  background-size: 16px;\n  z-index: 9;\n  transform: rotate(var(--revert-rot));\n  background-image: url('+c+");\n}\n",""]);const u=d},t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg width=%2724%27 height=%2724%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath fill-rule=%27evenodd%27 clip-rule=%27evenodd%27 d=%27M14.22 6.573a.75.75 0 1 0 1.06-1.06l-2.145-2.146a1.25 1.25 0 0 0-1.77 0L9.22 5.513a.75.75 0 0 0 1.06 1.06l1.22-1.22v5.899H5.602l1.22-1.22a.75.75 0 0 0-1.06-1.06l-2.147 2.145a1.251 1.251 0 0 0 0 1.77l2.146 2.145a.75.75 0 1 0 1.06-1.06l-1.219-1.22H11.5v5.897l-1.22-1.22a.75.75 0 1 0-1.06 1.061l2.145 2.146a1.248 1.248 0 0 0 1.77 0l2.145-2.146a.75.75 0 1 0-1.06-1.06L13 18.65v-5.898h5.898l-1.22 1.22a.75.75 0 0 0 1.06 1.06l2.147-2.146a1.252 1.252 0 0 0 0-1.77l-2.146-2.145a.75.75 0 0 0-1.06 1.06l1.219 1.22H13V5.354l1.22 1.22z%27 fill=%27currentColor%27/%3E%3C/svg%3E"},(t,e,i)=>{"use strict";const{zip:r}=i(9),n=i(3),{sum:s,round:o}=i(8),{wrap:a}=i(7),h=i(10),{CHANGING:l,TYPE_PLACEHOLDER:d,OP_CLEAR_CACHE:c}=i(6),u=["start","duration","end","ss","to"],p=["width","height","x","y","object-fit"],f=["chromaSimilarity","chromaSmoothness","chromaSaturation","chromaShadowness"],m=[...u,...p,"chromaKey","src","cachedSrc","blend","outerKey"],g=["type","changed","name","opacity","volume","speed","pitch","audio","fadeIn","fadeOut","cropStart","cropEnd","text","fontFamily","cachedFontFamily","fontSize","color","backgroundColor","wrap","valign","align","lineHeight","letterSpacing","stroke","shadow",...m];t.exports=class extends n{static type="base";constructor(t){super(),this.lockTimer={},this._wrappers=[],this.editor=t,this.bindEvents(!0)}toast(t,e){return this.editor&&this.editor.toast(t,e),this}lock(t,e,i="default"){return this.lockTimer[i]&&(clearTimeout(this.lockTimer[i]),this.lockTimer[i]=null),this.lockTimer[i]=setTimeout((()=>{this.lockTimer[i]=null,e&&e()}),t),this}locked(t="default"){return!!this.lockTimer[t]}wrap(t,e){const i=a(t,e);return this._wrappers.push(i),i}events(){return{}}canvasCoord(t,e=1){const i=this.editor.canvas.getBoundingClientRect();return new h(t.position?t.position:t).rebase(i).scale(e)}cachedEvents(){return this.cacheEvents?this.cacheEvents:this.cacheEvents=this.events()}bindEvents(t){for(const[e,i]of Object.entries(this.cachedEvents()))t?this.editor.on(e,i):this.editor.off(e,i)}static async set(t,e,i,n=null){const o={},a=i=>{return void 0===t[i]?0:(r=e[i],n=t[i],(isNaN(Number(r))?n:Number(r))-t[i]);var r,n},h={position:["x","y"],size:["width","height"],rotation:"rotation",anchor:["anchorX","anchorY"]};for(const[t,e]of Object.entries(h)){const i=Array.isArray(e)?e.map((t=>a(t))):a(e);0!==s(i)&&(o[t]=Array.isArray(i)?r(e,i):i)}for(const i of f)void 0!==e[i]&&(o.chroma||(o.chroma={}),o.chroma[i]=e[i]-t[i]);const l={};for(const t of g)void 0!==e[t]&&(l[t]=e[t]);for(const[t,i]of Object.entries(e))t.includes(".")&&(l[t]=i);return Object.keys(l).length>0&&(o.to=l),o.to?.src&&void 0===o.to?.cachedSrc&&(o.to.cachedSrc="NULL"),new Promise(((e,r)=>{try{this.apply(t,o,i,{callback:t=>{e(t)},onprogress:n})}catch(t){console.error(t),r(t)}}))}static apply(t,e,i=null,r={}){const{sourceAction:n,relativeNodes:s,callback:a,onprogress:h}=r;if(t.type===d)return a&&a(e),e;let f=!1,g=null;const v=t.type,y=t.creator();y.playing&&y.pause();const x=i||this.type;if(e.to){const i={},r=void 0!==e.to.parent,n=t.active;r&&n&&t.disable();let s=!1;for(let[r,n]of Object.entries(e.to)){if(r.includes(".")){i[r]=t.getParam(r),i[r]=void 0===i[r]?"NULL":i[r],i[r]!==n&&(s=!0);continue}u.includes(r)?(n=o(n,3),e.to[r]=n):p.includes(r)&&(f=!0);let a=m.includes(r)?t.conf:t;i[r]=void 0===a[r]?"NULL":a[r],i[r]!==n&&(s=!0)}if(!s)return r&&n&&t.enable(),a&&a(e),e;for(let[i,r]of Object.entries(e.to))i.includes(".")?t.setParam(i,"NULL"===r?void 0:r):(m.includes(i)?t.conf:t)[i]="NULL"===r?void 0:r;e.from||(e.from=i),void 0!==e.to.active&&(e.to.active?t.enable():t.disable()),void 0===e.to.cropStart&&void 0===e.to.cropEnd||(t.conf.cropStart=e.to.cropStart,t.conf.cropEnd=e.to.cropEnd),r&&(e.from.parent?.removeChild&&e.from.parent.removeChild(t),e.to.parent?.addChild&&e.to.parent.addChild(t,t.nextSibling),e.from.parent?.refreshSibling&&e.from.parent.refreshSibling(),e.to.parent?.refreshSibling?e.to.parent.refreshSibling():(t.nextSibling=null,t.prevSibling=null),n&&t.enable()),"text"===t.type&&(f=!0),"speech"!==v&&"speech"!==t.type||("text"===e.to.parent?.type?g=e.to.parent:"text"===e.from.parent?.type?g=e.from.parent:"text"===t.parent?.type&&(g=t.parent),!t.trackId&&g&&(t.trackId=g.trackId)),void 0===e.to.ss&&void 0===e.to.to||t.updateMaterialTime(),t.parent&&t.annotate()}if(e.frame&&t.setFrame&&t.material){let[i,r]=[t.material.width(),t.material.height()];const n=t.getFrame();let{x:s,y:o,w:a,h}=e.frame;n.x+=s,n.y+=o,n.w+=a,n.h+=h,t.setFrame(n.x,n.y,Math.min(n.w,i-n.x),Math.min(n.h,r-n.y)),f=!0}if(e.chroma)for(const i of Object.keys(e.chroma))t.conf[i]=Math.max(t[i]+e.chroma[i],.001);if(e.anchor){const{x:i,y:r}=t.getAnchor();i+=e.anchor.x,r+=e.anchor.y,t.setAnchor(i,r)}if(e.position){const i=t.getX()+e.position.x,r=t.getY()+e.position.y;t.setXY(i,r)}if(e.size){let[i,r]=t.getWH();i+=e.size.width,r+=e.size.height,t.setWH(i,r),f=!0}if(e.rotation){const i=t.getRotation()+e.rotation;t.setRotate(i)}if(f&&(t.fitSize(),t.fitTexture()),(e.chroma||e.to?.chromaKey)&&t.setChromaKey(),!t.refresh)return e;t.refresh(e);const E=t.parents?.filter((t=>"scene"===t.type));E&&E.length>0&&E.map((t=>{t.emit(l,{action:c})}));const b=y?.currentTime/1e3,w=()=>{t.emit(l,{action:x,delta:e,time:b,sourceAction:n,relativeNodes:s}),g&&g.emit(l,{action:x,delta:{to:{changed:!0}}}),a&&a(e)};return void 0!==e.to?.src?(async()=>{try{await t.preProcessing(h),t.annotate(),await t.prepareMaterial()}catch(t){console.error(t)}w()})():void 0!==e.to?.fontFamily&&t.queuedFitSize?(e.to.cachedFontFamily||(t.cachedFontFamily=null),(async()=>{await t.queuedFitSize(),w()})()):w(),e}destroy(){this.cacheEvents&&this.bindEvents(!1),this._wrappers&&this._wrappers.map((t=>t.revoke())),this.lockTimer&&Object.values(this.lockTimer).map((t=>t&&clearTimeout(t))),this.editor=null,this.cacheEvents=null,this._wrappers=null,this.lockTimer=null}}},(t,e,i)=>{"use strict";const{dmap:r,uuid:n}=i(9),{round:s}=i(8),o=i(3),a=i(33),{OP_MOVE:h,OP_ADD:l,OP_DELETE:d,OP_SPLIT:c,TYPE_PLACEHOLDER:u}=i(6),p=["frame","position","rotation","size","anchor","chroma"];class f extends o{constructor(t,e,i){super(),this.id=n(),this.parent=null,this.action=t,this.targets=e,Array.isArray(e)&&Array.isArray(i)?(this.attributes={},e.map(((t,e)=>this.attributes[t.id]=i[e]))):e&&!Array.isArray(e)?(this.targets=[e],this.attributes={[e.id]:i}):this.attributes=i,this.ops=[],this.useOps()&&this.ops.push(this.attributes)}contains(t){return!(!this.targets||0===this.targets.length)&&this.mapAttr((e=>e?.id===t)).filter((t=>t)).length>0}useOps(){return[c,l,d].includes(this.action)}addTarget(t){let e=this.targets;e?e.push(t):(this.targets=[t],this.attributes={},this.ops=[])}mapAttr(t,e=null){return e=e||this.attributes,this.targets.map((i=>t(i,e[i.id])))}mergeNext(t){if(t.time-this.time<100&&t.action===h&&[l,h].includes(this.action))this.ops.push(t.attributes);else if(!(t.time-this.time<1e4&&["move","number"].includes(t.action)&&this.mergeId===t.mergeId))return!1;return f.mergeAttr(t.attributes,this.attributes),this}merge(t,e=!1){if(!e&&t instanceof f&&this.mergeId!==t.mergeId)return this;let i=t;return t instanceof f&&(i=t.attributes,t.targets.map((t=>{this.contains(t.id)||this.addTarget(t)}))),this.useOps()&&this.ops.push(i),f.mergeAttr(i,this.attributes),this}applyOp(t,e){const i="undo"===e?"from":"to";this.mapAttr(((t,n)=>{if(!n)return;const s={};n[i]&&(s.to=n[i]);for(const t of p)void 0!==n[t]&&(s[t]="undo"===e?r(n[t],(t=>-t)):n[t]);a.apply(t,s,e,{sourceAction:this.action,relativeNodes:this.targets})}),t)}apply(t,e="redo"){return this.useOps()?(t=t||this.ops).map((t=>this.applyOp(t,e))):this.applyOp(null,e),this}revoke(){const t=this.useOps()?[...this.ops].reverse():null;return this.apply(t,"undo")}empty(){if(this.targets.filter((t=>t.type!==u)).length<=0)return!0;let t=!1;return this.mapAttr(((e,i)=>{i&&(void 0!==i.to&&Object.keys(i.to).length>0||p.map((t=>i[t])).filter((t=>t)).length>0)&&(t=!0)})),!t}get mergeId(){let t=this.action.toString()+";";return Array.isArray(this.targets)?t+this.targets.map((t=>t.id)).sort().join(","):t+this.targets.id}get attrs(){return this.attributes}destroy(){this.parent=null,this.targets=null,this.attributes=null}static mergeAttr(t,e){e=e||{};for(const[i,r]of Object.entries(t))if("time"!==i)if("from"===i)e[i]=Object.assign({},r||{},e[i]||{});else if("to"===i)e[i]=Object.assign(e[i]||{},r||{});else if(Array.isArray(r))e[i]=Array.isArray(e[i])?e[i].concat(r):r;else if("object"==typeof r)e[i]=this.mergeAttr(r,e[i]);else if(isNaN(Number(t[i]))){if(e[i]&&"op"!==i)throw new Error(`Can not merge record! [${i}]${t[i]} => ${e[i]}`);e[i]=r}else e[i]=(Number(e[i])||0)+Number(t[i]);return e}}class m extends o{static EVENTS={change:"change",undo:"undo",redo:"redo"};constructor(t){super(),this._records=[],this._index=0,this._editor=t}append(t){if(t.empty())return;this.length>this._index&&this._records.splice(this._index).map((t=>t.destroy())),t.time=Date.now();const e=this._records[this._index-1];e&&e.mergeNext(t)||(t.parent=this,this._records.push(t),this._index++);const i=(t,e)=>{e&&e.to?.trackId&&t.trackId!=e.to?.trackId&&(e.to.trackId=t.trackId)};return t.useOps()?t.ops.map((e=>t.mapAttr(i,e))):t.mapAttr(i),this.emit(m.EVENTS.change,{record:t}),this}redo(t=1){const e=this._records[this._index];return t<=0||!e?[]:(this._index++,e.apply(),this.emit(m.EVENTS.redo,{record:e}),[...this.redo(t-1),e])}undo(t=1){const e=this._records[this._index-1];return t<=0||!e?[]:(this._index--,e.revoke(),this.emit(m.EVENTS.undo,{record:e}),[...this.undo(t-1),e])}seekTime(t){this._editor.currentTime=t}get length(){return this._records.length}get currentIndex(){return this._index}get records(){return[...this._records]}destroy(){this._editor=null,this._records=null}}t.exports={History:m,Record:f}},(t,e,i)=>{"use strict";const r=i(31);t.exports=class extends r{destroy(){super.destroy(),this.view&&this.view.remove()}}},(t,e,i)=>{"use strict";const r=i(35),n=i(25),{wrap:s}=i(7),{dot:o,cross:a,norm2d:h,sum:l,deg:d}=i(8);class c extends n{static type="rotate";static TAG=r;show(t){return void 0===t&&(t=!0),this.editor.controls.move?.editMode&&(t=!1),this._controls.rotate&&this._controls.rotate.show(t),this}controls(t){return this.node.conf.rotateDisable||this.node.cropMode?{}:{rotate:{box:t.handleBox,styleClass:"handle"}}}updateShow(t){}getDelta(t){if(!this.boxCenter){const{left:t,top:e}=this.editor.container.getBoundingClientRect();let{x:i,y:r}=this.box.position;i=i*this.box.scale+t,r=r*this.box.scale+e,this.boxCenter={x:i,y:r}}const{x:e,y:i}=this.boxCenter,r={x:t.position.x-e,y:t.position.y-i},n={x:r.x-t.delta.x,y:r.y-t.delta.y};let s=Math.acos(o(n,r)/(h(n)*h(r)));return isNaN(s)?{rotation:0}:(s*=a(n,r)>0?1:-1,{rotation:s})}onMove(t){this.node&&this.box&&(c.apply(this.node,this.getDelta(t)),this.box.rotate(),this.toast(`${d(this.node.getRotation())}°`,3e3))}onMoveEnd(t){super.onMoveEnd(t)&&(this.boxCenter=null,this.toast("",0))}}t.exports=c},(t,e,i)=>{"use strict";i(36);const r=i(26),{deg:n}=i(8),{wrap:s}=i(7);class o extends r{static TAG="mira-editor-rotate";static STYLE_CLASS="mirae-rotate";static CURSOR_CLASS="mirae-rot-cursor";static RA_NUM=24;box(){return this.parentElement?.parentElement}setOpts(t){super.setOpts(t);const e=this.box();if(e)return this.wrapper=s(e,"setRotate").after(((t,i)=>this.setRotate(e.rotation)&&i)),this.addClass(this.constructor.CURSOR_CLASS).setRotate(e.rotation)}raOffset(){return parseInt(1.5*this.constructor.RA_NUM)}setRotate(t){const e=this.box()?.handleBox,i=(this.raOffset()+(parseInt(n(t))+7.5)/15>>0)%this.constructor.RA_NUM;if(document.body.setAttribute("r",i.toString()),this.set("r",i.toString()),!e?.classList)return this;e.classList.contains("left")?t+=Math.PI/2:e.classList.contains("right")?t-=Math.PI/2:e.classList.contains("top")&&(t+=Math.PI);const r=(this.raOffset()+(parseInt(n(t))+7.5)/15>>0)%this.constructor.RA_NUM;return document.body.setAttribute("rr",r.toString()),this.set("rr",r.toString())}remove(){this.wrapper&&(this.wrapper.revoke(),this.wrapper=null),super.remove()}bindBodyEvents(t,e){super.bindBodyEvents(t,e),t?(document.body.setAttribute("r",this.getAttribute("r")||"0"),document.body.setAttribute("rr",this.getAttribute("rr")||"0"),document.body.classList.add(this.constructor.CURSOR_CLASS)):document.body.classList.remove(this.constructor.CURSOR_CLASS)}}o.register(),t.exports=o},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(37),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>ot});var r=i(20),n=i.n(r),s=i(21),o=i.n(s),a=i(29),h=i.n(a),l=new URL(i(38),i.b),d=new URL(i(39),i.b),c=new URL(i(40),i.b),u=new URL(i(41),i.b),p=new URL(i(42),i.b),f=new URL(i(43),i.b),m=new URL(i(44),i.b),g=new URL(i(45),i.b),v=new URL(i(46),i.b),y=new URL(i(47),i.b),x=new URL(i(48),i.b),E=new URL(i(49),i.b),b=new URL(i(50),i.b),w=new URL(i(51),i.b),C=new URL(i(52),i.b),_=new URL(i(53),i.b),T=new URL(i(54),i.b),M=new URL(i(55),i.b),O=new URL(i(56),i.b),k=new URL(i(57),i.b),L=new URL(i(58),i.b),N=new URL(i(59),i.b),S=new URL(i(60),i.b),A=new URL(i(61),i.b),R=new URL(i(62),i.b),I=o()(n()),P=h()(l),D=h()(d),B=h()(c),F=h()(u),U=h()(p),H=h()(f),z=h()(m),V=h()(g),G=h()(v),j=h()(y),Y=h()(x),X=h()(E),W=h()(b),$=h()(w),K=h()(C),q=h()(_),Z=h()(T),J=h()(M),Q=h()(O),tt=h()(k),et=h()(L),it=h()(N),rt=h()(S),nt=h()(A),st=h()(R);I.push([t.id,'.mirae-rotate.handle[mira-editor-el] {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: auto;\n  position: relative;\n  z-index: 3;\n}\n.mirae-rotate.handle[mira-editor-el]:after {\n  width: 20px;\n  height: 20px;\n  content: "";\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n  position: relative;\n  border-radius: 10px;\n  box-shadow: 0 0 5px 1px rgba(57, 76, 96, 0.15), 0 0 0 1px rgba(53, 71, 90, 0.2);\n  opacity: 1;\n  background: #FFF 2px no-repeat;\n  background-size: 16px;\n  z-index: 9;\n  background-image: url('+P+');\n}\n.mirae-rot-cursor[rr="0"] {\n  cursor: url('+D+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="1"] {\n  cursor: url('+B+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="2"] {\n  cursor: url('+F+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="3"] {\n  cursor: url('+U+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="4"] {\n  cursor: url('+H+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="5"] {\n  cursor: url('+z+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="6"] {\n  cursor: url('+V+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="7"] {\n  cursor: url('+G+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="8"] {\n  cursor: url('+j+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="9"] {\n  cursor: url('+Y+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="10"] {\n  cursor: url('+X+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="11"] {\n  cursor: url('+W+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="12"] {\n  cursor: url('+$+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="13"] {\n  cursor: url('+K+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="14"] {\n  cursor: url('+q+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="15"] {\n  cursor: url('+Z+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="16"] {\n  cursor: url('+J+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="17"] {\n  cursor: url('+Q+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="18"] {\n  cursor: url('+tt+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="19"] {\n  cursor: url('+et+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="20"] {\n  cursor: url('+it+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="21"] {\n  cursor: url('+rt+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="22"] {\n  cursor: url('+nt+') 12 12, auto;\n}\n.mirae-rot-cursor[rr="23"] {\n  cursor: url('+st+") 12 12, auto;\n}\n",""]);const ot=I},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cpath fill=%27currentColor%27 d=%27M15.25 18.48V15a.75.75 0 1 0-1.5 0v4c0 .97.78 1.75 1.75 1.75h4a.75.75 0 1 0 0-1.5h-2.6a8.75 8.75 0 0 0-2.07-15.53.75.75 0 1 0-.49 1.42 7.25 7.25 0 0 1 .91 13.34zM8.75 5.52V9a.75.75 0 0 0 1.5 0V5c0-.97-.78-1.75-1.75-1.75h-4a.75.75 0 0 0 0 1.5h2.6a8.75 8.75 0 0 0 2.18 15.57.75.75 0 0 0 .47-1.43 7.25 7.25 0 0 1-1-13.37z%27/%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-90 9.25 5.25%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-75 9.972 3.863%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-60 10.84 1.756%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-45 11.972 -1.716%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-30 14.508 -7.572%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-15 21.933 -22.997%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27translate%289.5 3.5%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%2815 -7.985 46.77%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%2830 -.415 27.57%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%2845 2.32 21.713%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%2860 3.916 18.243%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%2875 4.762 16.135%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%2890 5.25 14.75%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28105 5.84 13.617%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28120 6.084 12.666%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28135 6.317 12.01%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28150 6.754 11.325%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28165 7.06 10.653%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-180 7.25 10%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-165 7.597 9.43%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-150 7.825 8.672%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-135 7.974 7.99%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-120 8.393 7.332%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27266.7%25%27 height=%27156.2%25%27 x=%27-75%25%27 y=%27-21.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3Cpath id=%27b%27 d=%27M1.67 12.67a7.7 7.7 0 0 0 0-9.34L0 5V0h5L3.24 1.76a9.9 9.9 0 0 1 0 12.48L5 16H0v-5l1.67 1.67z%27/%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 24V0h24v24z%27/%3E%3Cg fill-rule=%27nonzero%27 filter=%27url%28%23a%29%27 transform=%27rotate%28-105 8.83 6.441%29%27%3E%3Cuse fill=%27%23000%27 fill-rule=%27evenodd%27 xlink:href=%27%23b%27/%3E%3Cpath stroke=%27%23FFF%27 d=%27M1.6 11.9a7.21 7.21 0 0 0 0-7.8L-.5 6.2V-.5h6.7L3.9 1.8a10.4 10.4 0 0 1 0 12.4l2.3 2.3H-.5V9.8l2.1 2.1z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},(t,e,i)=>{"use strict";const r=i(64),n=i(25),{wrap:s}=i(7),{round:o}=i(8),{LEFT:a,TOP:h,RIGHT:l,BOTTOM:d}=r;class c extends n{static type="resize";static TAG=r;show(t){return void 0===t&&(t=!this.selector.withMulti),t?this.box&&this.updateShow(this.box):Object.values(this._controls).map((e=>e.show(t))),this}controls(){if(this.node.conf.resizeDisable||this.node.cropMode)return{};const t={topLeft:{pos:h|a,styleClass:"dot"},topRight:{pos:h|l,styleClass:"dot"},bottomRight:{pos:d|l,styleClass:"dot"},bottomLeft:{pos:d|a,styleClass:"dot"}};if(this.node.conf.resizeScaleOnly||"richtext"===this.node.type)return t;const e={left:{pos:a,styleClass:"ver"},right:{pos:l,styleClass:"ver"}};return"group"===this.node.type?Object.values(this.node.nodes).every((t=>"text"===t.type))?{...e,...t}:t:("text"!==this.node.type&&(e.top={pos:h,styleClass:"hor"},e.bottom={pos:d,styleClass:"hor"}),{...e,...t})}updateShow(t){const e=t.hasClass("editMode"),i={hor:t.size.width*t.scale>50,ver:["text","group"].includes(this.node?.type)||t.size.height*t.scale>50,dot:Math.min(t.size.width,t.size.height)*t.scale>30};for(const[t,r]of Object.entries(this._controls))e?r.show(!1):r.show("bottomRight"===t||i[r.styleClass])}getDelta(t){return t.target.constraint(t.delta)}onMove(t){if(!this.node||!this.box)return;const e=this.getDelta(t);if(0===Math.round(e.size.width)&&0===Math.round(e.size.height))return;c.apply(this.node,e),this.box.resize();const{width:i,height:r}=o(this.box.size,0);this.toast(`${i} × ${r}`,3e3)}}t.exports=c},(t,e,i)=>{"use strict";i(65);const r=i(35),{sum:n,arrMulti:s,norm2d:o,deg:a,dot:h,theta:l}=i(8),{wrap:d}=i(7),c=i(10);class u extends r{static TAG="mira-editor-resize";static STYLE_CLASS="mirae-resize";static CURSOR_CLASS="mirae-rze-cursor";static RA_NUM=12;static LEFT=8;static TOP=4;static RIGHT=2;static BOTTOM=1;has(t,e){return(t&e)>>Math.log2(e)}mat(t){const{LEFT:e,TOP:i,RIGHT:r,BOTTOM:o}=this.constructor;this._mat=[e,i,r,o].map((e=>this.has(t,e))),this.fixRatio=n(this._mat)>1;const a=s([-1,-1,1,1],this._mat);return this.direction=[a[0]+a[2],a[1]+a[3]],this}boundingConstraint(){const t=this.parentElement,e=s(this.direction,[t.size.width,t.size.height]),i=new c({x:e[0],y:e[1]}).rotate(t.rotation);return{x:[i.x<0,!1,i.x>0],y:[i.y<0,!1,i.y>0]}}reverse(t,e=!1){const i=this.parentElement;if((t={x:0,y:0,...t}).x*t.y!=0)return;const r=s(this.direction,[i.size.width,i.size.height]),n=new c({x:r[0],y:0}).rotate(i.rotation),o=new c({x:0,y:r[1]}).rotate(i.rotation),a=l({x:0,y:-1},r)+i.rotation;for(const[r,s]of Object.entries(t)){if(0===s)continue;n[r]*o[r]<0&&(t[r]=Math.max(t[r]/n[r],t[r]/o[r])*Math.abs(n[r]+o[r]));const h=Math.abs(i.scale*t[r]/("x"===r?Math.sin(a):Math.cos(a)));return e?{r:h,θ:a}:new c({x:0,y:-h}).rotate(a)}}constraint(t,e=null){const i=this.parentElement;if(t=(t=new c({x:t.x/i.scale,y:t.y/i.scale})).rotate(-i.rotation),this.fixRatio){const e=s(this.direction,[i.size.width,i.size.height]),r=h(t,e)/Math.pow(o(e),2);t={x:e[0]*r,y:e[1]*r}}const r={x:this._mat[0]*t.x,y:this._mat[1]*t.y},n=this._mat[2]*t.x,a=this._mat[3]*t.y,l={width:n-r.x,height:a-r.y};e||(e=i.anchor);const d=[e.x*l.width,e.y*l.height];return{position:new c(r).offset(d).rotate(i.rotation),size:l}}box(){return this.parentElement}raOffset(){return this.constructor.RA_NUM+this.raIdx}setOpts(t){this.mat(t.pos),this.addClass(["left","top","right","bottom"].filter(((t,e)=>this._mat[e])));const e=this._mat.map(((t,e)=>t*(e+1)<<1)).filter((t=>t>0));return this.raIdx=(e.length>1?n(e)>>1:e[0])%4*3,super.setOpts(t)}}u.register(),t.exports=u},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(66),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>I});var r=i(20),n=i.n(r),s=i(21),o=i.n(s),a=i(29),h=i.n(a),l=new URL(i(67),i.b),d=new URL(i(68),i.b),c=new URL(i(69),i.b),u=new URL(i(70),i.b),p=new URL(i(71),i.b),f=new URL(i(72),i.b),m=new URL(i(73),i.b),g=new URL(i(74),i.b),v=new URL(i(75),i.b),y=new URL(i(76),i.b),x=new URL(i(77),i.b),E=new URL(i(78),i.b),b=o()(n()),w=h()(l),C=h()(d),_=h()(c),T=h()(u),M=h()(p),O=h()(f),k=h()(m),L=h()(g),N=h()(v),S=h()(y),A=h()(x),R=h()(E);b.push([t.id,'.mirae-resize[mira-editor-el] {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: auto;\n}\n.mirae-resize[mira-editor-el].hide {\n  pointer-events: none;\n}\n.mirae-resize[mira-editor-el].dot:after {\n  width: 12px;\n  height: 12px;\n  content: "";\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n  position: relative;\n  border-radius: 7px;\n  box-shadow: 0 0 5px 1px rgba(57, 76, 96, 0.15), 0 0 0 1px rgba(53, 71, 90, 0.2);\n  opacity: 1;\n  background: #FFF 2px no-repeat;\n  background-size: 16px;\n  z-index: 9;\n}\n.mirae-resize[mira-editor-el].hor {\n  width: 100%;\n  height: 32px;\n}\n.mirae-resize[mira-editor-el].hor:after {\n  width: 16px;\n  height: 4px;\n  content: "";\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n  position: relative;\n  border-radius: 2px;\n  box-shadow: 0 0 5px 1px rgba(57, 76, 96, 0.15), 0 0 0 1px rgba(53, 71, 90, 0.2);\n  opacity: 1;\n  background: #FFF 2px no-repeat;\n  background-size: 16px;\n  z-index: 9;\n}\n.mirae-resize[mira-editor-el].ver {\n  width: 32px;\n  height: 100%;\n}\n.mirae-resize[mira-editor-el].ver:after {\n  width: 4px;\n  height: 16px;\n  content: "";\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n  position: relative;\n  border-radius: 2px;\n  box-shadow: 0 0 5px 1px rgba(57, 76, 96, 0.15), 0 0 0 1px rgba(53, 71, 90, 0.2);\n  opacity: 1;\n  background: #FFF 2px no-repeat;\n  background-size: 16px;\n  z-index: 9;\n}\n.mirae-resize[mira-editor-el].top {\n  top: 0;\n  margin-top: -16px;\n}\n.mirae-resize[mira-editor-el].top:after {\n  margin-top: -2px;\n}\n.mirae-resize[mira-editor-el].bottom {\n  bottom: 0;\n  margin-bottom: -16px;\n}\n.mirae-resize[mira-editor-el].bottom:after {\n  margin-bottom: -2px;\n}\n.mirae-resize[mira-editor-el].left {\n  left: 0;\n  margin-left: -16px;\n}\n.mirae-resize[mira-editor-el].left:after {\n  margin-left: -2px;\n}\n.mirae-resize[mira-editor-el].right {\n  right: 0;\n  margin-right: -16px;\n}\n.mirae-resize[mira-editor-el].right:after {\n  margin-right: -2px;\n}\n.mirae-rze-cursor[r="0"] {\n  cursor: url('+w+') 12 12, auto;\n}\n.mirae-rze-cursor[r="1"] {\n  cursor: url('+C+') 12 12, auto;\n}\n.mirae-rze-cursor[r="2"] {\n  cursor: url('+_+') 12 12, auto;\n}\n.mirae-rze-cursor[r="3"] {\n  cursor: url('+T+') 12 12, auto;\n}\n.mirae-rze-cursor[r="4"] {\n  cursor: url('+M+') 12 12, auto;\n}\n.mirae-rze-cursor[r="5"] {\n  cursor: url('+O+') 12 12, auto;\n}\n.mirae-rze-cursor[r="6"] {\n  cursor: url('+k+') 12 12, auto;\n}\n.mirae-rze-cursor[r="7"] {\n  cursor: url('+L+') 12 12, auto;\n}\n.mirae-rze-cursor[r="8"] {\n  cursor: url('+N+') 12 12, auto;\n}\n.mirae-rze-cursor[r="9"] {\n  cursor: url('+S+') 12 12, auto;\n}\n.mirae-rze-cursor[r="10"] {\n  cursor: url('+A+') 12 12, auto;\n}\n.mirae-rze-cursor[r="11"] {\n  cursor: url('+R+") 12 12, auto;\n}\n",""]);const I=b},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27scale%28-1 1%29 rotate%2845 -8.536 -13.435%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27scale%28-1 1%29 rotate%2830 -11.83 -25.954%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27scale%28-1 1%29 rotate%2815, -21.49, -62.66%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27matrix%28-1 0 0 1 19 5%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27scale%28-1 1%29 rotate%28-15, 16.49, 81.66%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27scale%28-1 1%29 rotate%28-30, 6.83, 44.954%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27scale%28-1 1%29 rotate%28-45, 3.536, 32.435%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27rotate%28-30 18.83 .17%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27rotate%28-15 28.49 -9.49%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27translate%285 5%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27rotate%2815 -9.49 28.49%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml;charset=utf-8,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2724%27 height=%2724%27%3E%3Cdefs%3E%3Cfilter id=%27a%27 width=%27150%25%27 height=%27150%25%27 x=%27-25%25%27 y=%27-17.9%25%27 filterUnits=%27objectBoundingBox%27%3E%3CfeOffset dy=%271%27 in=%27SourceAlpha%27 result=%27shadowOffsetOuter1%27/%3E%3CfeGaussianBlur in=%27shadowOffsetOuter1%27 result=%27shadowBlurOuter1%27 stdDeviation=%271%27/%3E%3CfeColorMatrix in=%27shadowBlurOuter1%27 result=%27shadowMatrixOuter1%27 values=%270 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0%27/%3E%3CfeMerge%3E%3CfeMergeNode in=%27shadowMatrixOuter1%27/%3E%3CfeMergeNode in=%27SourceGraphic%27/%3E%3C/feMerge%3E%3C/filter%3E%3C/defs%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cpath d=%27M0 0h24v24H0z%27/%3E%3Cg filter=%27url%28%23a%29%27 transform=%27rotate%2830 .17 18.83%29%27%3E%3Cpath fill=%27%23FFF%27 d=%27M4.257 7.087l4.072 4.068L5.5 13.983l8.473-.013.013-8.47-2.841 2.842L7.07 4.274 5.656 2.859 8.5.017H.014v8.484l2.829-2.827z%27/%3E%3Cpath fill=%27%23000%27 d=%27M5.317 6.733l4.427 4.424-1.828 1.828 5.056-.016.014-5.054-1.842 1.841-4.428-4.422-2.474-2.475 1.844-1.843H1.013v5.071l1.83-1.828z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports=class{constructor(){this.queue=[],this.pendingPromise=!1}enqueue(t){return new Promise(((e,i)=>{this.queue.push({promise:t,resolve:e,reject:i}),this.dequeue()}))}dequeue(){if(this.pendingPromise)return!1;const t=this.queue.shift();if(!t)return!1;try{this.pendingPromise=!0,t.promise().then((e=>{this.pendingPromise=!1,t.resolve(e),this.dequeue()})).catch((e=>{this.pendingPromise=!1,t.reject(e),this.dequeue()}))}catch(e){this.pendingPromise=!1,t.reject(e),this.dequeue()}return!0}}},t=>{"use strict";const e={secToHmsf:(t,i)=>{const r=e.secToHms(t,3);if(!i)throw new Error("fps error!");const n=Number(r.substring(r.length-3))/1e3;return r.substring(0,r.length-4)+":"+Math.round(n*i).toString().padStart(2,"0")},secToHms:(t,e=0,i=!1)=>{t=t.toFixed(e);const r=Math.floor(t/3600).toString();let n=Math.floor((t-3600*r)/60).toString();const s=r>0||i;s&&(n=n.padStart(2,"0"));let o=Math.floor(t-3600*r-60*n).toString();return n.length>0&&(o=o.padStart(2,"0")),`${s?r+":":""}${n}:${o}${e>0?(t-Math.floor(t)).toFixed(e).replace("0.","."):""}`},sleep:t=>new Promise((e=>setTimeout(e,t)))};t.exports=e},(t,e,i)=>{"use strict";i.r(e),i.d(e,{InteractionData:()=>a,InteractionEvent:()=>l,InteractionManager:()=>f,InteractionTrackingData:()=>d,interactiveTarget:()=>u});var r=i(82),n=i(83),s=i(87),o=i(88),a=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),h=function(t,e){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},h(t,e)},l=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),d=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),c=function(){function t(){this._tempPoint=new r.Point}return t.prototype.recursiveFindHit=function(t,e,i,r,n){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(r=!1,h=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(r=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,d=l.length-1;d>=0;d--){var c=l[d],u=this.recursiveFindHit(t,c,i,r,a);if(u){if(!c.parent)continue;a=!1,u&&(t.target&&(r=!1),o=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},t.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)},t}(),u={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};s.DisplayObject.mixin(u);var p={target:null,data:{global:null}},f=function(t){function e(e,i){var r=t.call(this)||this;return i=i||{},r.renderer=e,r.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new a,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new l,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in self),r.supportsTouchEvents="ontouchstart"in self,r.supportsPointerEvents=!!self.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new c,r._tempDisplayObject=new s.TemporaryDisplayObject,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function i(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return p.target=null,p.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(p,e,null,!0),p.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(n.Ticker.system.add(this.tickerUpdate,this,n.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(n.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r){var n=this.search.findHit(t,e,i,r),s=this.delayedEvents;if(!s.length)return n;t.stopPropagationHint=!1;var o=s.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=s[a],l=h.displayObject,d=h.eventString,c=h.eventData;c.stopsPropagatingAt===l&&(c.stopPropagationHint=!0),this.dispatchEvent(l,d,c)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===n.pointerType)this.emit("touchstart",o);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new d(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var s=2===r.button;s?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<n;o++){var a=r[o],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,l),"mouse"===a.pointerType||"pen"===a.pointerType){var d=2===a.button;this.emit(d?"rightup"+s:"mouseup"+s,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,l),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,s=e.trackedPointers[n],o="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,h=!1;if(a){var l=2===r.button,c=d.FLAGS,u=l?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==s&&s.flags&u;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):p&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),s&&(l?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===n.pointerType&&this.emit("touchmove",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,s="mouse"===r.pointerType||"pen"===r.pointerType,o=e.trackedPointers[n];i&&!o&&(o=e.trackedPointers[n]=new d(n)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new a).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(!self.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof self.PointerEvent)){var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}else e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(o.EventEmitter)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{Circle:()=>h,DEG_TO_RAD:()=>o,Ellipse:()=>l,Matrix:()=>f,ObservablePoint:()=>p,PI_2:()=>n,Point:()=>u,Polygon:()=>d,RAD_TO_DEG:()=>s,Rectangle:()=>a,RoundedRectangle:()=>c,SHAPES:()=>r,Transform:()=>C,groupD8:()=>w});var r,n=2*Math.PI,s=180/Math.PI,o=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(r||(r={}));var a=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),h=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),l=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new a(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),d=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){for(var s=[],o=0,a=n.length;o<a;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,s=r-1;n<r;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],l=this.points[2*s+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-o)+o&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),c=function(){function t(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var r=t-(this.x+i),n=e-(this.y+i),s=i*i;if(r*r+n*n<=s)return!0;if((r=t-(this.x+this.width-i))*r+n*n<=s)return!0;if(r*r+(n=e-(this.y+this.height-i))*n<=s)return!0;if((r=t-(this.x+i))*r+n*n<=s)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),u=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),p=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new u;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new u;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,s=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-r,s),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(n-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+s*s),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*s),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),m=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],g=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],v=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],y=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],x=[],E=[],b=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];x.push(e);for(var i=0;i<16;i++)for(var r=b(m[t]*m[i]+v[t]*g[i]),n=b(g[t]*m[i]+y[t]*g[i]),s=b(m[t]*v[i]+v[t]*y[i]),o=b(g[t]*v[i]+y[t]*y[i]),a=0;a<16;a++)if(m[a]===r&&g[a]===n&&v[a]===s&&y[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new f;h.set(m[t],g[t],v[t],y[t],0,0),E.push(h)}}();var w={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return m[t]},uY:function(t){return g[t]},vX:function(t){return v[t]},vY:function(t){return y[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return x[t][e]},sub:function(t,e){return x[t][w.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?w.S:w.N:2*Math.abs(e)<=Math.abs(t)?t>0?w.E:w.W:e>0?t>0?w.SE:w.SW:t>0?w.NE:w.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=E[w.inv(e)];n.tx=i,n.ty=r,t.append(n)}},C=function(){function t(){this.worldTransform=new f,this.localTransform=new f,this.position=new p(this.onChange,this,0,0),this.scale=new p(this.onChange,this,1,1),this.pivot=new p(this.onChange,this,0,0),this.skew=new p(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},(t,e,i)=>{"use strict";i.r(e),i.d(e,{Ticker:()=>o,TickerPlugin:()=>a,UPDATE_PRIORITY:()=>r});var r,n=i(84);n.settings.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(r||(r={}));var s=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),o=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new s(null,null,1/0),this.deltaMS=1/n.settings.TARGET_FPMS,this.elapsedMS=1/n.settings.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new s(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new s(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*n.settings.TARGET_FPMS;for(var r=this._head,s=r.next;s;)s=s.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,n.settings.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?o.shared:new o,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},(t,e,i)=>{"use strict";i.r(e),i.d(e,{isMobile:()=>w,settings:()=>C});var r,n,s,o,a,h,l,d,c,u,p,f,m,g,v,y,x,E,b,w=(0,i(85).default)(self.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(d||(d={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(u||(u={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(x||(x={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(E||(E={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(b||(b={}));var C={MIPMAP_TEXTURES:f.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:E.NONE,SPRITE_MAX_TEXTURES:function(t){var e,i=!0;(w.tablet||w.phone)&&(w.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(i=!1),w.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(i=!1));return i?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:v.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:p.CLAMP,SCALE_MODE:u.LINEAR,PRECISION_VERTEX:y.HIGH,PRECISION_FRAGMENT:w.apple.device?y.HIGH:y.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!w.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r.default});var r=i(86)},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>x});var r=/iPhone/i,n=/iPod/i,s=/iPad/i,o=/\biOS-universal(?:.+)Mac\b/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,d=/Silk/i,c=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,m=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,y=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};function x(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,x=i.split("[FBAN");void 0!==x[1]&&(i=x[0]),void 0!==(x=i.split("Twitter"))[1]&&(i=x[0]);var E=function(t){return function(e){return e.test(t)}}(i),b={apple:{phone:E(r)&&!E(c),ipod:E(n),tablet:!E(r)&&(E(s)||y(e))&&!E(c),universal:E(o),device:(E(r)||E(n)||E(s)||E(o)||y(e))&&!E(c)},amazon:{phone:E(l),tablet:!E(l)&&E(d),device:E(l)||E(d)},android:{phone:!E(c)&&E(l)||!E(c)&&E(a),tablet:!E(c)&&!E(l)&&!E(a)&&(E(d)||E(h)),device:!E(c)&&(E(l)||E(d)||E(a)||E(h))||E(/\bokhttp\b/i)},windows:{phone:E(c),tablet:E(u),device:E(c)||E(u)},other:{blackberry:E(p),blackberry10:E(f),opera:E(m),firefox:E(v),chrome:E(g),device:E(p)||E(f)||E(m)||E(v)||E(g)},any:!1,phone:!1,tablet:!1};return b.any=b.apple.device||b.android.device||b.windows.device||b.other.device,b.phone=b.apple.phone||b.android.phone||b.windows.phone,b.tablet=b.apple.tablet||b.android.tablet||b.windows.tablet,b}},(t,e,i)=>{"use strict";i.r(e),i.d(e,{Bounds:()=>o,Container:()=>S,DisplayObject:()=>k,TemporaryDisplayObject:()=>L});var r=i(84),n=i(82),s=i(88);r.settings.SORTABLE_CHILDREN=!1;var o=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var i=t.a,r=t.b,n=t.c,s=t.d,o=t.tx,a=t.ty,h=i*e.x+n*e.y+o,l=r*e.x+s*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[6])<e?s:e,i=(o=t[7])<i?o:i,r=s>r?s:r,n=o>n?o:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},t.prototype.addFrameMatrix=function(t,e,i,r,n){var s=t.a,o=t.b,a=t.c,h=t.d,l=t.tx,d=t.ty,c=this.minX,u=this.minY,p=this.maxX,f=this.maxY,m=s*e+a*i+l,g=o*e+h*i+d;c=m<c?m:c,u=g<u?g:u,p=m>p?m:p,f=g>f?g:f,c=(m=s*r+a*i+l)<c?m:c,u=(g=o*r+h*i+d)<u?g:u,p=m>p?m:p,f=g>f?g:f,c=(m=s*e+a*n+l)<c?m:c,u=(g=o*e+h*n+d)<u?g:u,p=m>p?m:p,f=g>f?g:f,c=(m=s*r+a*n+l)<c?m:c,u=(g=o*r+h*n+d)<u?g:u,p=m>p?m:p,f=g>f?g:f,this.minX=c,this.minY=u,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2){var h=t[a],l=t[a+1];r=h<r?h:r,n=l<n?l:n,s=h>s?h:s,o=l>o?l:o}this.minX=r,this.minY=n,this.maxX=s,this.maxY=o},t.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},t.prototype.addVerticesMatrix=function(t,e,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,l=t.d,d=t.tx,c=t.ty,u=this.minX,p=this.minY,f=this.maxX,m=this.maxY,g=i;g<r;g+=2){var v=e[g],y=e[g+1],x=o*v+h*y+d,E=l*y+a*v+c;u=Math.min(u,x-n),f=Math.max(f,x+n),p=Math.min(p,E-s),m=Math.max(m,E+s)}this.minX=u,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=s>l?s:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=s>l?s:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,r,n,s){t-=n,e-=s,i+=n,r+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),a=function(t,e){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},a(t,e)};function h(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l,d,c,u,p,f,m,g,v,y,x,E,b,w,C,_,T,M,O,k=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new n.Transform,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new o,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return h(e,t),e.mixin=function(t){for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new n.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),t=this._localBoundsRect),this._localBounds||(this._localBounds=new o);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new L),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*n.RAD_TO_DEG},set:function(t){this.transform.rotation=t*n.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&((e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),e}(s.EventEmitter),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return h(e,t),e}(k);function N(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}k.prototype.displayObjectUpdateTransform=k.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(l||(l={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(d||(d={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(c||(c={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(u||(u={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(p||(p={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(f||(f={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(m||(m={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(g||(g={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(v||(v={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(y||(y={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(x||(x={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(E||(E={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(b||(b={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(w||(w={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(C||(C={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(T||(T={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(M||(M={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(O||(O={}));var S=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.settings.SORTABLE_CHILDREN,e.sortDirty=!1,e}return h(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],o=this.children.indexOf(n);if(-1===o)return null;n.parent=null,n.transform._parentID=-1,(0,s.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),n.emit("removed",this),this.emit("childRemoved",n,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,r=t,n=e-r;if(n>0&&n<=e){i=this.children.splice(r,n);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),s=0;s<i.length;++s)i[s].emit("removed",this),this.emit("childRemoved",i[s],this,s);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(N),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!i)for(var n=0,s=this.children.length;n<s;++n){var o=this.children[n];o.visible&&o.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var n=e&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==T.NONE));n&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this._render(t),r=0;for(var s=this.children.length;r<s;r++)this.children[r].render(t);n&&t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(k);S.prototype.containerUpdateTransform=S.prototype.updateTransform},(t,e,i)=>{"use strict";i.r(e),i.d(e,{isMobile:()=>r.isMobile,EventEmitter:()=>s.a,earcut:()=>a.a,BaseTextureCache:()=>z,CanvasRenderTarget:()=>j,DATA_URI:()=>W,ProgramCache:()=>U,TextureCache:()=>H,clearTextureCache:()=>G,correctBlendMode:()=>w,createIndicesForQuads:()=>M,decomposeDataUri:()=>$,deprecation:()=>F,destroyTextureCache:()=>V,determineCrossOrigin:()=>K,getBufferType:()=>O,getResolutionOfUrl:()=>q,hex2rgb:()=>v,hex2string:()=>y,interleaveTypedArrays:()=>L,isPow2:()=>S,isWebGLSupported:()=>m,log2:()=>A,nextPow2:()=>N,premultiplyBlendMode:()=>b,premultiplyRgba:()=>C,premultiplyTint:()=>_,premultiplyTintToRgba:()=>T,removeItems:()=>R,rgb2hex:()=>E,sayHello:()=>f,sign:()=>I,skipHello:()=>p,string2hex:()=>x,trimCanvas:()=>Y,uid:()=>D,url:()=>d});var r=i(84),n=i(4),s=i.n(n),o=i(89),a=i.n(o),h=i(90),l=i(96),d={parse:h.parse,format:h.format,resolve:h.resolve};r.settings.RETINA_PREFIX=/@([0-9\.]+)x/,r.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var c,u=!1;function p(){u=!0}function f(t){var e;if(!u){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 6.2.1 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,i)}else self.console&&self.console.log("PixiJS 6.2.1 - "+t+" - http://www.pixijs.com/");u=!0}}function m(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch(t){return!1}}()),c}var g={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function v(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function y(t){var e=t.toString(16);return"#"+("000000".substr(0,6-e.length)+e)}function x(t){return"string"==typeof t&&"#"===(t=g[t.toLowerCase()]||t)[0]&&(t=t.substr(1)),parseInt(t,16)}function E(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var b=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[l.BLEND_MODES.NORMAL_NPM]=l.BLEND_MODES.NORMAL,t[l.BLEND_MODES.ADD_NPM]=l.BLEND_MODES.ADD,t[l.BLEND_MODES.SCREEN_NPM]=l.BLEND_MODES.SCREEN,e[l.BLEND_MODES.NORMAL]=l.BLEND_MODES.NORMAL_NPM,e[l.BLEND_MODES.ADD]=l.BLEND_MODES.ADD_NPM,e[l.BLEND_MODES.SCREEN]=l.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function w(t,e){return b[e?1:0][t]}function C(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function _(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n*e+.5|0)}function T(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function M(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function O(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var k={Float32Array,Uint32Array,Int32Array,Uint8Array};function L(t,e){for(var i=0,r=0,n={},s=0;s<t.length;s++)r+=e[s],i+=t[s].length;var o=new ArrayBuffer(4*i),a=null,h=0;for(s=0;s<t.length;s++){var l=e[s],d=t[s],c=O(d);n[c]||(n[c]=new k[c](o)),a=n[c];for(var u=0;u<d.length;u++)a[(u/l|0)*r+h+u%l]=d[u];h+=l}return new Float32Array(o)}function N(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function S(t){return!(t&t-1||!t)}function A(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function R(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var s=n-(i=e+i>n?n-e:i);for(r=e;r<s;++r)t[r]=t[r+i];t.length=s}}function I(t){return 0===t?0:t<0?-1:1}var P=0;function D(){return++P}var B={};function F(t,e,i){if(void 0===i&&(i=3),!B[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),B[e]=!0}}var U={},H=Object.create(null),z=Object.create(null);function V(){var t;for(t in H)H[t].destroy();for(t in z)z[t].destroy()}function G(){var t;for(t in H)delete H[t];for(t in z)delete z[t]}var j=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||r.settings.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function Y(t){var e,i,r,n=t.width,s=t.height,o=t.getContext("2d"),a=o.getImageData(0,0,n,s).data,h=a.length,l={top:null,left:null,right:null,bottom:null},d=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%n,r=~~(e/4/n),null===l.top&&(l.top=r),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<r)&&(l.bottom=r));return null!==l.top&&(n=l.right-l.left,s=l.bottom-l.top+1,d=o.getImageData(l.left,l.top,n,s)),{height:s,width:n,data:d}}var X,W=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function $(t){var e=W.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function K(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,X||(X=document.createElement("a")),X.href=t;var i=d.parse(X.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function q(t,e){var i=r.settings.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}},t=>{"use strict";function e(t,e,s){s=s||2;var o,a,h,c,u,f,m,g=e&&e.length,v=g?e[0]*s:t.length,y=i(t,0,v,s,!0),x=[];if(!y||y.next===y.prev)return x;if(g&&(y=function(t,e,n,s){var o,a,h,c=[];for(o=0,a=e.length;o<a;o++)(h=i(t,e[o]*s,o<a-1?e[o+1]*s:t.length,s,!1))===h.next&&(h.steiner=!0),c.push(p(h));for(c.sort(l),o=0;o<c.length;o++)n=r(n=d(c[o],n),n.next);return n}(t,e,y,s)),t.length>80*s){o=h=t[0],a=c=t[1];for(var E=s;E<v;E+=s)(u=t[E])<o&&(o=u),(f=t[E+1])<a&&(a=f),u>h&&(h=u),f>c&&(c=f);m=0!==(m=Math.max(h-o,c-a))?1/m:0}return n(y,x,s,o,a,m),x}function i(t,e,i,r,n){var s,o;if(n===M(t,e,i,r)>0)for(s=e;s<i;s+=r)o=C(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=C(s,t[s],t[s+1],o);return o&&v(o,o.next)&&(_(o),o=o.next),o}function r(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!v(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(_(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function n(t,e,i,l,d,c,p){if(t){!p&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=u(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(h=l;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,l*=2}while(o>1)}(n)}(t,l,d,c);for(var f,m,g=t;t.prev!==t.next;)if(f=t.prev,m=t.next,c?o(t,l,d,c):s(t))e.push(f.i/i),e.push(t.i/i),e.push(m.i/i),_(t),t=m.next,g=m.next;else if((t=m)===g){p?1===p?n(t=a(r(t),e,i),e,i,l,d,c,2):2===p&&h(t,e,i,l,d,c):n(r(t),e,i,l,d,c,1);break}}}function s(t){var e=t.prev,i=t,r=t.next;if(g(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(f(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&g(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function o(t,e,i,r){var n=t.prev,s=t,o=t.next;if(g(n,s,o)>=0)return!1;for(var a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,h=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,l=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,d=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,c=u(a,h,e,i,r),p=u(l,d,e,i,r),m=t.prevZ,v=t.nextZ;m&&m.z>=c&&v&&v.z<=p;){if(m!==t.prev&&m!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,v!==t.prev&&v!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;m&&m.z>=c;){if(m!==t.prev&&m!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;v&&v.z<=p;){if(v!==t.prev&&v!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,v.x,v.y)&&g(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function a(t,e,i){var n=t;do{var s=n.prev,o=n.next.next;!v(s,o)&&y(s,n,n.next,o)&&b(s,o)&&b(o,s)&&(e.push(s.i/i),e.push(n.i/i),e.push(o.i/i),_(n),_(n.next),n=t=o),n=n.next}while(n!==t);return r(n)}function h(t,e,i,s,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var d=w(h,l);return h=r(h,h.next),d=r(d,d.next),n(h,e,i,s,o,a),void n(d,e,i,s,o,a)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function d(t,e){var i=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){if(o=a,a===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var h,l=i,d=i.x,u=i.y,p=1/0;r=i;do{n>=r.x&&r.x>=d&&n!==r.x&&f(s<u?n:o,s,d,u,s<u?o:n,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(n-r.x),b(r,t)&&(h<p||h===p&&(r.x>i.x||r.x===i.x&&c(i,r)))&&(i=r,p=h)),r=r.next}while(r!==l);return i}(t,e);if(!i)return e;var n=w(i,t),s=r(i,i.next);return r(n,n.next),e===i?s:e}function c(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function u(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,r,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||v(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,r){var n=E(g(t,e,i)),s=E(g(t,e,r)),o=E(g(i,r,t)),a=E(g(i,r,e));return n!==s&&o!==a||!(0!==n||!x(t,i,e))||!(0!==s||!x(t,r,e))||!(0!==o||!x(i,t,r))||!(0!==a||!x(i,e,r))}function x(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function E(t){return t>0?1:t<0?-1:0}function b(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var i=new T(t.i,t.x,t.y),r=new T(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function C(t,e,i,r){var n=new T(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function _(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(M(t,0,s,i));if(n)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,d=a<h-1?e[a+1]*i:t.length;o-=Math.abs(M(t,l,d,i))}var c=0;for(a=0;a<r.length;a+=3){var u=r[a]*i,p=r[a+1]*i,f=r[a+2]*i;c+=Math.abs((t[u]-t[f])*(t[p+1]-t[u+1])-(t[u]-t[p])*(t[f+1]-t[u+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},(t,e,i)=>{"use strict";var r=i(91),n=i(92);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=x,e.resolve=function(t,e){return x(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?x(t,!1,!0).resolveObject(e):e},e.format=function(t){return n.isString(t)&&(t=x(t)),t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(l),c=["%","/","?",";","#"].concat(d),u=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=i(93);function x(t,e,i){if(t&&n.isObject(t)&&t instanceof s)return t;var r=new s;return r.parse(t,e,i),r}s.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var x=t=l.join(a);if(x=x.trim(),!i&&1===t.split("#").length){var E=h.exec(x);if(E)return this.path=x,this.href=x,this.pathname=E[1],E[2]?(this.search=E[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=o.exec(x);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,x=x.substr(b.length)}if(i||b||x.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===x.substr(0,2);!C||b&&g[b]||(x=x.substr(2),this.slashes=!0)}if(!g[b]&&(C||b&&!v[b])){for(var _,T,M=-1,O=0;O<u.length;O++)-1!==(k=x.indexOf(u[O]))&&(-1===M||k<M)&&(M=k);for(-1!==(T=-1===M?x.lastIndexOf("@"):x.lastIndexOf("@",M))&&(_=x.slice(0,T),x=x.slice(T+1),this.auth=decodeURIComponent(_)),M=-1,O=0;O<c.length;O++){var k;-1!==(k=x.indexOf(c[O]))&&(-1===M||k<M)&&(M=k)}-1===M&&(M=x.length),this.host=x.slice(0,M),x=x.slice(M),this.parseHost(),this.hostname=this.hostname||"";var L="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!L)for(var N=this.hostname.split(/\./),S=(O=0,N.length);O<S;O++){var A=N[O];if(A&&!A.match(p)){for(var R="",I=0,P=A.length;I<P;I++)A.charCodeAt(I)>127?R+="x":R+=A[I];if(!R.match(p)){var D=N.slice(0,O),B=N.slice(O+1),F=A.match(f);F&&(D.push(F[1]),B.unshift(F[2])),B.length&&(x="/"+B.join(".")+x),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),L||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+U,this.href+=this.host,L&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==x[0]&&(x="/"+x))}if(!m[w])for(O=0,S=d.length;O<S;O++){var z=d[O];if(-1!==x.indexOf(z)){var V=encodeURIComponent(z);V===z&&(V=escape(z)),x=x.split(z).join(V)}}var G=x.indexOf("#");-1!==G&&(this.hash=x.substr(G),x=x.slice(0,G));var j=x.indexOf("?");if(-1!==j?(this.search=x.substr(j),this.query=x.substr(j+1),e&&(this.query=y.parse(this.query)),x=x.slice(0,j)):e&&(this.search="",this.query={}),x&&(this.pathname=x),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var Y=this.search||"";this.path=U+Y}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},s.prototype.resolve=function(t){return this.resolveObject(x(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(n.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,r=Object.keys(this),o=0;o<r.length;o++){var a=r[o];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var d=h[l];"protocol"!==d&&(i[d]=t[d])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var p=c[u];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||g[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",y=i.search||"";i.path=m+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var x=i.pathname&&"/"===i.pathname.charAt(0),E=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=E||x||i.host&&t.pathname,w=b,C=i.pathname&&i.pathname.split("/")||[],_=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(_&&(i.hostname="",i.port=null,i.host&&(""===C[0]?C[0]=i.host:C.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===C[0])),E)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,C=f;else if(f.length)C||(C=[]),C.pop(),C=C.concat(f),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search))return _&&(i.hostname=i.host=C.shift(),(L=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=L.shift(),i.host=i.hostname=L.shift())),i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!C.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var T=C.slice(-1)[0],M=(i.host||t.host||C.length>1)&&("."===T||".."===T)||""===T,O=0,k=C.length;k>=0;k--)"."===(T=C[k])?C.splice(k,1):".."===T?(C.splice(k,1),O++):O&&(C.splice(k,1),O--);if(!b&&!w)for(;O--;O)C.unshift("..");!b||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),M&&"/"!==C.join("/").substr(-1)&&C.push("");var L,N=""===C[0]||C[0]&&"/"===C[0].charAt(0);return _&&(i.hostname=i.host=N?"":C.length?C.shift():"",(L=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=L.shift(),i.host=i.hostname=L.shift())),(b=b||i.host&&C.length)&&!N&&C.unshift(""),C.length?i.pathname=C.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){var r;t=i.nmd(t),function(n){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof i.g&&i.g;s.global!==s&&s.window!==s&&s.self;var o,a=2147483647,h=36,l=/^xn--/,d=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw RangeError(u[t])}function g(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function v(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+g((t=t.replace(c,".")).split("."),e).join(".")}function y(t){for(var e,i,r=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function x(t){return g(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+f(t)})).join("")}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function b(t,e,i){var r=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;r+=h)t=p(t/35);return p(r+36*t/(t+38))}function w(t){var e,i,r,n,s,o,l,d,c,u,f,g=[],v=t.length,y=0,E=128,w=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&m("not-basic"),g.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<v;){for(s=y,o=1,l=h;n>=v&&m("invalid-input"),((d=(f=t.charCodeAt(n++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:h)>=h||d>p((a-y)/o))&&m("overflow"),y+=d*o,!(d<(c=l<=w?1:l>=w+26?26:l-w));l+=h)o>p(a/(u=h-c))&&m("overflow"),o*=u;w=b(y-s,e=g.length+1,0==s),p(y/e)>a-E&&m("overflow"),E+=p(y/e),y%=e,g.splice(y++,0,E)}return x(g)}function C(t){var e,i,r,n,s,o,l,d,c,u,g,v,x,w,C,_=[];for(v=(t=y(t)).length,e=128,i=0,s=72,o=0;o<v;++o)(g=t[o])<128&&_.push(f(g));for(r=n=_.length,n&&_.push("-");r<v;){for(l=a,o=0;o<v;++o)(g=t[o])>=e&&g<l&&(l=g);for(l-e>p((a-i)/(x=r+1))&&m("overflow"),i+=(l-e)*x,e=l,o=0;o<v;++o)if((g=t[o])<e&&++i>a&&m("overflow"),g==e){for(d=i,c=h;!(d<(u=c<=s?1:c>=s+26?26:c-s));c+=h)C=d-u,w=h-u,_.push(f(E(u+C%w,0))),d=p(C/w);_.push(f(E(d,0))),s=b(i,x,r==n),i=0,++r}++i,++e}return _.join("")}o={version:"1.3.2",ucs2:{decode:y,encode:x},decode:w,encode:C,toASCII:function(t){return v(t,(function(t){return d.test(t)?"xn--"+C(t):t}))},toUnicode:function(t){return v(t,(function(t){return l.test(t)?w(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return o}.call(e,i,e,t))||(t.exports=r)}()},t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},(t,e,i)=>{"use strict";e.decode=e.parse=i(94),e.encode=e.stringify=i(95)},t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,i,r,n){i=i||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var o=/\+/g;t=t.split(i);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var h=t.length;a>0&&h>a&&(h=a);for(var l=0;l<h;++l){var d,c,u,p,f=t[l].replace(o,"%20"),m=f.indexOf(r);m>=0?(d=f.substr(0,m),c=f.substr(m+1)):(d=f,c=""),u=decodeURIComponent(d),p=decodeURIComponent(c),e(s,u)?Array.isArray(s[u])?s[u].push(p):s[u]=[s[u],p]:s[u]=p}return s}},t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,i,r,n){return i=i||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var s=encodeURIComponent(e(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return s+encodeURIComponent(e(t))})).join(i):s+encodeURIComponent(e(t[n]))})).join(i):n?encodeURIComponent(e(n))+r+encodeURIComponent(e(t)):""}},(t,e,i)=>{"use strict";var r,n,s,o,a,h,l,d,c,u,p,f,m,g,v,y,x,E,b;i.r(e),i.d(e,{ALPHA_MODES:()=>m,BLEND_MODES:()=>o,BUFFER_BITS:()=>s,BUFFER_TYPE:()=>b,CLEAR_MODES:()=>g,DRAW_MODES:()=>a,ENV:()=>r,FORMATS:()=>h,GC_MODES:()=>v,MASK_TYPES:()=>x,MIPMAP_MODES:()=>f,MSAA_QUALITY:()=>E,PRECISION:()=>y,RENDERER_TYPE:()=>n,SAMPLER_TYPES:()=>c,SCALE_MODES:()=>u,TARGETS:()=>l,TYPES:()=>d,WRAP_MODES:()=>p}),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(d||(d={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(u||(u={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(g||(g={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(x||(x={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(E||(E={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(b||(b={}))},(t,e,i)=>{const r=i(98);t.exports={Interaction:r}},(t,e,i)=>{"use strict";const{CHANGING:r,SELECT:n,HOVER:s}=i(6),o=i(3);class a extends o{static plugins={base:a};constructor(t){super(),this.opts=t||{},this.name=this.opts.name}bind(t){this.bindEvents(t,!0),this.bindNodeEvent(t,!0)}unbind(t){this.bindEvents(t,!1),this.bindNodeEvent(t,!1)}events(){return{hover:["mouseover","mouseout"],start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","mouseupoutside","touchend","touchendoutside"]}}eventCallbacks(t){return{hover:this.onHover(t),start:this.onStart(t),move:this.onMove(t),end:this.onEnd(t)}}nodeEvents(t){return{[r]:this.onNodeChange()}}bindEvents(t,e){e&&(this.cbs=this.eventCallbacks(t));for(const[i,r]of Object.entries(this.events())){const n=this.cbs[i];for(const i of r)e?t.display.on(i,n):t.display.off(i,n)}e||(this.cbs=null)}bindNodeEvent(t,e){e&&(this.nodeCbs=this.nodeEvents(t));for(const[i,r]of Object.entries(this.nodeCbs))e?t.on(i,r):t.off(i,r)}onNodeChange(){return function(t){this.renderApp?.render&&this.renderApp.render()}}onStart(t){return function(e){e.stopPropagation(),this.start=Date.now(),this.moved=!1,this.data=e.data,this.data&&this.parent&&(this.lastPosition=this.data.getLocalPosition(this.parent),t.emit(n,{event:e,action:"start"}))}}onEnd(t){return function(t){this.start&&(t.stopPropagation(),this.data=null,this.lastPosition=null,this.start=!1)}}onMove(t){return function(t){if(!this.start||!this.data||!this.lastPosition)return;const e=this.data.getLocalPosition(this.parent),i=e.x-this.lastPosition.x,r=e.y-this.lastPosition.y;this.lastPosition=e,this.delta={x:i,y:r},0==i&&0==r||(this.moved=!0)}}onHover(t){return function(e){t.emit(s,{action:e.type,event:e,source:"canvas"})}}static registerPlugin(t){a.plugins[a.actionName(t)]=t}static actionName(t){return"string"==typeof t?t:t.name}static actionInstance(t){return t instanceof a?t:new(a.plugins[a.actionName(t)])}static bindActions(t,e=null){if(t.display&&"trans"!==t.type){e=e||Object.keys(a.plugins),t.display.interactive=!0,t.renderApp=t.creator().app,t.interactions=t.interactions||{},t.interactions.base||e.unshift("base");for(const i of e){const e=a.actionName(i);if(t.interactions[e])continue;if(!a.plugins[e])throw Error(`invalid action: ${e}`);const r=a.actionInstance(i);r.bind(t),t.interactions[e]=r}}}static unbindActions(t,e=null){if(t.display&&"trans"!==t.type){t.interactions=t.interactions||{},e=e||Object.keys(a.plugins);for(const i of e){const e=a.actionName(i);t.interactions[e]&&(t.interactions[e].unbind(t),delete t.interactions[e])}0===Object.keys(t.interactions).length&&(t.display.interactive=!1,t.renderApp=null,t.interactions=null)}}}t.exports=a},(t,e,i)=>{"use strict";const r=i(100),n=i(101),s=i(113),o=i(125),a=i(114),h=i(130),l=(i(10),i(133)),{SELECT:d,OP_ADD:c,OP_DELETE:u,OP_MOVE:p,OP_SPLIT:f,OP_END:m,TYPE_SPINE:g,TYPE_PLACEHOLDER:v,CHANGING:y,OP_CHANGE:x,MAX:E}=i(6),b=i(1),{sum:w,round:C,log10:_}=i(8),{ucfirst:T}=i(9),{secToHms:M}=i(80),O=i(2),k=[1,2,3,5,10,30,60];class L extends r{static type="board";constructor(t,e,i){super(i),this.dirtyRuler=!0,this.root=t,this.boardEvents={},"time"===t.conf.cropMode&&(t.cropMode=t.conf.cropMode),this.container=e,this.init(),this.bindBoardEvents(!0)}get cropMode(){return"time"===this.editor.opts?.cropMode||"time"===this.root.cropMode}bindBoardEvents(t){const e=this.editor.playerWrapper;Object.values(this.boardEvents).length||(this.boardEvents.timeupdate=t=>{if(e.playing){const i=t.currentTime/1e3-this.root.absStartTime;this.view.hideCursor("cursor"),this.view.showCursor("mark",i),this.markTime=i,this.editor.opts.followTimeMark&&this.view.scrollToCursor("mark"),"creator"!==this.root.type&&i>this.duration&&e.pause(),this.pauseAfterCropEnd&&i>this.cropNode.cropEnd&&(e.pause(),this.pausedByEnd=!0,e.currentTime=this.cropNode.cropEnd)}},this.boardEvents.playing=t=>{this.pausedByEnd=!1;const e=t.currentTime/1e3;this.cropMode&&this.cropNode&&(this.pauseAfterCropEnd=e<this.cropNode.cropEnd)},this.boardEvents.menu=t=>{if(t.preventDefault(),this.cropMode)return void this.lock(100,(()=>this.showCropMenu(t)),"contextmenu");let e=t.target;for(;e.parentNode;){if(e.node?.id&&this.clips[e.node?.id]){this.selected?.nodes&&this.selected.contains(e.node)||e.node.emit(d,{action:"track",event});break}e=e.parentNode}this.lock(100,(()=>this.showMenu(t)),"contextmenu")},this.boardEvents.mousemove=t=>{this.view.cursor.cursor&&!t.path.includes(this.view)&&(this.view.hideCursor("cursor"),void 0!==this.markTime&&this.editor.enabled&&this.seek(this.markTime,200)),Array.isArray(this.editor.dragNodes)&&this.editor.dragNodes.length&&this.dragNodes(this.editor.dragNodes,t)}),t?(e.on("timeupdate",this.boardEvents.timeupdate),e.on("playing",this.boardEvents.playing),this.editor.on("mousemove",this.boardEvents.mousemove),this.container.addEventListener("contextmenu",this.boardEvents.menu)):(e.off("timeupdate",this.boardEvents.timeupdate),e.off("playing",this.boardEvents.playing),this.editor.off("mousemove",this.boardEvents.mousemove),this.container.removeEventListener("contextmenu",this.boardEvents.menu))}get duration(){return this.root.duration||60}init(){this.view=o.create(this.container).addMoveListener(this).setHead(!this.cropMode),this.view.root=this.root,this.container.style.position="relative",this.container.style.padding="0",this.view.setStyleVars(this.editor.colors),this.fps=this.view.fps=this.root.rootConf("fps");const t=[];this.getAllNodes(this.root,t),this.nodes=t;let e=this.duration,i=1.6;this.cropMode&&(t.map((t=>{t.cropMode="time",t.cropStart=Number(t.conf.cropStart||0),t.cropEnd=Number(t.conf.cropEnd||t.endTime),e=t.cropEnd-t.cropStart,this.cropNode=t})),i=3),this.scale=this.container.offsetWidth/(e*i),this.view.setScale(this.scale),this.setScaleRange(),this.ruler=a.create(this.view).addClass("ruler").addMoveListener(this),this.renderRuler(),this.clips={};for(const e of t)this.createClip(e);if(this.tracks=[],this.parseTrack(),!this.cropMode){this.view.addEndCover(),this.bottomTrack=new s("bottom",this.editor),this.topTrack=new s("top",this.editor);const t=this.tracks.findIndex((t=>t.type===g));t<0?(this.tracks.push(this.topTrack),this.tracks.push(new s({type:g},this.editor)),this.tracks.push(this.bottomTrack)):(this.tracks.push(this.bottomTrack),this.tracks.splice(t,0,this.topTrack))}for(const t of this.tracks)this.view.append(t.view);this.renderTrack(),this.view.setDuration(this.duration),this.cropMode&&setTimeout((()=>{this.cropNode&&(this.clips[this.cropNode.id].view.scrollToVisible({center:!0,smooth:!1}),this.mark(this.cropNode.cropStart))}),100)}createClip(t){const e=new n(t,this.root,this.editor);if(e.view.setScale(this.scale),e.on("movestart",(t=>this.onClipMoveStart(e,t))),e.on("moveend",(t=>this.onClipMoveEnd(e,t))),e.on("move",(t=>this.onClipMove(e,t))),e.on("resize",(t=>this.onClipResize(e,t))),e.on("dblclick",(t=>this.onClipDblClick(e,t))),e.on("timemark",(t=>{this.mark(t.time),this.pausedByEnd&&this.editor.playerWrapper.play()})),this.clips[t.id]=e,t.clip=e,!t.trackId&&this.tracks)if(t.parent?.type===g){const e=this.tracks.find((t=>t.type===g));t.trackId=e?e.id:null}else"audio"===t.type&&t.parent===this.root&&(t.trackId=this.bottomTrack.id);if(e.view.addClass("auto-hover",500),t.type!==v){const t=Object.values(this.clips).find((t=>t.node.type===v));if(t){const e=t.node;t.destroy(),e.remove().destroy(),delete this.clips[e.id]}}return e}autoScale(t){t=t||1.6,this.setScale(this.container.offsetWidth/(this.duration*t),!1),this.setScaleRange()}trackInfo(t=!0){return this.tracks.filter((e=>!t||!e.canRemove())).map(((t,e)=>{const i=this.view.relativeRect(t.view);return{track:t,i:e,y:[i.top,i.bottom]}})).sort(((t,e)=>t.y[0]-e.y[0]))}escape(){this.splitMode=!1,this.view.toggleClass("split-mode",this.splitMode)}enableMulti(t){super.enableMulti(t),Object.values(this.clips).map((t=>{t.view.update()}))}get splitMode(){return this._splitMode}set splitMode(t){this._splitMode=t,this.editor.emit("splitModeChanged",{value:this.splitMode})}onKey(t,e){const i=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;if(e.mctrlKey&&"a"===t)this.selectAll(this.markTrack);else if(e.mctrlKey&&"x"===t&&"board"===this.editor.responder&&this.selected)this.cut(this.selected);else if("v"===t&&"board"===this.editor.responder&&this.selected&&!i)"keyup"!==e.type||this.locked("paste")||this.toggleEnable(this.selected);else if(["i","o"].includes(t)&&this.cropMode&&this.cropNode)"keyup"===e.type&&this.crop(t);else if(!["a","b","s"].includes(t)||this.cropMode||i)if(["b","k"].includes(t)&&!this.cropMode&&e.mctrlKey&&"board"===this.editor.responder){const e=this.currentMarkTime();if(!e)return;let i=[];"b"===t&&this.selected?this.selected.nodes?i=Object.values(this.selected.nodes):i.push(this.selected):"k"===t&&(i=this.nodes),i=i.filter((t=>e>t.absStartTime&&e<t.absEndTime)),i.length>0?(this.view.flashCursor("mark","split"),(async()=>{for(const t of i)await this.editor.split(t,e,!1);i[0].emit(y,{action:m})})()):this.view.flashCursor("mark","error")}else{if("keydown"!==e.type||!["arrowleft","arrowright"].includes(t))return;{const e=this.markTime||this.cursorTime;if("board"!==this.editor.responder||isNaN(e))return;const i="arrowleft"===t?-Math.floor(100/this.fps)/100:Math.ceil(100/this.fps)/100;this.mark(e+i)}}else this.editor.playerWrapper.playing&&this.editor.playerWrapper.pause(),this.splitMode="s"===t?"keydown"===e.type:"b"===t,this.view.toggleClass("split-mode",this.splitMode);e?.preventDefault&&e.preventDefault()}changeEvents(){return{history:["undo","redo"],starts:[],ends:[m],[u]:u,[c]:c,[p]:p,[f]:f}}copy(){super.copy(),this.addClassToNode(this.editor.copyNode,"copy")}cut(t){this.editor.copyNode=null,this.editor.cutNode=t,this.addClassToNode(t,"cut")}dragEnd(){Array.isArray(this.dragClips)&&this.dragClips.map((t=>t.destroy())),this.dragClips=null,this.view.removeClass("dragAdd")}dragNodes(t,e){const{scrollLeft:i,scrollTop:r}=this.view,s=this.view.eventPoint(e).rebase([i,r]),{offsetWidth:o,offsetHeight:a}=this.view.parentElement;if(!(5<s.y&&s.y<a-5&&5<s.x&&s.x<o-5))return void(this.dragClips&&(this.dragEnd(),this.editor.emit("dragNodeOut")));let h=!1;if(!this.dragClips){h=!0,this.dragClips=[];for(const e of t){const t=new n(e,this.root,this.editor);e.parent.type===g?this.tracks.find((t=>t.type===g)).append(t):this.bottomTrack.append(t),t.view.setScale(this.scale).addClass("hover").set("data-vtitle",e.conf.userfile?.name||"").set("vtype","trans"===e.type?"trans":t.track.typeOf(e)),t.oriRect=this.view.relativeRect(t.view),this.dragClips.push(t)}this.view.addClass("dragAdd"),this.editor.emit("dragNodeIn")}const l=this.view.eventPoint(e);let d=Math.max(0,this.view.pointerTime(l)),c=0;for(const t of this.dragClips){if(!t.node)return;t.node.conf.start=t.shadowTrack?.type==g?void 0:d,t.view.setStyle({left:`${l.x-this.view.trackHeadWidth+c}px`,top:l.y-t.oriRect.top-.5*t.oriRect.height+"px"}),d=t.node.absEndTime,c+=t.oriRect.width,t.initProxyState(),t.moveDelta({x:0,y:0})}t.every((t=>"audio"===t.type))?h&&this.dragClips[0].shadowView.scrollToVisible(!0):(this.locked("auto-scroll")||(this.view.scrollToVisible(e),this.lock(50,(()=>this.renderTrack()),"auto-scroll")),this.onClipsChange(this.dragClips)),this.relatedMove(!0),this.constraint(this.dragClips,{type:"move",event:e})}addClassToNode(t,e,i=300){t&&(t.nodes&&t.mapClip?t.mapClip((t=>t.view.addClass(e,i))):this.clips[t.id]&&this.clips[t.id].view.addClass(e,i))}async paste(t,e={}){if(this.lock(500,null,"paste"),!e.time&&this.markTime&&(e.time=this.currentMarkTime()),!e.track&&this.markTrack&&(e.track=this.markTrack),t||this.editor.copyNode)return await super.paste(t||this.editor.copyNode,e);if(this.editor.cutNode&&e.time&&e.track&&e.track.type!==g){let t=[];if(this.editor.cutNode instanceof l?t=this.editor.cutNode.clips():this.clips[this.editor.cutNode.id]&&t.push(this.clips[this.editor.cutNode.id]),!t.length)return;t.sort(((t,e)=>t.absStartTime-e.absStartTime));const i=t[0].absStartTime,r=this.root.creator(),s=t.map((t=>e.time+(t.node.absStartTime-i)));t.map(((t,i)=>{const o={start:s[i],parent:r};n.apply(t.node,{to:o},p),t.shadowTrack=e.track,this.addToTrack(t)})),t.map((t=>t.moveEnd())),this.editor.cutNode=null}}setClipShow(t){let e=this.clips[t.target.id];if(e){const i=!this.visible(t.target);e.show(!i),i&&(e.track.remove(e),delete this.clips[t.target.id])}}updatezIndex(){this.root.maxzIndex=0;for(const t of this.trackInfo().reverse())t.track.clips.map((t=>{this.root.maxzIndex++,t.node.conf.zIndex=t.node.zIndex=this.root.maxzIndex}))}reload(){this.lock(50,(()=>{const t=this.duration;this.updatezIndex();const e=this.root.creator();e.annotate(),e.jumpTo(e.currentTime),Object.values(this.clips).map((t=>{t.view.update(),t.track.accept(t)||this.addToTrack(t)})),this.hideEmptyTracks(),this.view.setDuration(this.duration),this.renderTrack(),this.duration>1&&Math.abs(this.duration-t)/t>.5&&setTimeout((()=>{this.duration<this.cursorTime&&(this.cursorTime=.001),this.autoScale()}),300)}),"reload")}addClip(t,e=[]){let i=this.clips[t.id];return i||(i=this.createClip(t)),t.trackId&&i.track?.id!=t.trackId&&(i.shadowTrack=this.tracks.find((e=>e.id===t.trackId))),this.addToTrack(i,[],e),i}onOpsChange(t){const e=[];if(this.getAllNodes(this.root,e),this.nodes=e,e.includes(t.target)){const e=Array.isArray(t.relativeNodes)?t.relativeNodes:[],i=this.addClip(t.target,e);["undo","redo"].includes(t.action)&&!i.view.visible&&this.lock(100,(()=>{i.view.scrollToVisible()}),"scrollToVisible")}else this.setClipShow(t);return this.reload()}onChanging(){const t=super.onChanging();return e=>{if([c,u,f,x,m].includes(e.action)){if(this.onOpsChange(e),[c,u,x].includes(e.action))return this.record=null;e.action===m&&this.view.hideConstraint()}if(this.cropMode&&e.action===p){let t=null;void 0!==e.delta.to.cropStart&&void 0!==e.delta.to.cropEnd?t=.5*(e.delta.to.cropStart+e.delta.to.cropEnd):void 0!==e.delta.to.cropStart?t=e.delta.to.cropStart:void 0!==e.delta.to.cropEnd&&(t=e.delta.to.cropEnd),t&&(this.cursorTime=this.view.showCursor("cursor",t),this.seek(this.cursorTime,50))}t(e)}}onHistoryChange(t){this.onOpsChange(t)}onScroll(t){this.dirtyRuler=!0,this.hideMenu()}onScale(t){if(!this.root.duration)return;const e=Math.pow(Math.E,Math.log(this.scaleRange[0])+t*(Math.log(this.scaleRange[1])-Math.log(this.scaleRange[0])));this.setScale(e)}get relativeScale(){return(Math.log(this.scale)-Math.log(this.scaleRange[0]))/(Math.log(this.scaleRange[1])-Math.log(this.scaleRange[0]))}emitScaleChange(){this.relativeScale<0||this.editor.emit("boardscale",{scale:this.scale,range:this.scaleRange,relative:this.relativeScale})}setScaleRange(t=!0){const e=[this.container.offsetWidth/(this.duration*(this.cropMode?1.1:10)),750];this.scaleRange=[Math.min(...e),Math.max(...e)],t&&this.emitScaleChange()}setScale(t,e=!0){t=Math.min(this.scaleRange[1],Math.max(this.scaleRange[0],t));let i=this.cursorPreview?this.cursorTime:this.markTime;i||(i=(this.container.offsetWidth/2+this.view.scrollLeft)/this.scale);const r=i*this.scale-this.view.scrollLeft;this.scale=t,this.view.scrollLeft=i*this.scale-r,this.view.setScale(t),this.dirtyRuler=!0,this.renderTrack(),Object.values(this.clips).map((e=>e.view.setScale(t))),e&&this.emitScaleChange()}renderTrack(){const t=Object.values(this.clips).map((t=>t.absEndTime*this.scale));t.push(this.container.offsetWidth),this.cropMode?t.push(this.duration*this.scale+80):t.push(1.6*this.duration*this.scale);const e={width:`${Math.max.apply(null,t)}px`};this.ruler.setStyle(e);for(const t of this.tracks)t.view.setStyle(e);this.trackInfo(),this.view.setWidth(e.width),this.view.setHeight(this.container.offsetHeight-8)}renderRuler(){if(!this.container)return;const t=2*this.container.offsetWidth;if(this.rulerView||(this.rulerView=document.createElement("canvas"),this.rulerView.setAttribute("width",t),this.rulerView.setAttribute("height",32),this.rulerView.classList.add("ruler-canvas"),this.container.append(this.rulerView)),window.requestAnimationFrame((()=>{this.renderRuler()})),!this.dirtyRuler)return;this.dirtyRuler=!1,this.rulerView.setAttribute("width",t);const e=this.rulerView.getContext("2d");e.clearRect(0,0,t,32),e.fillStyle="#CCC",e.font="25px helvetica";const i=this.calcBlock(this.scale),r=i*this.scale,n=1===i&&this.scale>300?this.fps:10,s=this.view.trackHeadWidth-this.view.scrollLeft,o=Math.max(0,Math.floor(-s/r)),a=r/n;let h=o*i;for(let t=s+o*r;t<this.container.offsetWidth;t+=r){const r=2*t;e.fillRect(r,0,2,30),e.fillText(M(h),r+10,30),h+=i;for(let t=0;t<n;t++)e.fillRect(r+1+t*a*2,0,1,8)}}calcBlock(t){const e=150/t;let i=216e3;for(let t=0;t<3;t++){const r=Math.pow(60,t);if(e<60*r){const t=e/r;for(const e of k)if(i=e*r,t<e)break;break}}return i}visible(t){return!(["creator","spine","track","speech"].includes(t.type)||!t.parent||t===this.root)}getAllNodes(t,e){"filter"===t.type||t.conf.asMask||(this.visible(t)&&e.push(t),t!==this.root&&"scene"===t.type||t.children.map((t=>this.getAllNodes(t,e))),t.type!==g||t.children.length||this.root.duration||(this.spinePlaceholder||(this.spinePlaceholder=new O({type:v}),this.spinePlaceholder.duration=this.duration,this.spinePlaceholder.parent=t),e.push(this.spinePlaceholder)))}parseTrack(){const t=Object.values(this.clips);t.sort(((t,e)=>t.node.zIndex-e.node.zIndex));for(const e of t){let t=this.dropToTrack(e);t||(t=new s(e.node,this.editor),this.tracks.unshift(t)),t.append(e)}}dropToTrack(t,e=!0){if(t.node.parent.type===g)return this.tracks.find((t=>t.type===g));const i=this.trackInfo();let r,n=i.findIndex((e=>e.track.overlap(t)));n<0?n=i.length-1:n-=1;for(let s=n;s>=0;s--)if(i[s]&&i[s].track.accept(t,e)){r=i[s].track;break}return r}onHover(t){if(!t)return super.onHover();t.target===this.view&&(this.editor.responder="mouseover"===t.event.type?"board":"select"),"mouseout"===t.event.type&&t.target===this.ruler&&(this.view.hideCursor("cursor"),void 0!==this.markTime&&this.editor.enabled&&this.seek(this.markTime,200))}onMove(t){this.cropMode||t.target===this.view&&this.selectionStart&&t.moved&&(t.event?.mctrlKey||this.hasUnselectAll||(this.editor.emit(d,{action:"multi"}),this.hasUnselectAll=!0),this.view.selection(this.selectionStart,t.event))}onMoveStart(t){this.selectionStart=t.target===this.view?t.event:null,this.hasUnselectAll=!1}onMoveEnd(t){!t.moved||t.target.classList.contains("ruler")?(this.mark(t.event),t.target===this.view&&this.editor.emit(d)):t.target===this.view&&this.selectionStart&&this.view.selection(null)}mark(t){const e=isNaN(t)?this.pointerTime(t):t;this.markTime=this.view.showCursor("mark",e),this.seek(this.markTime)}seek(t,e){const i=()=>{this.editor.player.seek(t+this.root.absStartTime)};e?this.lock(e,i,"seek"):i()}get cursorPreview(){return this.editor.opts.enableCursorPreview||this.cropMode||this.splitMode}onCursor(t,e=!1){if(this.mouseEvent=t,this.markTrack=this.pointerTrack(t.event),!this.cursorPreview&&t.target!==this.ruler&&!e)return this.cursorTime=this.view.showCursor("pointer",this.pointerTime(t.event)),this.view.hideCursor("cursor"),void(!this.editor.playing&&this.markTime&&this.currentMarkTime()!==this.editor.currentTime&&this.seek(this.markTime));this.editor.playing||(this.view.hideCursor("pointer"),this.cursorTime=this.view.showCursor("cursor",this.pointerTime(t.event)),this.seek(this.cursorTime,50))}onResize(){return t=>{this.dirtyRuler=!0,this.renderTrack(),this.lock(300,(()=>{Object.values(this.clips).map((t=>t.view.refresh()))}),"resize-clip")}}multiSelect(t,e){if(e=e||this.selected,t?.type&&"creator"!==t.type)return e instanceof l?(e.toggleNode(t),0===Object.values(e.nodes).length?(e.destroy(),this.editor.emit(d),null):e):t.groupId&&"NULL"!==t.groupId?new l(this,t):e&&e.id!==t.id?new l(this,[e,t]):t}showSelect(t,e){if(this.hideMenu(),this.cropMode)return Object.values(this.clips).map((t=>t.view.clear())),void("track"===e?.action&&"mouseup"===e?.event?.type&&this.mark(e.event));"multi"!==e.action&&(this.view.selection(null),this.selectionStart=null),t&&this.selected instanceof l&&this.selected.contains(t)||t instanceof b||(super.showSelect(t,e),"track"===e?.action&&"mouseup"===e?.event?.type&&this.editor.opts.enableClipMark&&this.mark(e.event))}createBox(t,e=!1,i){if(this.cropMode)return;if(t instanceof l)return t.virtualBox(e);let r=this.clips[t.id];if("auto-hover"!==e&&!r)for(;!r&&t.parent;)t=t.parent,r=this.clips[t.id];if(!r)return;let n=[];return(e||"clip"===i?.source)&&"scene"!==t.type&&t.children.length>0&&(n=t.allNodes.map((t=>this.createBox(t,"auto-hover")))),r.virtualBox(e,n)}pointerTime(t){return this.view.pointerTime(t)}pointerTrack(t){const e=this.view.eventPoint(t),i=this.trackInfo().filter((t=>t.y[0]<=e.y&&t.y[1]>e.y))[0];return i?i.track:null}pointerClip(t){const{y:e}=this.view.eventPoint(t),i=this.pointerTime(t);return Object.values(this.clips).filter((t=>t.node.absStartTime<i&&i<t.node.absEndTime&&t.track.view.offsetTop<e&&e<t.track.view.offsetTop+t.view.offsetHeight))[0]}addToTrack(t,e=[],i=[],r=!0){e.includes(t)||e.push(t);let n=t.shadowTrack||t.track;const o=this.trackInfo(!1);if(n||(n=o[0].track),!n.accept(e,!1,i)&&!n.id.startsWith("ph-")){let t=o.findIndex((t=>t.track===n)),s=0;for(t-=1;t>=0;t--){const a=o[t]?.track;if(a.type!==v&&s++,s>1&&!r)break;if(a&&a.type!==g&&a.accept(e,!1,i)){n=a;break}}}if(!n.accept(e,!1,i)){let e=n;e.type===g&&(e=this.topTrack),n=new s(t.node,this.editor),this.tracks.unshift(n),this.view.insertBefore(n.view,e.view)}n.append(t)}hideEmptyTracks(){this.tracks.map((t=>{t.canRemove()&&t.hide()}))}select(t,e){t.emit(d,{action:"track",event:e})}onClipMoveEnd(t,e){if(!e.moved){if(this.editor.playerWrapper.playing&&this.editor.playerWrapper.pause(),this.splitMode){const e=this.cursorTime+this.root.absStartTime;t.node&&e&&this.editor.split(t.node,e)}else this.lock(50,(()=>this.select(t.node,e.event)),"select");return}const i={};if(this.selected instanceof l){const t=[];this.selected.mapClip((e=>{const r=[];this.selected.mapClip((t=>{t!==e&&t.track===e.track&&r.push(t)})),t.push({clip:e,alliance:r});for(const t of e.node.allNodes)!this.selected.contains(t)&&this.clips[t.id]&&(i[t.id]=this.clips[t.id])})),t.map((({clip:t,alliance:e})=>{this.addToTrack(t,e,[],!1),t.moveEnd(this.moveParentClip)}))}else{this.addToTrack(t,[],[],!1),t.moveEnd(this.moveParentClip);for(const e of t.node.allNodes)this.clips[e.id]&&(i[e.id]=this.clips[e.id])}Object.values(i).map((t=>{t.track.accept(t)||this.addToTrack(t)})),this.hideEmptyTracks(),this.hideParentClip()}onClipMoveStart(t,e){this.selected instanceof l?this.selected.mapClip((t=>t.moveStart())):t.moveStart()}onClipMove(t,e){if(this.hasSelected(t.node)||(this.select(t.node,e.event),this.onClipMoveStart(t,e)),!e.moved)return;const i=t;let r=[];if(this.selected instanceof l)t=this.selected,r=this.selected.clips();else{if(this.selected?.id!==t.node.id)return;r.push(t)}if(!this.locked("auto-scroll")){const t=this.view.scrollToVisible(e.event);e.delta.x+=t.x,e.delta.y+=t.y,this.lock(50,(()=>this.renderTrack()),"auto-scroll")}t.moveDelta(e.delta),this.onClipsChange(r),this.relatedMove(),this.constraint(t,e),this.editor.opts.enableDragChangeParent&&e.event.mctrlKey&&this.changeParent(i,r)}changeParent(t,e){if(!e.length||e.filter((t=>t.shadowTrack?.type===g)).length)return this.hideParentClip();const i=t.centerTime,r=t.shadowTrack,n=t.track.view.offsetTop+t.view.offsetTop+.5*t.view.offsetHeight;let s=null;for(const t of Object.values(this.clips)){if(e.includes(t)||t.track!==r||!t.node.active||i<=t.node.absStartTime||i>=t.node.absEndTime)continue;const o=t.track.view.offsetTop+.5*t.view.offsetHeight;if(Math.abs(n-o)<10){s=t;break}}return s?e.filter((t=>t===s||t.node.parent===s.node||s.node.parents.includes(t.node))).length>0?this.hideParentClip():void(this.moveParentClip!=s&&(this.hideParentClip(),this.moveParentClip=s,s.view.addClass("move-parent"))):this.hideParentClip()}hideParentClip(){this.moveParentClip&&this.moveParentClip.view.removeClass("move-parent"),this.moveParentClip=null}onClipsChange(t){const e="onClipsChange";if(this.locked(e))return;this.lock(100,null,e);const i={},r=t.map((t=>(i[t.track.id]=t.track.id,{clip:t,y:this.view.relativeRect(t.view).center.y})));let s=this.trackInfo();Object.keys(i).length>1&&(s=s.filter((t=>t.track.type!==g))),s[0].y[0]=-E,s[s.length-1].y[1]=E;for(const t of r)for(const e of s)t.y>=e.y[0]&&t.y<e.y[1]&&t.clip.shadowTo(e.track);const o=t.filter((t=>t.node.parent?.type===g));if(o.length>0){o.sort(((t,e)=>t.absStartTime-e.absStartTime));let t=0,e=0;for(const i of o)t+=i.centerTime,e+=i.duration;t/=o.length;const i=1===o.length&&"trans"===o[0].node.type?t+.5*e:t-.5*e,r=o[0].node.parent;let s=null,a=0;for(const t of r.children){const e=this.clips[t.id];if(e&&!o.includes(e)&&(a+="trans"===t.type?0:t.duration,!(a<i||"trans"===t.type))){s=e;break}}if("trans"===s?.node.prevSibling?.type)return;o.push(s);for(let t=o.length-2;t>=0;t--){const e=o[t+1]?.node;o[t].node.nextSibling!=e&&n.apply(o[t].node,{to:{parent:r,nextSibling:e}},p)}o.map((t=>t?.shadowView&&t.shadowView.update()))}}onClipDblClick(t,e){"scene"===t.node.type&&this.showSceneBoard(t),this.editor.emit("dblclick",{target:t.node,event:e.event})}onClipResize(t,e){this.relatedMove(!0),this.constraint(t,e)}relatedMove(t=!1){this.root.creator().annotate(),Object.values(this.clips).map((e=>{!t&&this.hasSelected(e.node)||e.view.update()}))}hasSelected(t){return this.selected instanceof l?this.selected.contains(t):this.selected?.id===t.id}constraint(t,e){if(e.event?.shiftKey||!this.editor.opts.enableTrackConstraint)return;let i=t instanceof l?t.clips():Array.isArray(t)?t:[t];if("move"===e.type&&(i=i.filter((t=>t.node.parent?.type!==g))),0===i.length)return this.view.hideConstraint();const r=this.root.creator().duration,s=[];this.markTime&&s.push({cursor:this.view.cursor.mark,time:this.currentMarkTime()});for(const t of Object.values(this.clips))i.includes(t)||(s.push({clip:t,time:t.node.absStartTime}),C(t.node.absEndTime,3)<r&&s.push({clip:t,time:t.node.absEndTime}));if(s.length<=0)return;let o=[];const a="resize"===e.type?[e.target]:["start","end"];for(const t of i){const e=t.node.allNodes;for(const i of s)if(!(t.node.parent?.type===g&&i.clip?.node?.parent?.type===g||e.includes(i.clip?.node)))for(const e of a){const r=`proxy${T(e)}Time`;if(!t||!t[r])continue;const n=i.time-t[r],s=i.cursor?0:Math.abs(this.view.relativeRect(t.view).top-this.view.relativeRect(i.clip.view).top);o.push({at:Math.abs(n),dt:n,type:e,dy:s,cp:t,related:i})}}if(o=o.filter((t=>t.at>.001)),0===o.length)return;o.sort(((t,e)=>t.at.toFixed(3)!==e.at.toFixed(3)?t.at-e.at:t.dy-e.dy));const{at:h,dt:d,type:c,cp:u,related:f}=o[0];if(h*this.scale<this.editor.opts.refLineRange){if("move"===e.type)i.map((t=>{const e=t.proxyStartTime+d-t.node.parent.absStartTime;n.apply(t.node,{to:{start:e}},p),t.shadowView.update(),t.view.setStyle({left:t.shadowView.style.left})})),this.relatedMove();else{if("resize"!==e.type)return;t.applyResize(c,"start"===c?-d:d),this.relatedMove(!0)}this.view.showConstraint(f)}else this.view.hideConstraint()}selectAll(t){t&&(this.editor.emit(d),t.selectAll())}crop(t,e=null){if(!this.cropNode)return;e=e||this.cursorTime;const i={};"i"==t?(i.cropStart=e,this.cropNode.cropEnd<i.cropStart&&(i.cropEnd=this.cropNode.duration)):(i.cropEnd=e,this.cropNode.cropStart>i.cropEnd&&(i.cropStart=0)),n.apply(this.cropNode,{to:i},p),this.cropNode.emit(y,{action:m})}showCropMenu(t){this.hideMenu();const e=this.cursorTime,i=[];i.push({title:"设为选择开始",keys:["I"],click:t=>this.crop("i",e)}),i.push({title:"设为选择结束",keys:["O"],click:t=>this.crop("o",e)}),this.menu=h.create({parent:this.view.parentNode,menu:i,event:t})}showMenu(t){this.hideMenu();const e={time:this.pointerTime(t),track:this.pointerTrack(t)},i=[],r=this.selected,n=e.track?.clips&&e.track?.clips.length>0;if(i.push({title:"全选",enable:n,keys:["⌘","A"],click:t=>this.selectAll(e.track)}),i.push({title:"剪切",enable:!!r,keys:["⌘","X"],click:t=>this.cut(r)}),i.push({title:"复制",enable:!!r,keys:["⌘","C"],click:t=>{this.editor.copyNode=r}}),i.push({title:"粘贴",enable:!!this.editor.copyNode||!!this.editor.cutNode,keys:["⌘","V"],click:t=>this.paste(null,e)}),this.editor.opts.enableGroup&&r instanceof l&&(i.push("-"),i.push({title:"创建组合",enable:r.canLock,click:t=>r.lock()}),i.push({title:"取消组合",enable:r.canUnlock,click:t=>r.unlock()})),r){i.push("-"),i.push({title:"删除",keys:["⌫"],click:t=>this.delete(r)});const t=r.nodes?Object.values(r.nodes).filter((t=>!t.active)).length>0:!r.active;i.push({title:t?"显示片段":"隐藏片段",keys:["V"],click:e=>this.toggleEnable(r,t)}),this.editor.opts.menuItems?.length>0&&(i.push("-"),this.editor.opts.menuItems.map((t=>{let n=!0;const s=this.filterNode(r,t.filter);s.length<=0||(void 0!==t.enable&&(n=this.filterNode(r,t.enable).length>0),i.push({title:t.title,enable:n,click:()=>{this.callOuterOp(t.action,s,e)}}))})))}this.menu=h.create({parent:this.view.parentNode,menu:i,event:t})}hideMenu(){this.menu&&this.menu.remove()}hasMenu(){return this.menu&&this.menu.parentNode}toggleEnable(t,e){void 0===e&&(e=t.nodes?Object.values(t.nodes).filter((t=>!t.active)).length>0:!t.active);let i=!1;t.nodes?Object.values(t.nodes).map((t=>{t.active!==e&&(n.apply(t,{to:{active:e}},p),i=!0)})):t.active!==e&&(n.apply(t,{to:{active:e}},p),i=!0),i&&(this.reload(),t.emit(y,{action:m}))}filterNode(t,e){let i=t;if(t.nodes?i=Object.values(t.nodes):Array.isArray(t)||(i=[t]),"function"!=typeof e){let t=e;return Array.isArray(t)||(t=[t]),i.every((e=>t.includes(e.type)))?i:[]}return e(i)?i:[]}callOuterOp(t,e,i){this.editor.emit(t,{target:e,...i})}showLoading(){this.loadingView&&this.loadingView.parentNode===this.view.parentNode||(this.loadingView&&this.loadingView.remove(),this.loadingView=document.createElement("div"),this.loadingView.classList.add("mirae-loading-bg"),this.loadingView.setAttribute("data-progress",""),this.view.parentNode.append(this.loadingView),this.editor.emit("loading",{state:"start"}))}showProgress(t){const e=Math.round(100*t);this.loadingView&&this.loadingView.parentNode&&e&&(this.loadingView.setAttribute("data-progress",`${e}%`),this.editor.emit("loading",{state:"progress",progress:t}))}hideLoading(){this.loadingView&&this.loadingView.remove(),this.editor.emit("loading",{state:"end"})}scrollToVisible(t,e=!0){this.clips[t.id]&&this.lock(100,(()=>{const i=this.clips[t.id].view;i.scrollToVisible({top:!0,smooth:!0}),e&&i.addClass("hover","number"==typeof e?e:500)}),"scroll")}showSceneBoard(t){this.hide(),this.sceneBoard=new L(t.node,this.container,this.editor),this.editor.board=this.sceneBoard,this.sceneBoard.showBackBtn((()=>{this.sceneBoard.hide(),this.sceneBoard.destroy(),this.sceneBoard=null,this.show(),this.editor.board=this}))}showBackBtn(t){setTimeout((()=>{this.view.ruler.addBackBtn(t)}),100)}show(){this.container.append(this.view),this.container.append(this.rulerView),this.bindEvents(!0),this.bindBoardEvents(!0)}hide(){this.hideMenu(),this.rulerView.remove(),this.view.hide(),this.bindEvents(!1),this.bindBoardEvents(!1)}currentMarkTime(){return this.markTime+this.root.absStartTime}destroy(){this.bindBoardEvents(!1),this.boardEvents=null,this.hideMenu(),this.loadingView&&this.loadingView.remove(),this.rulerView&&this.rulerView.remove(),this.view&&this.view.remove(),Object.values(this.clips).map((t=>t.destroy())),Object.values(this.tracks).map((t=>t.destroy())),this.container=null,this.nodes=null,this.clips=null,this.root=null,this.view=null,this.ruler=null,this.cropNode=null,this.rulerView=null,this.loadingView=null,this.mouseEvent=null,this.bottomTrack=null,this.topTrack=null,this.menu=null,super.destroy()}}t.exports=L},(t,e,i)=>{"use strict";const{CHANGING:r,CHANGED:n,HOVER:s,RESIZE:o,SELECT:a,OP_ADD:h,OP_DELETE:l,OP_END:d,MAX:c}=i(6),{Record:u}=i(32),p=i(11),f=i(31),m=i(1),g=["Meta","Control"];class v extends f{static type="select";constructor(t){super(t),this.hoverId=null,this.hoverBox=null,this.selected=null,this.selectedBox=null}get cropMode(){return"frame"===this.editor.opts?.cropMode||"frame"===this.editor.player?.creator?.conf?.cropMode}events(){return{keydown:this.onKeyDown(),keyup:this.onKeyUp(),enable:this.onEnable(),[n]:this.onChanged(),[r]:this.onChanging(),[o]:this.onResize(),[a]:this.onSelect(),[s]:this.onHover()}}changeEvents(){return{history:["undo","redo"],starts:["movestart","rotatestart","resizestart","cropstart"],ends:["moveend","rotateend","resizeend","cropend",d],move:"move",rotate:"rotate",resize:"resize",crop:"crop","group-rotate":"group-rotate",[l]:l,[h]:h}}hideAll(){this.hideSelect(),this.hideHover()}onChanged(){return t=>{}}onEnable(){return t=>{}}onKey(t,e){}onKeyDown(){return t=>{const e="keyboard";if(g.includes(t.key))return this.enableMulti(!0);const i=`${t.key}`.toLowerCase(),r=this.editor.responder===this.constructor.type;if(this.locked(e))return t.preventDefault();if(t.mctrlKey&&"c"===i&&r)this.copy();else if(t.mctrlKey&&"v"===i&&r)this.paste();else{if("Backspace"!==t.key||!r)return this.onKey(i,t);this.delete(this.selected)}this.lock(100,null,e),t.preventDefault()}}onKeyUp(){return t=>{g.includes(t.key)&&this.enableMulti(!1);const e=`${t.key}`.toLowerCase();this.onKey(e,t)}}enableMulti(t){this.withMulti=t}delete(t,e=!0){if(!t)return;const i=t=>{if(t.children.length>0)if("scene"===t.type){const e={removed:!0,parent:null};t.allNodes.map((t=>{v.apply(t,{to:e},l)}))}else if("text"===t.type&&t.speech){const e={removed:!0,parent:null};t.children.filter((t=>"speech"===t.type)).map((t=>{v.apply(t,{to:e},l)}))}else{const e=["spine","track"].includes(t.parent.type)?t.creator():t.parent;t.children.map((i=>{const r={parent:e};r.start=i.startTime+t.startTime,i.conf.end&&(r.end=i.endTime+t.startTime),v.apply(i,{to:r},l)}))}const e={removed:!0,parent:null};t.prevSibling&&(e.prevSibling=null),t.nextSibling&&(e.nextSibling=null),"trans"!==t.type&&(t.nextSibling||"trans"!==t.prevSibling?.type||i(t.prevSibling),"trans"===t.nextSibling?.type&&i(t.nextSibling)),v.apply(t,{to:e},l)};if(t.nodes){const e=Object.values(t.nodes);e.sort(((t,e)=>t.parents.length-e.parents.length)),e.map((t=>i(t)))}else i(t);e&&t.emit(r,{action:d}),this.hideSelect(),this.editor.hideSelect()}copy(){this.editor.copyNode=this.selected,this.selectedBox?.addClass&&this.selectedBox.addClass("copy",300)}async paste(t,e={}){if(!(t=t||this.editor.copyNode))return;let{emitEnd:i=!0,nodes:n=null,action:s=h,track:o,time:a}=e;n=n||{},i&&this.editor.showLoading();const l=async(t,e,i)=>{const r={emitEnd:!1,nodes:{[i]:e}};await this.paste(new m(t),r)},u=async t=>{const e=await this.editor.cloneNode(t);n[t.id]=e;const i={zIndex:t.zIndex,parent:t.parent,active:!0};n[t.parent.id]&&(i.parent=n[t.parent.id]),t.nextSibling&&(i.nextSibling=t.nextSibling),0===p||n[t.parent.id]||"spine"===t.parent.type||(i.start=Math.max(0,t.startTime+p)),i.trackId=o?o.id:t.trackId,v.apply(e,{to:i},s),"scene"===t.type?await l(t.allNodes,e,t.id):"text"===t.type&&t.speech&&await l(t.speech,e,t.id)};let p=0;if(t.nodes){const e=Object.values(t.nodes);if(e.map((t=>t.trackId)).includes(o?.id)&&(o=null),i&&a){let t=c;e.map((e=>t=Math.min(e.absStartTime,t))),p=a-t}e.sort(((t,e)=>t.parents.length-e.parents.length));for(const t of e)await u(t)}else i&&a&&(p=a-t.absStartTime),await u(t);return i&&(t.emit(r,{action:d}),this.editor.hideLoading()),n}recordTarget(){return this.selected?.nodes?Object.values(this.selected.nodes):this.selected}onHistoryChange(t){}onChanging(){return t=>{if(!t.target)return;const e=this.recordTarget(),i=this.editor.currentTime,r=this.changeEvents();if(r.history.includes(t.action))this.onHistoryChange(t);else if(r.starts.includes(t.action)){if(this.changing=!0,!t.target.cropMode&&this.selectedBox&&this.selectedBox.show(!1),this.selected?.id==t.target.id){const r=t.action.replace("start","");this.record=new u(r,e,{time:i})}}else if(r.ends.includes(t.action))this.changing=!1,this.selectedBox&&this.selected.id==t.target.id&&this.selectedBox.show(!0),this.lock(100,null,"select"),this.record&&this.editor._history&&(this.editor._history.append(this.record),this.record=null);else if(r[t.action]){if(this.hoverId===t.target.id){const e=this.hoverBox[t.action];e&&"function"==typeof e?e.call(this.hoverBox):this.editor.log(`${this.constructor.name}.onChanging of evt.action:`,this.hoverId,t.action)}if(this.record||(this.record=new u(t.action,e,{time:i})),this.record.contains(t.target.id)||t.target.nodes||(this.record.action===t.action?this.record.addTarget(t.target):this.editor.error("target.id not include!",this.record.action,t.action,this.record.targets,t.target.id)),!t.target.nodes){const e={[t.target.id]:t.delta};this.record.merge(e)}}else this.editor.log(`${this.constructor.name} miss evt.action:`,t.action)}}onHover(){return t=>{this.changing||("mouseout"===t.action?this.hideHover():this.showHover(t.target,t))}}reset(){this.hideAll()}onResize(){return t=>{this.container=this.editor.container,this.container&&this.fit()}}fit(t=!1){this.hideHover();const{scale:e}=this.editor;this.selected?.fit&&this.selected.fit(e),this.selectedBox&&(t&&this.selectedBox.addClass("ani",300),this.selectedBox.fit(e))}onSelect(){return t=>{if(this.locked(`select-${t.target?.id||"NULL"}`))return;const e=t.target;if(e||this.reset(),"select"===this.constructor.type&&("trans"===e?.type||!e?.display))return;let i;if(this.withMulti||"multi"===t.action||e&&e.groupId&&"NULL"!=e.groupId)if(Array.isArray(t.nodes)&&t.nodes.length>0)for(const e of t.nodes)i=this.multiSelect(e,i);else i=this.multiSelect(e);else i=e;this.showSelect(i,t)}}multiSelect(t,e){if(e=e||this.selected,t?.type&&"creator"!==t.type)return e instanceof m?e.toggleNode(t):t.groupId&&"NULL"!==t.groupId?new m(t):e&&e.id!==t.id?new m([e,t]):t}toggleSelect(){if(this.selected instanceof m)return this.hideHover();this.toggleSelectedId===this.selected?.id?(this.toggleSelectedId=null,this.hideSelect()):this.selected&&(this.toggleSelectedId=this.selected.id,this.hideHover())}hideSelect(){if("frame"===this.selected?.cropMode){if("select"!==this.constructor.type||this.cropMode)return;this.selected.cropMode=!1}this.selectedBox&&this.selectedBox.remove(),this.selected instanceof m&&(this.selected.addEventsTo(this.editor,!1),this.selected.nodes||this.selected.destroy()),this.selectedBox=null,this.selected=null,this.toggleSelectedId=null}showSelect(t,e){if(this.cropMode){if(!t)return;t.cropMode="frame"}if(this.hideSelect(),t?.type&&"creator"!==t.type)return t&&"select"===this.constructor.type&&t.canvasEditNode&&(t=t.canvasEditNode),this.selected=t,this.selected.addEventsTo&&this.selected.addEventsTo(this.editor,!0),this.selectedBox=this.createBox(t,!0),t instanceof m&&t.appendTo(this.selectedBox),this.selected}hideHover(){this.hoverId=null,this.hoverBox&&(this.hoverBox.remove(),this.hoverBox=null)}showHover(t,e){t?.type&&"creator"!==t.type&&((this.hoverId||this.hoverBox)&&this.hideHover(),this.hoverBox=this.createBox(t,!1,e),this.hoverBox&&(this.hoverId=t.id))}createBox(t,e=!1){if(!this.container||!this.editor)return;const{container:i}=this,{scale:r}=this.editor;return t.visible&&t.getAnchor?p.create({node:t,scale:r,container:i,selected:e}):null}destroy(){super.destroy(),this.hideHover(),this.hideSelect()}}t.exports=v},(t,e,i)=>{"use strict";const{CHANGING:r,HOVER:n,SELECT:s,OP_MOVE:o,OP_END:a,OP_START:h,TYPE_SPINE:l,MAX:d,OP_CHANGE:c,TYPE_PLACEHOLDER:u,OP_CLEAR_CACHE:p}=i(6),f=i(33),m=i(102),{round:g}=i(8),{uuid:v}=i(9),{Record:y}=i(32);class x extends f{constructor(t,e,i){super(i),this.id=`cp-${v().substring(0,3)}`,this.root=e,this.node=t,this.track=null,this.view=m.create({node:t,root:e,moveListener:this}),this.onchange=this.onNodeChange(),t.on(r,this.onchange)}overlap(t){if(!this.node.parent||!t.node.parent||[this.node.type,t.node.type].includes(u))return!1;const e=Math.max(t.node.absStartTime,this.node.absStartTime);return Math.min(t.node.absEndTime,this.node.absEndTime)-e>1/this.node.fps}show(t){t&&this.track?this.view.appendTo(this.track.view):this.view.hide()}onHover(t){this.node.emit(n,{action:t.event.type,event:t.event,source:"clip"})}onTimeResizeStart(t){this.initProxyState()}onTimeResizeEnd(t){this.node.parent.type===l&&(x.apply(this.node,{to:{start:"NULL"}},o),this.view.update())}onTimeResize(t,e){let i=e.x;if(Math.abs(i)<Number.EPSILON)return;"start"===t?(this.proxyState.left+=i,this.proxyState.width-=i,"trans"===this.node.type&&(this.proxyState.width-=i)):"end"===t&&(this.proxyState.width+=i,"trans"===this.node.type&&(this.proxyState.width+=i,this.proxyState.left-=i));let r=this.proxyDuration-this.node.duration;r=this.applyResize(t,r),Math.abs(r)<Number.EPSILON||this.emit("resize",{target:t,dt:r})}applyResize(t,e){const i={};let r=this.node.loop?NaN:this.node.material?.length||NaN;if("text"===this.node.type&&(r=NaN),"start"===t){if(this.node.parent.type!==l){let t=0;for(const e of this.track.clips)e.node.absEndTime>this.node.absStartTime||(t=Math.max(t,e.node.absEndTime));this.node.absStartTime-e<t&&(e=this.node.absStartTime-t)}if(!isNaN(r)){const t=this.node.material.speed,r=this.node.material.getStartOffset()/t,n=Math.max(0,r-e);e=r-n,i.ss=n*t}i.start=this.node.startTime-e}else if("end"===t){if(this.node.parent.type!==l){let t=d;for(const e of this.track.clips)e.node.absStartTime<this.node.absEndTime||(t=Math.min(t,e.node.absStartTime));this.node.absEndTime+e>t&&(e=t-this.node.absEndTime)}if(isNaN(this.node.conf.end)||(i.end="NULL"),!isNaN(r)){const t=this.node.material.speed,n=this.node.material.getEndOffset(!0)/t,s=Math.min(r,n+e);e=s-n,i.to=s*t}}return Math.abs(e)<Number.EPSILON?0:(i.duration=this.node.duration+e,"trans"===this.node.type&&e>0&&(this.node.prevSibling&&.5*i.duration>this.node.prevSibling.duration||this.node.nextSibling&&.5*i.duration>this.node.nextSibling.duration)?0:(!isNaN(r)&&i.duration>r&&(i.duration=Math.min(r,i.duration)),void(i.duration<.2||(x.apply(this.node,{to:i},o),this.view.update()))))}onDblClick(t){this.emit("dblclick",t)}onMove(t){this.emit("move",t)}onMoveStart(t){this.emit("movestart",t)}onMoveEnd(t){this.emit("moveend",t)}onTimeMark(t){this.emit("timemark",t)}initProxyState(){this.proxyState={left:this.view.styleNumber("left"),top:this.view.styleNumber("top"),width:this.view.styleNumber("width")},this.nodeOriParent=this.node.parent}moveStart(){this.shadowTrack=this.track,this.node.emit(r,{action:h}),this.initProxyState()}moveDelta(t){this.proxyState||this.initProxyState(),this.proxyState.left+=t.x,this.proxyState.top+=t.y;let e=this.proxyStartTime-(this.node.parent?.absStartTime||0);if(this.view.moveDelta(t).addClass("moving"),this.shadowTrack||(this.shadowTrack=this.track),this.node.parent?.type!==l&&(x.apply(this.node,{to:{start:e}},o),this.view.updateDuration()),!this.shadowView){const t={node:this.node,root:this.root,shadow:!0};this.shadowView=m.create(t).setScale(this.view.scale).appendTo(this.track.view)}return this.shadowView.update(),this.node.parent?.type!==l&&this.view.setStyle({left:this.shadowView.style.left}),t}moveEnd(t){if(this.view.update(!0).removeClass("moving"),this.shadowView&&(this.shadowView.remove(),this.shadowView=null),this.shadowTrack&&(this.shadowTrack.view.removeClass("top-insert"),this.shadowTrack=null),t){const e=t.node,i={parent:e,start:this.node.absStartTime-e.absStartTime};x.apply(this.node,{to:i},o)}this.nodeOriParent=null,this.node.emit(r,{action:a})}get proxyStartTime(){return this.root.absStartTime+Math.max(this.proxyState.left/this.view.scale,0)}get proxyDuration(){return this.proxyState.width/this.view.scale}get proxyEndTime(){return this.proxyStartTime+this.proxyDuration}get absStartTime(){return this.root.absStartTime+this.view.styleNumber("left")/this.view.scale}get duration(){return this.view.styleNumber("width")/this.view.scale}get absEndTime(){return this.absStartTime+this.duration}get centerTime(){return.5*(this.absStartTime+this.absEndTime)}shadowTo(t){if(!this.shadowView)return;this.shadowView.parentNode!==t.view&&this.shadowView.parentNode.removeClass("top-insert"),this.shadowView.appendTo(t.view).update();const e={};let i=null;if(t.accept(this)?(this.shadowView.removeClass("conflict"),t.view.removeClass("top-insert"),e.trackId=t.id,i=t.type):(this.shadowView.addClass("conflict"),t.view.addClass("top-insert")),this.shadowTrack.type===l&&this.shadowTrack.type!==i)this.nodeOriParent&&this.nodeOriParent?.type!==l?e.parent=this.nodeOriParent:e.parent=this.node.creator(),e.prevSibling=null,e.nextSibling=null,e.start=this.absStartTime;else if(i===l){const i=t.nodeTrack;e.parent=i,e.start="NULL"}x.apply(this.node,{to:e},o),this.shadowTrack=t}virtualBox(t,e){const i="string"==typeof t?t:t?"selected":"hover";return this.view.addClass(i),{remove:()=>{this.view.removeClass(i),e&&e.map((t=>t&&t.remove()))},show:()=>{},[o]:()=>{}}}applyChange(t){x.apply(this.node,t,c),this.editor._history.append(new y(c,this.node,t))}apply(t,e){x.apply(this.node,t,e)}onNodeChange(){return t=>{if(t.action===p&&"scene"===this.node.type)return this.view.clearCache(this.node.id),this.lock(1e3,(()=>this.view.refresh()),"scene_refresh");const e=[t.action,t.sourceAction];(e.includes(c)||this.view.cropMode&&e.includes(o))&&this.view.refresh()}}destroy(){this.view&&this.view.remove(),this.track&&this.track.remove(this),this.shadowView&&this.shadowView.remove(),this.shadowTrack&&this.shadowTrack.view.removeClass("top-insert"),this.node&&(this.node.off(r,this.onchange),this.node.clip=null),this.shadowView=null,this.shadowTrack=null,this.node=null,this.root=null,this.track=null,this.onchange=null,super.destroy()}}t.exports=x},(t,e,i)=>{"use strict";i(103);const r=i(109),{uuid:n,short:s}=i(9),{round:o}=i(8),a=i(79),{OP_START:h,OP_END:l,CHANGING:d,MAX:c,OP_CHANGE:u,OP_MOVE:p,TYPE_SPINE:f}=i(6),{secToHmsf:m,secToHms:g}=i(80),v=i(22),y=i(110),x=i(111),E=i(112),b={},w=120,C=(t,e)=>{if(t.complete)return e(t);t.onload=()=>e(t)};class _ extends v{static TAG="mira-editor-clip";init(){return super.addClass("mirae-clip"),this.videoQueue=new a,this.audioQueue=new a,super.init()}addClass(t,e){return super.addClass(t,e),this.classChanged(),this}removeClass(t){return this.hasClass(t)?(super.removeClass(t),this.classChanged(),this):this}get visible(){const[t,e]=[this.offsetLeft,this.parentNode?.offsetTop],[i,r]=[this.offsetWidth,this.offsetHeight],[n,s,o,a]=this.boardSize;return n>0&&t+i>o&&t<o+n&&e+r>a&&e<a+s}onScroll({x:t,y:e}){const i=this.styleNumber("left"),r=this.styleNumber("width");i-t<0&&i+r-t>76?this.setStyleVars({"--leftOffset":t-i+"px"}):i-t>=0&&this.setStyleVars({"--leftOffset":"0px"}),this.updateView()}setStyle(t){return super.setStyle(t),t.width?this.classChanged():t.left&&this.updateParentLines(),this}setInfo(){if(!this.node||!this.node.parent)return;let t="";this.name&&(t+=`${this.name} `),this.node.groupId&&"NULL"!==this.node.groupId&&(t+="(已组合) "),this.node.rootConf&&(t+=" - 时长: "+g(this.node.duration,1,!0)),t&&this.set("data-info",t)}classChanged(){this.handles||(this.handles={});const t=this.styleNumber("width");this.setInfo(),this.addResizeHandles(t),"text"!==this.node?.type&&this.audioBtn&&(!this.audioBtn.parentNode&&t>=72?this.addAudioBtn():this.audioBtn.parentNode&&t<72&&this.audioBtn.hide()),this.updateParentLines()}updateParentLines(){const t="hover-parent",e=this.node&&this.node.parent&&!this.isShadow&&!["creator","scene","spine","track"].includes(this.node?.parent.type);if(e&&this.parentNode&&(this.pLineView||(this.pLineView=E.create(this)),this.pView=this.node?.parent?.clip?.view,this.pView)){const t=this.parentNode.offsetTop+this.offsetTop,e=this.offsetHeight,i=this.pView.parentNode.offsetTop+this.pView.offsetTop,r=this.pView.offsetHeight;let n=.5*e,s=i>t?t+n-i:t-n-i,o=0;this.node.startTime<=0?(o=Math.floor(this.node.startTime*this.scale)+1,s=t+n-(i+.5*r)):this.node.startTime>=this.node.parent.duration&&(o=Math.ceil((this.node.startTime-this.node.parent.duration)*this.scale)+1,s=t+n-(i+.5*r)),this.pLineView.update(n,o,Math.round(s))}if(!e||!this.pLineView||!this.hasClass(["hover","moving"]))return(()=>{this.pLineView&&this.pLineView.hasClass("show")&&(this.pLineView.removeClass("show"),this.pView&&(this.pView.removeClass(t),this.pView=null),this.unlinkBtn&&setTimeout((()=>{this.hasClass("hover")||this.unlinkBtn.hide()}),10))})();this.unlinkBtn||(this.unlinkBtn=y.create(this).addClass("unlink-btn"),this.unlinkBtn.onClick=t=>{const e=this.node.creator(),i=this.node.absStartTime;this.apply({parent:e,start:i},(()=>{this.unlinkBtn.remove(),this.unlinkBtn=null}))}),!window.event?.mctrlKey||this.hasClass("selected")?this.unlinkBtn.hide():this.unlinkBtn.parentNode||this.unlinkBtn.appendTo(this),this.pView&&(this.pView.addClass(t),this.pLineView.addClass("show"))}addResizeHandles(t){if(this.node&&"scene"!==this.node.type)if(this.classList.contains("selected")&&t>15)for(const t of["start","end"])this.handles[t]?this.handles[t].parentNode||this.append(this.handles[t]):this.handles[t]=this.createHandle(t);else Object.values(this.handles).map((t=>t.hide()))}createHandle(t){return x.create(this).set("data-type",t).addClass(`mirae-clip-handle-${t}`).addMoveListener(this)}clear(){this.cropView&&this.cropView.clear(),this.handles.start&&this.handles.start.clear(),this.handles.end&&this.handles.end.clear(),super.clear()}onTimeResizeStart(t){this.cropMode&&this.initProxyState()}onTimeResizeEnd(t){this.cropMode&&this.node.emit(d,{action:l})}onTimeResize(t,e){if(!this.cropMode)return;const i={},r=e.x/this.scale;"start"===t?(this.proxyState.start+=r,i.cropStart=this.roundCropTime(this.proxyState.start)):"end"===t&&(this.proxyState.end+=r,i.cropEnd=this.roundCropTime(this.proxyState.end)),this.moveListener.apply({to:i},p)}onMove(t){if([this.handles.start,this.handles.end].includes(t.target)&&this.moveListener.onTimeResize){const e=t.target.get("data-type");if(("start"===e&&t.delta.x>0||"end"===e&&t.delta.x<0)&&this.styleNumber("width")<30)return;this.moveListener.onTimeResize(e,t.delta)}else if(t.target===this.cropView&&this.cropMode){this.proxyState||this.initProxyState();const e=this.board;if(e){const i=e.scrollToVisible(t.event);t.delta.x+=i.x}let i=t.delta.x/this.scale;this.proxyState.start+=i,this.proxyState.end+=i;const r={to:{cropStart:this.roundCropTime(this.proxyState.start),cropEnd:this.roundCropTime(this.proxyState.end)}};this.moveListener.apply(r,p)}}onMoveStart(t){this.node.emit&&this.node.emit(d,{action:h}),this.addClass("moving"),[this.handles.start,this.handles.end].includes(t.target)&&this.moveListener.onTimeResizeStart?this.moveListener.onTimeResizeStart(t):this.cropMode&&this.initProxyState()}onMoveEnd(t){this.addClass("hover").removeClass("moving"),[this.handles.start,this.handles.end].includes(t.target)&&this.moveListener.onTimeResizeEnd?this.moveListener.onTimeResizeEnd(t):this.node.cropMode&&!t.moved&&this.moveListener.onTimeMark&&this.moveListener.onTimeMark({time:this.node.cropStart}),this.node.emit&&this.node.emit(d,{action:l})}roundCropTime(t){return t=Math.floor(t*this.fps)/this.fps,Math.max(Math.min(t,this.node.duration),0)}get fps(){return this._fps||(this._fps=this.node.rootConf("fps")),this._fps}initProxyState(){this.proxyState={start:this.node.cropStart,end:this.node.cropEnd}}remove(){Object.values(this.handles).map((t=>t.remove())),this.audioBtn&&this.audioBtn.remove(),this.cropView&&this.cropView.remove(),this.node=null,this.root=null,super.remove()}setOpts(t){const{node:e,root:i}=t;return this.node=e,this.root=i,t.shadow?(this.isShadow=!0,this.addClass("shadow")):(e.id&&this.set("id",`mirae-clip-${e.id}`),this.addClass("node"),this.refresh()),this}setScale(t){if(this.node&&this.root)return this.scale=t,this.startTime=this.node.absStartTime,this.cropView&&(this.cropView.setScale(t),this.refreshCropShadow()),this.updateDuration(!0).setStyle({top:"crop"===this.node.type?"-2px":"2px",left:this.scale*(this.node.absStartTime-this.root.absStartTime)+"px"})}updateDuration(t=!1){if(t||this.duration!=this.node.duration)return this.duration=this.node.duration,this.setStyle({width:this.scale*this.node.duration+"px"}),this.updateView()}update(t=!1){return this.node?((t||this.startTime!=this.node.absStartTime||this.duration!=this.node.duration)&&(this.setScale(this.scale),this.cropMode||this.node?.parent?.type===f||this.addClass("auto-hover",500)),(t||this.active!==this.node.active)&&(this.active=this.node.active,this.toggleClass("disable",!this.active),this.refresh()),this.updateParentLines(),this):this}styleNumber(t){return Number(this.style[t].replace("px",""))}moveDelta(t){return this.setStyle({left:`${this.styleNumber("left")+t.x}px`,top:`${this.styleNumber("top")+t.y}px`}),this.updateParentLines(),this}apply(t,e){this.lock(50,(()=>{this.moveListener.applyChange({to:t}),e&&e()}),"apply")}refresh(){if(!this.node)return;this.name=this.filename();const t=this[this.node.type];return t&&"function"==typeof t&&t.call(this),this.cropMode&&this.addCropView(),this.parentNode?.refresh&&this.parentNode.refresh(),this.updateView()}addCropView(){if(!this.cropView){const t={id:`crop-${this.node.id}`,type:"crop",absStartTime:0,duration:0};this.cropView=_.create({node:t,root:this.root,moveListener:this}),this.addClass("no-info")}this.cropView.parentNode!==this&&this.append(this.cropView),this.cropView.node.absStartTime=this.node.cropStart,this.cropView.node.duration=this.node.cropEnd-this.node.cropStart,this.cropView.update().crop(),this.refreshCropShadow()}refreshCropShadow(){const t=this.scale||1;this.setStyleVars({"--leftShadow":`${Math.ceil(this.node.cropStart*t)+1}px`,"--rightShadow":`${Math.ceil((this.node.duration-this.node.cropEnd)*t+1)}px`})}addAudioBtn(){if(this.cropMode||!this.node||void 0===this.node.audio)return this.audioBtn?.hide();this.audioBtn||(this.audioBtn=y.create(this).addClass("audio-btn"),this.audioBtn.onClick=t=>{this.apply({audio:!this.node.audio})}),this.audioBtn.toggleClass("audio-btn-off",!this.node.audio),this.canvasCtr&&this.canvasCtr.append(this.audioBtn)}filename(){return s(this.node.name,15)||s(this.node.conf.userfile?.name,20,5)||this.node.id}crop(){super.addClass(["crop","selected"]),this.infoLabel||(this.infoLabel=document.createElement("div"),this.infoLabel.classList.add("crop-info-label"),this.append(this.infoLabel)),this.infoLabel.innerText=g(this.node.duration,1)}image(){super.addClass("video")}gif(){super.addClass("video")}video(){super.addClass("video"),this.addAudioBtn()}audio(){super.addClass("audio"),this.addAudioBtn(),this.active=this.node.active&&this.node.audio,this.toggleClass("disable",!this.active)}text(){super.addClass("text"),this.textView||(this.textView=document.createElement("div"),this.textView.classList.add("text-view"),this.append(this.textView));let t=`${this.node.conf.text}`;t=t.trim().replaceAll("\n"," ").replaceAll("\r"," "),this.textView.innerText=t,this.name=s(t,20),this.node.speech?this.updateAudioView():this.preview&&this.preview.remove()}placeholder(){super.addClass("placeholder"),this.innerText="添加素材, 开始您的创作吧~"}scene(){super.addClass("scene"),this.addAudioBtn()}trans(){super.addClass("trans"),this.name="转场效果: "+this.filename()}cover(){}updateView(){return this.isShadow||(["video","image","gif","scene"].includes(this.node.type)?this.updatePreview():["audio","text"].includes(this.node.type)&&this.updateAudioView()),this}async updateAudioView(){const t=this.node.material,e=this.node.buffer;if(!t||!e)return;const i=t.path,{duration:r,data:n}=await this.audioData(i,e);if(!this.visible)return;let s=[{color:"#1abc9c",h:0},{color:"#F8DD0B",h:24},{color:"#EE3333",h:32}];"text"===this.node.type&&(s=[{color:this.node.audio?"#166C96":"#334455",h:0}]);const{left:a,width:h,clipWidth:l}=this.renderPreviewCanvas(40);if(!a&&!h)return;const d=this.node.volume,c=t.speed||1,u=t.getStartOffset(),p=t.getDuration()*c,f=Math.round(n.length*(u/r)),m=Math.round(n.length*((u+p)/r))-f,g=p/c*this.scale,v=Math.max(Math.round(g/m),3),y=Math.ceil(g/v),x=o(m/y,1),E=(t,e)=>t<this.node.fadeIn*this.scale?e*(t/(this.node.fadeIn*this.scale)):l-t<this.node.fadeOut*this.scale?e*((l-t)/(this.node.fadeOut*this.scale)):e,b=o(u/c*this.scale,3),w=b%v,C=this.preview.getContext("2d");let _=0;for(let t=Math.round(a/v)*v;t<a+h&&(!(t>g)||this.node.loop);t+=v){const e=t%g,i=Math.floor((e+b)/v),r=n.slice(Math.round(i*x),Math.round((i+1)*x)),o=E(t,Math.max.apply(null,r)*d),h=40*Math.min(o,.98);for(const e of s)h<e.h||(C.fillStyle=e.color,C.fillRect(t-a-w,40-h,v-1,h-e.h));const l=Math.floor(t/g);l!==_&&(C.fillStyle="#FFF",C.fillRect(t-a-w-1,0,1,40),_=l)}}updatePreview(){if(!this.visible)return;const t=this.renderId=n(),{left:e,width:i}=this.renderPreviewCanvas(60,2);if(!e&&!i)return;let r=Math.max(0,Math.floor(2*e/w-1)),s=r+Math.ceil(2*i/w)+1;const a=this.preview.getContext("2d"),h=this.node.material;let l=1,d=0;if(h){l=h.speed||1;const t=h.getStartOffset()/l*this.scale*2;d=Math.floor(t/w)*w-t}const c=l*w/(2*this.scale);for(let i=r;i<s;i++){let r=d+i*w,n=this.node.absStartTime+(r+60)/(2*this.scale);const s=h?this.node.materialTime(n,!0).time:Math.min(n,this.node.absEndTime-.1);this.renderFrame(o(s,1),c,(i=>{t==this.renderId&&C(i,(()=>{a.drawImage(i,r-2*e,0,w,w)}))}))}}renderPreviewCanvas(t,e=1){this.preview||(this.preview=document.createElement("canvas"),this.preview.classList.add("preview-canvas"),this.canvasCtr=document.createElement("div"),this.canvasCtr.classList.add("canvas-ctr"),this.canvasCtr.append(this.preview),this.append(this.canvasCtr),this.addAudioBtn()),this.preview.parentNode||this.canvasCtr.append(this.preview),this.preview.setAttribute("height",t*e);let[i,r,n]=this.boardSize;if(i<0)return{};const s=this.styleNumber("width"),o=Math.round(Math.min(s,i+200));this.preview.style.width=`${o}px`,this.preview.setAttribute("width",o*e);const a=this.styleNumber("left")-n,h=Math.max(0,-a-100);return this.preview.style.left=`${h}px`,this.preview.getContext("2d").clearRect(0,0,this.preview.width,this.preview.height),{left:h,width:o,clipWidth:s}}async audioData(t,e){return b[t]?b[t]:new Promise((i=>{this.audioQueue.enqueue((async()=>{b[t]||(b[t]=await r.data(e)),i(b[t])}))}))}renderFrame(t,e,i){if(!this.node)return;const r=this.renderId,n=this.node.material?this.node.material.path:this.node.id;if(b[n]||(b[n]={}),b[n][t])return i(b[n][t],t);t:for(let r=0;r<5*e;r+=.1)for(let s of[-1,1]){const o=r*s+t;if(b[n][o]){if(i(b[n][o],o),r<e)return;break t}}this.videoQueue.enqueue((async()=>{if(r===this.renderId){if(!b[n][t]){const s={width:w,height:w,rawFrame:!0};let o;try{o=await this.node.getPreview(t||.01,s)}catch(t){return}if(!o)return void setTimeout((()=>{r===this.renderId&&this.renderFrame(t,e,i)}),300);const a=document.createElement("img");a.src=o,b[n]||(b[n]={}),b[n][t]=a}i(b[n][t],t)}}))}get boardSize(){const t=this.board;return t?[t.parentNode.offsetWidth,t.parentNode.offsetHeight,t.scrollLeft-t.trackHeadWidth,t.scrollTop]:[-1,-1]}get board(){let t=this.parentNode;if(!t)return null;for(;t;){if(t.classList?.contains("mirae-board"))return t;t=t.parentNode}}scrollToVisible(t){return this.cropMode&&this.cropView?this.cropView.scrollToVisible(t):super.scrollToVisible(t)}get cropMode(){return"time"===this.node?.cropMode}clearCache(t){b[t]&&delete b[t]}static create(t){const{moveListener:e}=t;return super.create().setOpts(t).addMoveListener(e)}}_.register(),t.exports=_},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(104),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>y});var r=i(20),n=i.n(r),s=i(21),o=i.n(s),a=i(29),h=i.n(a),l=new URL(i(105),i.b),d=new URL(i(106),i.b),c=new URL(i(107),i.b),u=new URL(i(108),i.b),p=o()(n()),f=h()(l),m=h()(d),g=h()(c),v=h()(u);p.push([t.id,'.mirae-clip[mira-editor-el] {\n  display: flex;\n  position: absolute;\n  pointer-events: auto;\n  user-select: none;\n  -webkit-user-select: none;\n  margin: 0;\n  padding: 0;\n}\n.mirae-clip[mira-editor-el] .mirae-clip-handle {\n  display: block;\n  position: absolute;\n  z-index: 6;\n  width: 6px;\n  height: 100%;\n  max-width: 50%;\n  background: rgba(31, 176, 249, 0.7);\n  pointer-events: auto;\n  cursor: col-resize;\n}\n.mirae-clip[mira-editor-el] .mirae-clip-handle:before {\n  position: absolute;\n  content: "";\n  background: #FFF;\n  opacity: 0.6;\n  height: 16px;\n  width: 2px;\n  border-radius: 2px;\n  top: calc(50% - (16px/2));\n}\n.mirae-clip[mira-editor-el] .mirae-clip-handle.mirae-clip-handle-start {\n  left: 0;\n}\n.mirae-clip[mira-editor-el] .mirae-clip-handle.mirae-clip-handle-start:before {\n  left: 1px;\n}\n.mirae-clip[mira-editor-el] .mirae-clip-handle.mirae-clip-handle-end {\n  right: 0;\n}\n.mirae-clip[mira-editor-el] .mirae-clip-handle.mirae-clip-handle-end:before {\n  right: 1px;\n}\n.mirae-clip[mira-editor-el] .mirae-clip-pline[mira-editor-el] {\n  pointer-events: none;\n  display: block;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 0;\n  height: 0;\n  border-color: var(--miraeHighlightColor);\n  border-style: solid;\n  border-width: 0;\n  opacity: 0;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.mirae-clip[mira-editor-el] .mirae-clip-pline[mira-editor-el].show {\n  opacity: 0.5 !important;\n}\n.mirae-clip[mira-editor-el] .unlink-btn {\n  pointer-events: auto;\n  display: none;\n  cursor: pointer;\n  background-color: var(--miraeCropBorderColor);\n  position: absolute;\n  width: 18px;\n  height: 18px;\n  border-radius: 9px;\n  left: -2px;\n  top: 50%;\n  z-index: 3;\n  transform: translate(-50%, -50%);\n  opacity: 0.8;\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url('+f+');\n}\n.mirae-clip[mira-editor-el] .unlink-btn:hover {\n  opacity: 1;\n  z-index: 999;\n}\n.mirae-clip[mira-editor-el] .unlink-btn:hover:after {\n  content: \'取消跟随\';\n  display: inline-block;\n  position: absolute;\n  left: calc(100% + 3px);\n  top: 50%;\n  padding: 0px 5px;\n  height: 18px;\n  background: rgba(54, 54, 91, 0.8);\n  color: #FFF;\n  font-size: 12px;\n  line-height: 18px;\n  white-space: nowrap;\n  border-radius: 3px;\n  transform: translateY(-50%);\n}\n.mirae-clip[mira-editor-el]:hover .unlink-btn {\n  display: block;\n}\n.mirae-clip[mira-editor-el][vtype] {\n  background-color: #000 !important;\n  overflow: hidden;\n}\n.mirae-clip[mira-editor-el][vtype]:after {\n  position: absolute;\n  content: attr(data-vtitle);\n  font-size: 12px;\n  font-weight: 500;\n  color: #FFF;\n  background-color: transparent;\n  opacity: 0.6;\n  height: 15px;\n  width: 100%;\n  top: 0px;\n  left: 0px;\n  padding: 2px 3px;\n}\n.mirae-clip[mira-editor-el][vtype="trans"] {\n  height: 32px !important;\n}\n.mirae-clip[mira-editor-el][vtype="video"] {\n  height: 65px !important;\n}\n.mirae-clip[mira-editor-el][vtype="audio"] {\n  height: 50px !important;\n}\n.mirae-clip[mira-editor-el][vtype="sticker"] {\n  height: 36px !important;\n}\n.mirae-clip[mira-editor-el][vtype="text"] {\n  height: 36px !important;\n}\n.mirae-clip[mira-editor-el].shadow {\n  height: calc(100% - 4px);\n  border: 2px dashed var(--miraeBorderColor);\n  border-radius: 3px;\n  background: #3A3A4D;\n  opacity: 0.7;\n  z-index: 6;\n}\n.mirae-clip[mira-editor-el].shadow.conflict {\n  border-color: rgba(255, 255, 0, 0.1);\n  background: rgba(255, 255, 255, 0.1);\n}\n.mirae-clip[mira-editor-el].shadow.conflict:before {\n  content: "";\n}\n.mirae-clip[mira-editor-el].node {\n  height: calc(100% - 4px);\n  align-items: center;\n  justify-content: center;\n  border-radius: 3px;\n  background: #556;\n  transition-property: border, opacity;\n  transition-duration: 0.3s;\n  border: 1px solid #556;\n  z-index: 1;\n  --leftOffset: 0px;\n}\n.mirae-clip[mira-editor-el].node.hover-parent {\n  border: 2px dashed var(--miraeHighlightColor);\n}\n.mirae-clip[mira-editor-el].node:before {\n  pointer-events: none;\n  white-space: nowrap;\n  display: block;\n  position: absolute;\n  background: rgba(60, 60, 60, 0.9);\n  color: #FFF;\n  font-size: 12px;\n  font-weight: 500;\n  border-radius: 2px;\n  padding: 0px 6px;\n  text-transform: none;\n  line-height: 18px;\n  height: 18px;\n  opacity: 0;\n  top: 0;\n  content: attr(data-info);\n  left: calc(-2px + var(--leftOffset));\n  transition-property: opacity, top;\n  transition-duration: 0.3s;\n}\n.mirae-clip[mira-editor-el].node.disable {\n  opacity: 0.35;\n}\n.mirae-clip[mira-editor-el].node:hover:before {\n  opacity: 1;\n  top: -23px;\n}\n.mirae-clip[mira-editor-el].node.no-info:before {\n  display: none !important;\n}\n.mirae-clip[mira-editor-el].node.crop {\n  background-color: transparent;\n  height: calc(100% + 4px);\n  pointer-events: auto;\n  cursor: pointer;\n}\n.mirae-clip[mira-editor-el].node.crop .crop-info-label {\n  pointer-events: none;\n  white-space: nowrap;\n  display: block;\n  position: absolute;\n  background: rgba(60, 60, 60, 0.9);\n  color: #FFF;\n  font-size: 12px;\n  font-weight: 500;\n  border-radius: 2px;\n  padding: 0px 6px;\n  text-transform: none;\n  line-height: 15px;\n  height: 15px;\n  top: -20px;\n}\n.mirae-clip[mira-editor-el].node.crop:before {\n  content: "";\n  opacity: 1;\n  margin: 0;\n  padding: 0;\n  display: block;\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.6);\n  height: calc(100% + 4px);\n  top: -2px !important;\n  border-radius: 0;\n  pointer-events: none;\n  left: -2px;\n  transform: translateX(-100%);\n  width: var(--leftShadow);\n}\n.mirae-clip[mira-editor-el].node.crop:after {\n  content: "";\n  opacity: 1;\n  margin: 0;\n  padding: 0;\n  display: block;\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.6);\n  height: calc(100% + 4px);\n  top: -2px !important;\n  border-radius: 0;\n  pointer-events: none;\n  right: -2px;\n  transform: translateX(100%);\n  width: var(--rightShadow);\n}\n.mirae-clip[mira-editor-el].node.placeholder {\n  border: 1px dotted #999;\n  color: #FFF;\n  font-size: 12px;\n  white-space: nowrap;\n  min-width: 500px;\n}\n.mirae-clip[mira-editor-el].node.placeholder:before {\n  display: none;\n}\n.mirae-clip[mira-editor-el].node.video .preview-canvas {\n  background-color: #000;\n}\n.mirae-clip[mira-editor-el].node.audio {\n  color: #FFF;\n  font-size: 12px;\n}\n.mirae-clip[mira-editor-el].node.audio .preview-canvas {\n  background-color: #006D4C;\n}\n.mirae-clip[mira-editor-el].node.text {\n  background: #1A2451;\n  justify-content: flex-start;\n}\n.mirae-clip[mira-editor-el].node.text .preview-canvas {\n  background: #1A2451;\n  height: 100%;\n  bottom: 0;\n  z-index: 1;\n}\n.mirae-clip[mira-editor-el].node.text .text-view {\n  pointer-events: none;\n  margin-left: 5px;\n  font-size: 12px;\n  color: #FFF;\n  white-space: nowrap;\n  width: 100%;\n  overflow: hidden;\n  z-index: 2;\n}\n.mirae-clip[mira-editor-el].node.text.has-speech .text-view {\n  margin-left: 25px;\n}\n.mirae-clip[mira-editor-el].node.text .audio-btn {\n  display: none;\n}\n.mirae-clip[mira-editor-el].node.text.hover {\n  background: #1A2451;\n}\n.mirae-clip[mira-editor-el].node.constraint-related {\n  border: 2px dashed var(--miraeRefLineColor);\n  transition-duration: 0s;\n  z-index: 5;\n}\n.mirae-clip[mira-editor-el].node.moving {\n  z-index: 8 !important;\n}\n.mirae-clip[mira-editor-el].node.moving:before {\n  opacity: 0;\n  top: 0;\n}\n.mirae-clip[mira-editor-el].node.move-parent {\n  border: 2px dashed var(--miraeHighlightColor);\n}\n.mirae-clip[mira-editor-el].node.move-parent:before {\n  opacity: 1;\n  top: -23px;\n  content: "跟随绑定";\n  background: var(--miraeSelBorderColor);\n}\n.mirae-clip[mira-editor-el].node.hover {\n  z-index: 3;\n  border: 2px solid var(--miraeHighlightColor) !important;\n}\n.mirae-clip[mira-editor-el].node.hover.disable {\n  opacity: 0.75;\n}\n.mirae-clip[mira-editor-el].node.auto-hover {\n  z-index: 3;\n  border: 2px solid var(--miraeHighlightColor) !important;\n}\n.mirae-clip[mira-editor-el].node.auto-hover .mirae-clip-pline {\n  opacity: 0.3;\n}\n.mirae-clip[mira-editor-el].node.animate {\n  transition-property: top, left;\n  transition-duration: 0.3s;\n}\n.mirae-clip[mira-editor-el].node.selected {\n  z-index: 5;\n  border: 2px solid var(--miraeSelBorderColor) !important;\n}\n.mirae-clip[mira-editor-el].node.trans {\n  z-index: 6;\n  background-color: rgba(0, 0, 0, 0.8);\n  border-width: 2px;\n  height: 32px;\n  top: calc(50% - (32px * 0.5)) !important;\n  background-position: center;\n  background-size: 21px 21px;\n  background-repeat: no-repeat;\n  background-image: url('+m+");\n}\n.mirae-clip[mira-editor-el].node.cut {\n  opacity: 0.3;\n  border: 2px dashed var(--miraeBorderColor) !important;\n}\n.mirae-clip[mira-editor-el].node.copy {\n  opacity: 0.3;\n  border: 2px solid var(--miraeBorderColor) !important;\n}\n.mirae-clip[mira-editor-el].node .canvas-ctr {\n  pointer-events: none;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  border-radius: 2px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.mirae-clip[mira-editor-el].node .preview-canvas {\n  pointer-events: none;\n  position: absolute;\n  left: 0;\n  background: transparent;\n}\n.mirae-clip[mira-editor-el].node .audio-btn {\n  pointer-events: auto;\n  cursor: pointer;\n  background-color: rgba(31, 176, 249, 0.7);\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  border-radius: 5px;\n  left: calc(26px + var(--leftOffset));\n  top: 50%;\n  z-index: 3;\n  transform: translateY(-50%);\n  background-position: center;\n  background-size: 15px 15px;\n  background-repeat: no-repeat;\n  background-image: url("+g+");\n}\n.mirae-clip[mira-editor-el].node .audio-btn:hover {\n  background-color: #1fb0f9;\n}\n.mirae-clip[mira-editor-el].node .audio-btn.audio-btn-off {\n  background-color: rgba(54, 54, 91, 0.8);\n  background-position: center;\n  background-size: 15px 15px;\n  background-repeat: no-repeat;\n  background-image: url("+v+");\n}\n.mirae-clip[mira-editor-el].node .audio-btn.audio-btn-off:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n",""]);const y=p},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Crect width=%2748%27 height=%2748%27 fill=%27white%27 fill-opacity=%270.01%27/%3E%3Cpath d=%27M25.8927 16.0306L18.1145 8.25238C15.2506 5.38854 10.7031 5.2929 7.9572 8.03878C5.21132 10.7846 5.30696 15.3322 8.1708 18.1961L15.949 25.9742%27 stroke=%27%23FFF%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M31.9161 22.0706L39.6943 29.8488C42.5581 32.7126 42.9291 37.1231 39.9079 40.0061C36.8867 42.889 32.6144 42.6563 29.7506 39.7925L21.9724 32.0143%27 stroke=%27%23FFF%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M21.2384 21.0758L17.3493 17.1867%27 stroke=%27%23FFF%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M30.3131 30.1502L26.424 26.2612%27 stroke=%27%23FFF%27 stroke-width=%274%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27%3E%3Cpath fill-rule=%27evenodd%27 clip-rule=%27evenodd%27 d=%27M15 3H10V10L5 6V14L10 10V17H15C16.1046 17 17 16.1046 17 15V5C17 3.89543 16.1046 3 15 3ZM10 10L15 6V14L10 10ZM5 2C3.34315 2 2 3.34315 2 5V15C2 16.6569 3.34315 18 5 18H15C16.6569 18 18 16.6569 18 15V5C18 3.34315 16.6569 2 15 2H5Z%27 fill=%27%23FFF%27%3E%3C/path%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27%3E%3Cpath d=%27M12 3a1 1 0 0 0-1.68-.73l-3.88 3.6A.5.5 0 0 1 6.1 6H3.5C2.67 6 2 6.67 2 7.5v5c0 .83.67 1.5 1.5 1.5h2.6a.5.5 0 0 1 .34.13l3.88 3.6a1 1 0 0 0 1.68-.74V3.01ZM7.12 6.6 11 3v14l-3.88-3.6A1.5 1.5 0 0 0 6.1 13H3.5a.5.5 0 0 1-.5-.5v-5c0-.28.22-.5.5-.5h2.6c.38 0 .75-.14 1.02-.4Zm8.14-1.97a.5.5 0 0 1 .7.04 8 8 0 0 1 0 10.66.5.5 0 0 1-.74-.66 7 7 0 0 0 0-9.34.5.5 0 0 1 .04-.7Zm-1.18 8.3a.5.5 0 0 1-.18-.68 4.5 4.5 0 0 0 0-4.5.5.5 0 0 1 .86-.5 5.5 5.5 0 0 1 0 5.5.5.5 0 0 1-.68.18Z%27 fill=%27%23FFF%27%3E%3C/path%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg fill=%27%23FFF%27 fill-rule=%27nonzero%27%3E%3Cpath d=%27M13.371 3.003a1 1 0 0 0-1.68-.73l-3.88 3.6a.5.5 0 0 1-.34.13h-2.6c-.83 0-1.5.67-1.5 1.5v5c0 .83.67 1.5 1.5 1.5h2.6a.5.5 0 0 1 .34.13l3.88 3.6a1 1 0 0 0 1.68-.74V3.003zm-4.88 3.6 3.88-3.6v14l-3.88-3.6a1.5 1.5 0 0 0-1.02-.4h-2.6a.5.5 0 0 1-.5-.5v-5c0-.28.22-.5.5-.5h2.6c.38 0 .75-.14 1.02-.4z%27/%3E%3Cpath d=%27m4.072 1.757.095.002 12.291 13.777a.901.901 0 0 1 .216.591.901.901 0 0 1-.216.592.727.727 0 0 1-1.035.086L3.542 3.201a.901.901 0 0 1-.216-.592c0-.214.073-.428.216-.591a.738.738 0 0 1 .625-.26z%27/%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";const e={data:async t=>{const e=t.getChannelData(0);let i="const sample = "+(t=>{const e=[],i=[];for(let e=0;e<t.length;e+=100)i.push(t[e]);for(let t=0,r=parseInt(i.length/10);t<r;t++){let r=i.slice(10*t,10*(t+1));e.push(Math.max.apply(null,r))}return e}).toString()+";\n";i+="self.onmessage = (e) => postMessage(sample(e.data));\n";const r=URL.createObjectURL(new Blob([i])),n=new Worker(r);return n.postMessage(e),new Promise((e=>{n.onmessage=i=>{n.terminate(),e({data:i.data,duration:t.duration,channels:t.numberOfChannels})}}))}};t.exports=e},(t,e,i)=>{"use strict";const r=i(22);class n extends r{static TAG="mira-editor-button";init(){return this.addClass(n.TAG),super.init()}setTint(t){this.set("data-tint",t)}static create(t){return super.create(t).addMoveListener(t)}}n.register(),t.exports=n},(t,e,i)=>{"use strict";i(103);const r=i(22);class n extends r{static TAG="mira-editor-clip-handle";init(){return this.addClass("mirae-clip-handle"),super.init()}}n.register(),t.exports=n},(t,e,i)=>{"use strict";i(103);const r=i(22);class n extends r{static TAG="mira-editor-clip-pline";init(){return this.addClass("mirae-clip-pline"),super.init()}update(t,e,i){this.setStyle({top:t-Math.max(i,0)+"px",left:-2-Math.max(e,0)+"px",height:`${Math.abs(i)}px`,width:`${Math.abs(e)+2}px`,borderLeftWidth:(e>0?0:2)+"px",borderRightWidth:(e>0?2:0)+"px",borderTopWidth:(i>0?2:0)+"px",borderBottomWidth:(i>0?0:2)+"px"})}}n.register(),t.exports=n},(t,e,i)=>{"use strict";const r=i(33),n=i(114),{TYPE_SPINE:s,TYPE_VIDEO:o,TYPE_AUDIO:a,TYPE_TEXT:h,TYPE_STICKER:l,TYPE_PLACEHOLDER:d,OP_MOVE:c,SELECT:u,OP_CHANGE:p}=i(6),{uuid:f}=i(9),{Record:m}=i(32);class g extends r{constructor(t,e){super(e),this.type=this.typeOf(t),[t?.parent?.type,t?.type].includes(s)?(this.type=s,this.id=`sp-${f().substring(0,3)}`):this.id=`tk-${f().substring(0,3)}`,this.clips=[],this.view=n.create().setType(this.type),this.view.applyChange=(t,e)=>this.applyChange(t,e),this.type===d&&(this.view.addClass(`mirae-track-placeholder-${t}`),this.id=`ph-${t}`),this.view.set("data-id",this.id).setName(this.type+"."+this.id)}selectAll(){const t=[];this.clips.map((e=>{e.node&&"placeholder"!==e.node.type&&t.push(e.node)})),t[0]&&t[0].emit(u,{action:"multi",nodes:t})}canRemove(){return![d,s].includes(this.type)&&0==this.clips.length}hide(){this.clips.map((t=>this.remove(t,!1))),this.clips=[],this.view.show(!1)}typeOf(t){return"object"!=typeof t?d:["image","video","scene","trans"].includes(t.type)?o:"audio"===t.type?a:["text","richtext"].includes(t.type)?h:l}overlap(t){if(!t.node.display||this.type===a)return!1;for(const e of this.clips)if(e!==t&&e.overlap(t))return!0;return!1}accept(t,e=!1,i=[]){if(Array.isArray(t))return t.every((t=>this.accept(t,e,i)));if(this.type===s&&e)return t.node.parent===this.nodeTrack;if(this.nodeTrack&&this.nodeTrack===t.node.parent)return!0;const r=this.type===s?o:this.type;if(this.typeOf(t.node)!==r)return!1;if(!e&&this.type===s)return!0;for(const e of this.clips)if(e!==t&&!i.includes(e.node)&&e.overlap(t))return!1;return!0}append(t,e=c){this.type===s&&t.node.parent?.type===s&&(this.nodeTrack=t.node.parent),t.track&&t.track!==this&&t.track.remove(t,!1),this.clips.includes(t)||this.clips.push(t),t.track=this,this.view.append(t.view),t.node.trackId?t.node.trackId!==this.id&&g.apply(t.node,{to:{trackId:this.id}},e):t.node.trackId=this.id,this.view.show(!0),t.shadowTrack=null,this.lock(100,(()=>this.view.refresh()),"refresh"),window.requestAnimationFrame((()=>t.view.refresh()))}remove(t,e=!0){this.clips=this.clips.filter((e=>e.node.id!==t.node.id)),t.track=null,e&&t.view.remove(),this.lock(100,(()=>this.view.refresh()),"refresh")}toString(){return`${this.type} clips(${this.clips.length}): ${this.clips.map((t=>`${t.node.type}[${t.node.id}]`)).join(", ")}`}applyChange(t,e){t.map((i=>e[i.id]&&g.apply(i,e[i.id],p,{relativeNodes:t}))),this.editor._history.append(new m(p,t,e))}destroy(){this.clips=null,super.destroy()}}t.exports=g},(t,e,i)=>{"use strict";i(115);const{SELECT:r,TYPE_SPINE:n,TYPE_VIDEO:s,TYPE_AUDIO:o,TYPE_TEXT:a,TYPE_STICKER:h,TYPE_PLACEHOLDER:l}=i(6),d=i(22),c=i(110);class u extends d{static TAG="mira-editor-track";init(){return this.addClass("mirae-track"),this.head=document.createElement("div"),this.head.classList.add("head"),this.append(this.head),super.init()}clear(){this.innerHTML=""}get canSetAudio(){return this.type!==l}get canSetVisible(){return[n,s,a,h].includes(this.type)}get canArrange(){return[a,s].includes(this.type)}refresh(){if(this.canSetAudio){let t=!1;this.childNodes.forEach((e=>{e.node&&e.node.audio&&(t=!0)})),this.audioBtn.toggleClass("track-audio-off",!t)}if(this.canSetVisible){let t=!1;this.childNodes.forEach((e=>{e.node&&e.node.active&&(t=!0)})),this.visibleBtn.toggleClass("track-visible-off",!t)}}addBackBtn(t){const e=c.create(this).addClass("go-back-btn");t&&(e.onClick=t)}setType(t){return this.type=t,this.iconBtn||(this.iconBtn=c.create(this).addClass(["track-icon-btn","track-btn"]).set("data-tint","轨道全选 ⌘+A"),this.iconBtn.onClick=t=>{let e=[],i=[];this.childNodes.forEach((t=>{t.node&&t.node.type&&"placeholder"!==t.node.type&&(t.hasClass("selected")||i.push(t.node),e.push(t.node))})),i.length>0&&(e=i),e[0]&&e[0].emit(r,{action:"multi",nodes:e})}),this.canSetAudio&&(this.audioBtn=c.create(this).addClass(["track-audio-btn","track-btn"]),this.audioBtn.onClick=t=>{const e=!!this.audioBtn.classList.contains("track-audio-off"),i=[],r={};this.childNodes.forEach((t=>{t.node&&t.apply&&t.node.audio!==e&&(i.push(t.node),r[t.node.id]={to:{audio:e}})})),i.length>0&&this.applyChange(i,r),this.refresh()}),this.canSetVisible&&(this.visibleBtn=c.create(this).addClass(["track-visible-btn","track-btn"]),this.visibleBtn.onClick=t=>{const e=!!this.visibleBtn.classList.contains("track-visible-off"),i=[],r={};this.childNodes.forEach((t=>{t.node&&t.apply&&t.node.active!==e&&(i.push(t.node),r[t.node.id]={to:{active:e}})})),i.length>0&&this.applyChange(i,r),this.refresh()}),this.canArrange&&(this.arrangeBtn=c.create(this).addClass(["track-arrange-btn","track-btn"]).set("data-tint","对齐片段"),this.arrangeBtn.onClick=t=>{const e=[];if(this.childNodes.forEach((t=>{t.node&&t.apply&&e.push(t.node)})),e.length<=0)return;const i=[],r={};e.sort(((t,e)=>t.absStartTime-e.absStartTime));let n=0;for(const t of e){const e=t.parents.reverse().find((t=>["creator","scene"].includes(t.type)));if(t.absStartTime-e.absStartTime===n&&e===t.parent){n+=t.duration;continue}const s={start:n};t.conf.duration||t.conf.end||(s.duration=t.duration),e!==t.parent&&(s.parent=e),r[t.id]={to:s},i.push(t),n+=t.duration}console.log("rrrr",r),i.length>0&&this.applyChange(i,r)}),this.setName(t).addClass(`mirae-track-${t}`)}setName(t){return this}remove(){this.applyChange=null,super.remove()}}u.register(),t.exports=u},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(116),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>N});var r=i(20),n=i.n(r),s=i(21),o=i.n(s),a=i(29),h=i.n(a),l=new URL(i(107),i.b),d=new URL(i(108),i.b),c=new URL(i(117),i.b),u=new URL(i(118),i.b),p=new URL(i(119),i.b),f=new URL(i(120),i.b),m=new URL(i(121),i.b),g=new URL(i(122),i.b),v=new URL(i(123),i.b),y=new URL(i(124),i.b),x=o()(n()),E=h()(l),b=h()(d),w=h()(c),C=h()(u),_=h()(p),T=h()(f),M=h()(m),O=h()(g),k=h()(v),L=h()(y);x.push([t.id,'.no-head[mira-editor-el] .track-btn {\n  display: none !important;\n}\n.mirae-track[mira-editor-el] {\n  display: block;\n  position: relative;\n  height: 50px;\n  border-top: 4px solid #17171D;\n  background: #20202D;\n  margin: 0px;\n  margin-top: 4px;\n  padding: 0;\n  left: var(--trackHeadWidth);\n  pointer-events: auto;\n}\n.mirae-track[mira-editor-el] ::before {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n.mirae-track[mira-editor-el] ::after {\n  border: 0;\n  margin: 0;\n  padding: 0;\n}\n.mirae-track[mira-editor-el] .head {\n  pointer-events: none;\n  position: absolute;\n  left: -150px;\n  width: 150px;\n  height: 100%;\n  z-index: 10;\n  background-color: rgba(32, 32, 45, 0.8);\n}\n.mirae-track[mira-editor-el] .head:before {\n  content: "";\n  position: absolute;\n  width: 100%;\n  height: 2px;\n  top: -3px;\n  background: transparent;\n}\n.mirae-track[mira-editor-el] .track-icon-btn {\n  pointer-events: auto;\n  cursor: pointer;\n  background-color: rgba(54, 54, 91, 0.8);\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  top: 50%;\n  z-index: 13;\n  transform: translateY(-50%);\n  border-radius: 10px;\n  left: -115px;\n  width: 24px;\n  height: 24px;\n  border-radius: 5px;\n  background-color: transparent;\n}\n.mirae-track[mira-editor-el] .track-icon-btn:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .track-icon-btn:hover {\n  z-index: 999;\n}\n.mirae-track[mira-editor-el] .track-icon-btn:hover:after {\n  content: attr(data-tint);\n  display: inline-block;\n  position: absolute;\n  left: calc(100% + 3px);\n  top: 50%;\n  padding: 0px 5px;\n  height: 24px;\n  background: rgba(54, 54, 91, 0.8);\n  color: #FFF;\n  font-size: 12px;\n  line-height: 24px;\n  white-space: nowrap;\n  border-radius: 3px;\n  transform: translateY(-50%);\n}\n.mirae-track[mira-editor-el] .track-audio-btn {\n  pointer-events: auto;\n  cursor: pointer;\n  background-color: rgba(54, 54, 91, 0.8);\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  top: 50%;\n  z-index: 13;\n  transform: translateY(-50%);\n  border-radius: 10px;\n  background-color: rgba(31, 176, 249, 0.7);\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url('+E+");\n  left: -87px;\n}\n.mirae-track[mira-editor-el] .track-audio-btn:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .track-audio-btn:hover {\n  background-color: #1fb0f9;\n}\n.mirae-track[mira-editor-el] .track-audio-btn.track-audio-off {\n  background-color: rgba(54, 54, 91, 0.8);\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url("+b+");\n}\n.mirae-track[mira-editor-el] .track-audio-btn.track-audio-off:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .track-visible-btn {\n  pointer-events: auto;\n  cursor: pointer;\n  background-color: rgba(54, 54, 91, 0.8);\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  top: 50%;\n  z-index: 13;\n  transform: translateY(-50%);\n  border-radius: 10px;\n  background-color: rgba(31, 176, 249, 0.7);\n  background-position: center;\n  background-size: 16px 16px;\n  background-repeat: no-repeat;\n  background-image: url("+w+");\n  left: -59px;\n}\n.mirae-track[mira-editor-el] .track-visible-btn:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .track-visible-btn:hover {\n  background-color: #1fb0f9;\n}\n.mirae-track[mira-editor-el] .track-visible-btn.track-visible-off {\n  background-color: rgba(54, 54, 91, 0.8);\n  background-position: center;\n  background-size: 16px 16px;\n  background-repeat: no-repeat;\n  background-image: url("+C+");\n}\n.mirae-track[mira-editor-el] .track-visible-btn.track-visible-off:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .track-arrange-btn {\n  pointer-events: auto;\n  cursor: pointer;\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  top: 50%;\n  z-index: 13;\n  transform: translateY(-50%);\n  border-radius: 10px;\n  background-color: rgba(54, 54, 91, 0.8);\n  background-position: center;\n  background-size: 23px 23px;\n  background-repeat: no-repeat;\n  background-image: url("+_+");\n  left: -31px;\n}\n.mirae-track[mira-editor-el] .track-arrange-btn:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .track-arrange-btn:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .track-arrange-btn:hover {\n  z-index: 999;\n}\n.mirae-track[mira-editor-el] .track-arrange-btn:hover:after {\n  content: attr(data-tint);\n  display: inline-block;\n  position: absolute;\n  left: calc(100% + 3px);\n  top: 50%;\n  padding: 0px 5px;\n  height: 24px;\n  background: rgba(54, 54, 91, 0.8);\n  color: #FFF;\n  font-size: 12px;\n  line-height: 24px;\n  white-space: nowrap;\n  border-radius: 3px;\n  transform: translateY(-50%);\n}\n.mirae-track[mira-editor-el] .go-back-btn {\n  pointer-events: auto;\n  cursor: pointer;\n  background-color: rgba(54, 54, 91, 0.8);\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  top: 50%;\n  z-index: 13;\n  transform: translateY(-50%);\n  border-radius: 10px;\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url("+T+');\n  background-position: 6px center;\n  background-color: var(--miraeSelBorderColor);\n  top: 18px;\n  left: -70px;\n  width: 62px;\n}\n.mirae-track[mira-editor-el] .go-back-btn:hover {\n  background-color: rgba(88, 88, 100, 0.8);\n}\n.mirae-track[mira-editor-el] .go-back-btn:after {\n  content: "返回";\n  color: #FFF;\n  font-size: 12px;\n  line-height: 20px;\n  position: absolute;\n  left: 20px;\n}\n.mirae-track[mira-editor-el]:hover {\n  background-color: #292933 !important;\n}\n.mirae-track[mira-editor-el]:hover .head {\n  background-color: rgba(41, 41, 51, 0.8) !important;\n}\n.mirae-track[mira-editor-el].hide {\n  border: 0!important;\n  height: 0!important;\n}\n.mirae-track[mira-editor-el]:after {\n  content: attr(data-name);\n  position: absolute;\n  width: 100%;\n  height: 12px;\n  top: 0px;\n  left: calc(0px - var(--trackHeadWidth));\n  color: #FFF;\n  font-size: 12px;\n  background: transparent;\n}\n.mirae-track[mira-editor-el]:before {\n  content: "";\n  position: absolute;\n  width: var(--maxWidth);\n  height: 2px;\n  top: -3px;\n  background: transparent;\n}\n.mirae-track[mira-editor-el].ruler {\n  z-index: 100;\n  position: sticky;\n  top: 0px;\n  height: 18px;\n  border: 0px;\n  margin: 0px;\n  padding: 0px;\n  background: rgba(23, 23, 29, 0.9);\n  margin-bottom: 18px;\n}\n.mirae-track[mira-editor-el].ruler .head {\n  background-color: transparent;\n}\n.mirae-track[mira-editor-el].ruler:hover {\n  background: rgba(23, 23, 29, 0.9) !important;\n}\n.mirae-track[mira-editor-el].ruler:hover .head {\n  background-color: transparent !important;\n}\n.mirae-track[mira-editor-el].ruler:hover .mark:after {\n  opacity: 1;\n}\n.mirae-track[mira-editor-el].ruler:hover .cursor:after {\n  opacity: 1;\n}\n.mirae-track[mira-editor-el].mirae-track-spine {\n  background: #313147;\n  height: 65px;\n  margin-top: 0px;\n  border-top-width: 0px;\n}\n.mirae-track[mira-editor-el].mirae-track-spine .track-icon-btn {\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url('+M+");\n}\n.mirae-track[mira-editor-el].mirae-track-spine .head {\n  background: #313147;\n}\n.mirae-track[mira-editor-el].mirae-track-video {\n  height: 69px;\n}\n.mirae-track[mira-editor-el].mirae-track-video .track-icon-btn {\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url("+M+");\n}\n.mirae-track[mira-editor-el].mirae-track-text {\n  height: 36px;\n}\n.mirae-track[mira-editor-el].mirae-track-text .track-icon-btn {\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url("+O+");\n}\n.mirae-track[mira-editor-el].mirae-track-sticker {\n  height: 36px;\n}\n.mirae-track[mira-editor-el].mirae-track-sticker .track-icon-btn {\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url("+k+");\n}\n.mirae-track[mira-editor-el].mirae-track-audio {\n  height: 50px;\n}\n.mirae-track[mira-editor-el].mirae-track-audio .track-icon-btn {\n  background-position: center;\n  background-size: 13px 13px;\n  background-repeat: no-repeat;\n  background-image: url("+L+');\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder {\n  background: transparent;\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder .track-icon-btn {\n  display: none;\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder:after {\n  content: "";\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder.mirae-track-placeholder-bottom {\n  height: 30px;\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder.mirae-track-placeholder-top {\n  height: 0px;\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder .head {\n  background-color: transparent;\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder:hover {\n  background: transparent !important;\n}\n.mirae-track[mira-editor-el].mirae-track-placeholder:hover .head {\n  background: transparent !important;\n}\n.mirae-track[mira-editor-el].top-insert:before {\n  background-color: var(--miraeSelBorderColor);\n}\n.mirae-track[mira-editor-el].top-insert .head:before {\n  background-color: var(--miraeSelBorderColor);\n}\n',""]);const N=x},t=>{"use strict";t.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27M24 36C35.0457 36 44 24 44 24C44 24 35.0457 12 24 12C12.9543 12 4 24 4 24C4 24 12.9543 36 24 36Z%27 fill=%27none%27 stroke=%27%23FFF%27 stroke-width=%272%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M24 29C26.7614 29 29 26.7614 29 24C29 21.2386 26.7614 19 24 19C21.2386 19 19 21.2386 19 24C19 26.7614 21.2386 29 24 29Z%27 fill=%27none%27 stroke=%27%23FFF%27 stroke-width=%272%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27%3F%3E%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 48 48%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27M9.85786 18C6.23858 21 4 24 4 24C4 24 12.9543 36 24 36C25.3699 36 26.7076 35.8154 28 35.4921M20.0318 12.5C21.3144 12.1816 22.6414 12 24 12C35.0457 12 44 24 44 24C44 24 41.7614 27 38.1421 30%27 stroke=%27%23FFF%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M20.3142 20.6211C19.4981 21.5109 19 22.6972 19 23.9998C19 26.7612 21.2386 28.9998 24 28.9998C25.3627 28.9998 26.5981 28.4546 27.5 27.5705%27 stroke=%27%23FFF%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3Cpath d=%27M42 42L6 6%27 stroke=%27%23FFF%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27/%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg stroke=%27%23FFF%27 fill=%27none%27 fill-rule=%27evenodd%27%3E%3Crect x=%2714.234%27 y=%278.477%27 width=%271.577%27 height=%273.123%27 rx=%27.789%27/%3E%3Cpath d=%27M10.993 13.205H6.66c-1.625 0-2.942-1.418-2.942-3.166 0-1.75 1.317-3.167 2.942-3.167h4.332%27 stroke-linecap=%27round%27/%3E%3Cg stroke-linecap=%27round%27%3E%3Cpath stroke-linejoin=%27round%27 d=%27m9.437 8.44-1.67 1.554 1.67 1.567%27/%3E%3Cpath d=%27M8.505 10h4.488%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2712%27 height=%2712%27 viewBox=%270 0 12 12%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27%3E%3Cpath d=%27M4.65 2.15a.5.5 0 0 0 0 .7L7.79 6 4.65 9.15a.5.5 0 1 0 .7.7l3.5-3.5a.5.5 0 0 0 0-.7l-3.5-3.5a.5.5 0 0 0-.7 0Z%27 fill=%27%23FFF%27 transform=%27rotate%28180, 6 6%29%27%3E%3C/path%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27%3E%3Cpath d=%27M4.5 4A2.5 2.5 0 0 0 2 6.5v7A2.5 2.5 0 0 0 4.5 16h7a2.5 2.5 0 0 0 2.5-2.5v-1l2.4 1.8a1 1 0 0 0 1.6-.8v-7a1 1 0 0 0-1.6-.8L14 7.5v-1A2.5 2.5 0 0 0 11.5 4h-7ZM14 8.75l3-2.25v7l-3-2.25v-2.5ZM13 6.5v7c0 .83-.67 1.5-1.5 1.5h-7A1.5 1.5 0 0 1 3 13.5v-7C3 5.67 3.67 5 4.5 5h7c.83 0 1.5.67 1.5 1.5Z%27 fill=%27%23FFF%27%3E%3C/path%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27%3E%3Cpath d=%27M4 3.5c0-.28.22-.5.5-.5h10c.28 0 .5.22.5.5v2a.5.5 0 0 1-1 0V4h-4v12h1.5a.5.5 0 0 1 0 1h-4a.5.5 0 0 1 0-1H9V4H5v1.5a.5.5 0 0 1-1 0v-2Z%27 fill=%27%23FFF%27%3E%3C/path%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27%3E%3Cpath d=%27M6.3549 3.32239L6.68274 2.98983C6.68283 2.98974 6.68292 2.98965 6.68301 2.98956C7.32829 2.33672 8.3699 2.33681 9.01506 2.98983C9.66145 3.64409 9.66181 4.70494 9.01514 5.36362C9.01499 5.36377 9.01483 5.36393 9.01468 5.36409L5.99929 8.41437L2.98529 5.36369C2.33824 4.70877 2.33824 3.64445 2.98529 2.98953C3.62902 2.33797 4.67018 2.33797 5.31391 2.98953L5.64314 3.32278L5.99922 3.68318L6.3549 3.32239ZM10.8616 8.5L14 3.00778L17.1384 8.5H10.8616ZM2.5 11.5H8.5V17.5H2.5V11.5ZM17.5 14.5C17.5 16.1569 16.1569 17.5 14.5 17.5C12.8431 17.5 11.5 16.1569 11.5 14.5C11.5 12.8431 12.8431 11.5 14.5 11.5C16.1569 11.5 17.5 12.8431 17.5 14.5Z%27 stroke=%27%23FFF%27%3E%3C/path%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27%3E%3Cpath d=%27M14.7 2.23a1 1 0 0 1 1.3.95V13.5a2.5 2.5 0 1 1-1-2V6.18L8 8.37v7.13a2.5 2.5 0 1 1-1-2V5.37a1 1 0 0 1 .7-.96l7-2.18ZM8 7.32l7-2.19V3.18L8 5.37v1.95ZM5.5 14a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Zm6.5-.5a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0Z%27 fill=%27%23FFF%27%3E%3C/path%3E%3C/svg%3E"},(t,e,i)=>{"use strict";i(126);const r=i(10),{secToHmsf:n,secToHms:s}=i(80),o=i(22),a=i(5),{SELECT:h}=i(6),{round:l}=i(8);class d extends o{static TAG="mira-editor-board";init(){return this.addClass("mirae-board"),this.cursor={},this.cursorTime={},this.onscroll=t=>this.onScroll(t),super.init()}setHead(t){return this.trackHeadWidth=120,t||this.addClass("no-head"),this.setStyleVars({"--trackHeadWidth":`${this.trackHeadWidth}px`})}addEndCover(){this.videoEndCover||(this.videoEndCover=document.createElement("div"),this.videoEndCover.classList.add("video-end-cover")),this.ruler.append(this.videoEndCover)}addMoveListener(t){return super.addMoveListener(t),this.addEventListener("mousewheel",(e=>{if(e.mctrlKey&&(e.preventDefault(),e.stopImmediatePropagation(),t&&t.onScale)){const i=e.wheelDelta%120==0?e.wheelDelta:e.wheelDeltaX||e.wheelDeltaY;t.onScale(t.relativeScale+(i>0?.01:-.01))}})),this}onScroll(t){this.updateClipScroll(),this.moveListener.onScroll(t)}updateClipScroll(){for(const t of this.childNodes)if(t.classList.contains("mirae-track"))for(const e of t.childNodes)e.onScroll&&e.onScroll({x:this.scrollLeft-this.trackHeadWidth,y:this.scrollTop})}pointerTime(t){return((t instanceof r?t.x:this.eventPoint(t).x)-this.trackHeadWidth)/this.scale}eventPoint(t){return this.rebase(new r(t))}rebase(t){const e=[-this.scrollLeft,-this.scrollTop];return t.rebase(this).rebase(e)}relativeRect(t){const e=[-this.scrollLeft,-this.scrollTop];return 1===t.nodeType&&t.getBoundingClientRect&&(t=t.getBoundingClientRect()),t.rebase(this.getBoundingClientRect()).rebase(e)}selection(t,e){if(!t||!e)return this.selectionBox&&this.selectionBox.remove(),void(this.selectionBox=null);const i=this.rebase(a.bounds([t,e]));this.selectionBox||(this.selectionBox=document.createElement("div"),this.selectionBox.classList.add("mirae-board-selection"),this.append(this.selectionBox),this.selected={});for(const t of["top","left","width","height"])this.selectionBox.style[t]=`${i[t]}px`;this.rendering||(this.rendering=!0,requestAnimationFrame((()=>{const t={};for(const e of this.childNodes)if(e.classList.contains("mirae-track"))for(const r of e.childNodes)r.node?.id&&"placeholder"!==r.node.type&&a.intersect(i,this.relativeRect(r))&&(t[r.node.id]=r.node);const e=[];Object.entries(t).map((([t,i])=>{this.selected[t]||e.push(i)})),Object.entries(this.selected).map((([i,r])=>{t[i]||e.push(r)})),e[0]&&e[0].emit(h,{action:"multi",nodes:e}),this.selected=t,this.rendering=!1})))}setScale(t){this.scale=t;for(const[t,e]of Object.entries(this.cursor))e.parentNode&&(e.style.left=this.cursorTime[t]*this.scale+"px");this.refreshEndCover(!1)}get ruler(){if(this._ruler)return this._ruler;for(const t of this.childNodes)if(t.classList.contains("ruler")){this._ruler=t;break}return this._ruler}showCursor(t,e,i=!0,r=!0){return r&&(e=Math.max(Math.min(e,this.duration),0)),e=i?Math.floor(e*this.fps)/this.fps:Math.floor(100*e)/100,e=l(e,3),this.cursorTime[t]=e,this.cursor[t]||(this.cursor[t]=document.createElement("div"),this.cursor[t].classList.add(t)),this.cursor[t].parentNode||this.ruler.append(this.cursor[t]),this.cursor[t].style.left=e*this.scale+"px",this.cursor[t].setAttribute("data-time",s(e,1,!0)),e}flashCursor(t,e,i=500){this.cursor[t]&&(this.cursor[t].classList.add(e),this.lock(i,(()=>{this.cursor[t].classList.remove(e)}),`FlashCursor:${t}`))}scrollToCursor(t){if(!this.parentElement)return;const e=this.cursorTime[t]*this.scale;!this.cursor[t]||!this.cursor[t].parentNode||this.locked("scroll")||this.scrollLeft<=e&&e<=this.scrollLeft+this.parentElement.offsetWidth||(this.lock(2e3,null,"scroll"),this.cursor[t].scrollIntoView({behavior:"smooth",block:"center",inline:"start"}))}hideCursor(t){this.cursor[t]&&(this.cursor[t].remove(),delete this.cursor[t])}showConstraint(t){this.constraint&&this.constraint!=t&&this.hideConstraint(),this.constraint=t,this.showCursor("constraint",t.time-this.root.absStartTime,!1,!1),this.constraint.clip&&this.constraint.clip.view.addClass("constraint-related")}hideConstraint(){this.hideCursor("constraint"),this.constraint&&this.constraint.clip&&this.constraint.clip.view.removeClass("constraint-related")}setDuration(t){this.duration=t,this.refreshEndCover()}refreshEndCover(t=!0){t&&this.videoEndCover&&(this.videoEndCover.classList.add("animation"),this.lock(500,(()=>{this.videoEndCover.classList.remove("animation")}),"end-cover-ani")),this.setStyleVars({"--endLeft":1+this.duration*this.scale+"px"})}setWidth(t){this.setStyleVars({"--maxWidth":t})}setHeight(t){this.setStyleVars({"--boardHeight":`${t}px`})}scrollToVisible(t){const e=this.eventPoint(t),[i,r,n,s]=[this.scrollLeft,this.scrollTop,this.scrollWidth,this.scrollHeight],[o,a]=[this.parentElement.offsetWidth,this.parentElement.offsetHeight],h={x:0,y:0};return e.x<i+8&&i>0?h.x=-Math.min(30,i):e.x>i+o-8&&i+o<n&&(h.x=Math.min(30,n-(i+o))),e.y<r+8&&r>0?h.y=-Math.min(30,r):e.y>r+a-8&&r+a<s&&(h.y=Math.min(30,s-(r+a))),this.scrollTo({top:r+h.y,left:i+h.x,behavior:"auto"}),h}remove(){this.root=null,super.remove()}}d.register(),t.exports=d},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(127),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>f});var r=i(20),n=i.n(r),s=i(21),o=i.n(s),a=i(29),h=i.n(a),l=new URL(i(128),i.b),d=new URL(i(129),i.b),c=o()(n()),u=h()(l),p=h()(d);c.push([t.id,".mirae-board[mira-editor-el] {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  border: 0px;\n  background: #17171D;\n  overflow: scroll;\n  pointer-events: auto;\n  font-family: Helvetica, Arial;\n}\n.mirae-board[mira-editor-el].dragAdd {\n  cursor: copy !important;\n}\n.mirae-board[mira-editor-el] * {\n  font-family: Helvetica, Arial;\n}\n.mirae-board[mira-editor-el] ::before {\n  border: 0;\n  margin: 0;\n  padding: 0;\n  font-family: Helvetica, Arial;\n}\n.mirae-board[mira-editor-el] ::after {\n  border: 0;\n  margin: 0;\n  padding: 0;\n  font-family: Helvetica, Arial;\n}\n.mirae-board[mira-editor-el] * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.mirae-board[mira-editor-el].split-mode {\n  cursor: url("+u+") 7.5 9, auto;\n}\n.mirae-board[mira-editor-el].split-mode * {\n  cursor: url("+u+') 7.5 9, auto;\n}\n.mirae-board[mira-editor-el]::-webkit-scrollbar {\n  width: 15px;\n  height: 15px;\n}\n.mirae-board[mira-editor-el]::-webkit-scrollbar-corner {\n  display: none;\n}\n.mirae-board[mira-editor-el]::-webkit-scrollbar-track {\n  background: #17171D;\n}\n.mirae-board[mira-editor-el]::-webkit-scrollbar-thumb {\n  background: #59575F;\n  border-radius: 7.5px;\n}\n.mirae-board[mira-editor-el]::-webkit-scrollbar-thumb:hover {\n  background: #73707C;\n}\n.mirae-board[mira-editor-el] .cursor {\n  position: absolute;\n  top: 0;\n  width: 10px;\n  height: var(--boardHeight);\n  border-left: 1px solid #F8DD0B;\n  pointer-events: none;\n  z-index: 198;\n  z-index: 199;\n}\n.mirae-board[mira-editor-el] .cursor:before {\n  position: absolute;\n  left: -3.5px;\n  content: "";\n  width: 0;\n  height: 0;\n  border: 3px solid;\n  border-color: #F8DD0B transparent transparent;\n}\n.mirae-board[mira-editor-el] .cursor:after {\n  position: absolute;\n  left: 2px;\n  top: 12px;\n  padding: 0px 5px;\n  content: attr(data-time);\n  height: 18px;\n  background: rgba(54, 54, 91, 0.8);\n  color: #FFF;\n  font-size: 12px;\n  line-height: 18px;\n  border-radius: 3px;\n  opacity: 0;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.mirae-board[mira-editor-el] .mark {\n  position: absolute;\n  top: 0;\n  width: 10px;\n  height: var(--boardHeight);\n  border-left: 1px solid var(--miraeSelBorderColor);\n  pointer-events: none;\n  z-index: 198;\n}\n.mirae-board[mira-editor-el] .mark:before {\n  position: absolute;\n  left: -6.5px;\n  content: "";\n  width: 0;\n  height: 0;\n  border: 6px solid;\n  border-color: var(--miraeSelBorderColor) transparent transparent;\n}\n.mirae-board[mira-editor-el] .mark:after {\n  position: absolute;\n  left: 2px;\n  top: 12px;\n  padding: 0px 5px;\n  content: attr(data-time);\n  height: 18px;\n  background: rgba(54, 54, 91, 0.8);\n  color: #FFF;\n  font-size: 12px;\n  line-height: 18px;\n  border-radius: 3px;\n  opacity: 0;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.mirae-board[mira-editor-el] .mark.split {\n  border-left-width: 2px !important;\n}\n.mirae-board[mira-editor-el] .mark.error {\n  border-left: 1px solid #E33 !important;\n}\n.mirae-board[mira-editor-el] .mark.error:before {\n  border-color: #E33 transparent transparent !important;\n}\n.mirae-board[mira-editor-el] .pointer {\n  position: absolute;\n  top: 0;\n  width: 10px;\n  height: var(--boardHeight);\n  border-left: 1px solid #F8DD0B;\n  pointer-events: none;\n  z-index: 198;\n  border-left: 1px solid transparent;\n  z-index: 199;\n}\n.mirae-board[mira-editor-el] .pointer:before {\n  position: absolute;\n  left: -3.5px;\n  content: "";\n  width: 0;\n  height: 0;\n  border: 3px solid;\n  border-color: #F8DD0B transparent transparent;\n}\n.mirae-board[mira-editor-el] .pointer:after {\n  position: absolute;\n  left: 2px;\n  top: 12px;\n  padding: 0px 5px;\n  content: attr(data-time);\n  height: 18px;\n  background: rgba(54, 54, 91, 0.8);\n  color: #FFF;\n  font-size: 12px;\n  line-height: 18px;\n  border-radius: 3px;\n  opacity: 0;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.mirae-board[mira-editor-el] .pointer:after {\n  background: rgba(88, 88, 100, 0.5);\n}\n.mirae-board[mira-editor-el] .constraint {\n  position: absolute;\n  top: 0;\n  width: 10px;\n  height: var(--boardHeight);\n  border-left: 1px solid var(--miraeRefLineColor);\n  pointer-events: none;\n  z-index: 198;\n  border-left-style: dashed;\n}\n.mirae-board[mira-editor-el] .constraint:before {\n  position: absolute;\n  left: -0.5px;\n  content: "";\n  width: 0;\n  height: 0;\n  border: 0px solid;\n  border-color: var(--miraeRefLineColor) transparent transparent;\n}\n.mirae-board[mira-editor-el] .constraint:after {\n  position: absolute;\n  left: 2px;\n  top: 12px;\n  padding: 0px 5px;\n  content: attr(data-time);\n  height: 18px;\n  background: rgba(54, 54, 91, 0.8);\n  color: #FFF;\n  font-size: 12px;\n  line-height: 18px;\n  border-radius: 3px;\n  opacity: 0;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.mirae-board[mira-editor-el] .constraint:after {\n  display: none;\n}\n.mirae-board[mira-editor-el] .mirae-board-selection {\n  position: absolute;\n  z-index: 199;\n  border: 1px solid rgba(230, 230, 230, 0.6);\n  border-radius: 3px;\n  background: rgba(255, 255, 255, 0.3);\n}\n.mirae-board[mira-editor-el] .video-end-cover {\n  pointer-events: none;\n  position: absolute;\n  z-index: 200;\n  top: 0;\n  left: var(--endLeft);\n  height: var(--boardHeight);\n  width: calc(var(--maxWidth) + var(--trackHeadWidth) - var(--endLeft));\n  background: rgba(0, 0, 0, 0.5);\n  transition-duration: 0;\n  border-left: 2px dashed #666;\n}\n.mirae-board[mira-editor-el] .video-end-cover.animation {\n  transition-duration: 0.3s;\n  transition-property: left;\n}\n.mirae-loading-bg {\n  position: absolute;\n  background-color: rgba(0, 0, 0, 0.6);\n  background-image: url('+p+");\n  background-position: center;\n  background-size: 50px 50px;\n  background-repeat: no-repeat;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 201;\n}\n.mirae-loading-bg:before {\n  border: 0;\n  margin: 0;\n  padding: 0;\n  font-family: Helvetica, Arial;\n  content: attr(data-progress);\n  position: absolute;\n  height: 20px;\n  width: 50px;\n  top: calc(50% + 15px);\n  left: calc(50% - 25px);\n  color: #CCC;\n  font-size: 12px;\n  text-align: center;\n}\n.ruler-canvas {\n  position: absolute;\n  width: 100%;\n  height: 16px;\n  top: 0;\n  left: 0;\n  z-index: 100;\n  pointer-events: none;\n  margin: 0;\n  padding: 0;\n}\n",""]);const f=c},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2716%27 height=%2718%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cpath d=%27M3.205.716A.744.744 0 0 1 3.6.929l.079.095 6.476 9.97a3.242 3.242 0 0 1 2.125-.236c.77.176 1.474.63 1.953 1.326.478.696.65 1.517.54 2.298a3.242 3.242 0 0 1-1.156 2.057 3.242 3.242 0 0 1-2.244.732 3.242 3.242 0 0 1-2.147-.978 3.242 3.242 0 0 1-.92-2.174 3.243 3.243 0 0 1 .54-1.889l.134-.187-1.43-2.204-1.432 2.204c.472.611.695 1.347.674 2.076a3.242 3.242 0 0 1-.919 2.174 3.242 3.242 0 0 1-2.147.978 3.242 3.242 0 0 1-2.244-.732 3.242 3.242 0 0 1-1.156-2.057c-.11-.781.061-1.602.54-2.298a3.242 3.242 0 0 1 1.952-1.326 3.243 3.243 0 0 1 1.896.136l.23.1L6.651 8.36 2.417 1.83a.748.748 0 0 1-.08-.556c.522-.64.706-.589.868-.558zM11.55 12.18c-.483 0-.92.196-1.237.513A1.745 1.745 0 0 0 9.8 13.93c0 .483.196.92.513 1.238.317.316.754.512 1.237.512.484 0 .921-.196 1.238-.512.317-.317.512-.755.512-1.238s-.195-.92-.512-1.237a1.745 1.745 0 0 0-1.238-.513zm-8 0c-.483 0-.92.196-1.237.513A1.745 1.745 0 0 0 1.8 13.93c0 .483.196.92.513 1.238.317.316.754.512 1.237.512.484 0 .921-.196 1.238-.512.317-.317.512-.755.512-1.238s-.195-.92-.512-1.237a1.745 1.745 0 0 0-1.238-.513zM11.896.716c.8.21.83.398.868.558a.748.748 0 0 1-.08.557L8.75 7.899 7.852 6.52l3.576-5.506a.748.748 0 0 1 .468-.298z%27 fill=%27%23000%27 fill-rule=%27nonzero%27 stroke=%27%23FFF%27 stroke-width=%271%27/%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27utf-8%27%3F%3E%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 xmlns:xlink=%27http://www.w3.org/1999/xlink%27 style=%27margin: auto; background: none; display: block; shape-rendering: auto;%27 width=%27200px%27 height=%27200px%27 viewBox=%270 0 100 100%27 preserveAspectRatio=%27xMidYMid%27%3E%3Ccircle cx=%2730%27 cy=%2750%27 fill=%27%231fb0f9%27 r=%2720%27%3E%3Canimate attributeName=%27cx%27 repeatCount=%27indefinite%27 dur=%271s%27 keyTimes=%270;0.5;1%27 values=%2730;70;30%27 begin=%27-0.5s%27%3E%3C/animate%3E%3C/circle%3E%3Ccircle cx=%2770%27 cy=%2750%27 fill=%27%23f8dd0b%27 r=%2720%27%3E%3Canimate attributeName=%27cx%27 repeatCount=%27indefinite%27 dur=%271s%27 keyTimes=%270;0.5;1%27 values=%2730;70;30%27 begin=%270s%27%3E%3C/animate%3E%3C/circle%3E%3Ccircle cx=%2730%27 cy=%2750%27 fill=%27%231fb0f9%27 r=%2720%27%3E%3Canimate attributeName=%27cx%27 repeatCount=%27indefinite%27 dur=%271s%27 keyTimes=%270;0.5;1%27 values=%2730;70;30%27 begin=%27-0.5s%27%3E%3C/animate%3E%3Canimate attributeName=%27fill-opacity%27 values=%270;0;1;1%27 calcMode=%27discrete%27 keyTimes=%270;0.499;0.5;1%27 dur=%271s%27 repeatCount=%27indefinite%27%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E"},(t,e,i)=>{"use strict";i(131);const r=i(10),n=i(22);class s extends n{static TAG="mira-editor-menu";init(){return this.addClass("mirae-menu"),super.init()}addItem(t){const e=document.createElement("div");if(this.append(e),"object"!=typeof t)return e.classList.add("mirae-menu-line");const i=t.keys||[];e.innerHTML=`\n      <div class="mirae-menu-item-title">${t.title}</div>\n      <div class="mirae-menu-item-keys">${i.map((t=>`<div>${t}</div>`)).join("")}</div>\n    `,e.classList.add("mirae-menu-item"),!1===t.enable&&e.classList.add("mirae-menu-item-disable"),e.addEventListener("click",(e=>{e.preventDefault(),t.click&&t.click(e),this.remove()}))}setMenu(t){for(const e of t)this.addItem(e);return this}setPosition(t){const e=this.parentNode,i=new r(t).rebase(e),n=e.getBoundingClientRect(),s=this.getBoundingClientRect(),o={opacity:1};return n.width-(i.x-e.scrollLeft)>s.width+15?o.left=`${i.x}px`:o.left=i.x-s.width+"px",n.height-(i.y-e.scrollTop)>s.height+15?o.top=`${i.y}px`:o.top=i.y-s.height+"px",this.setStyle(o),this}remove(){return this.setStyle({opacity:0}),this.lock(300,(()=>super.remove()),"remove")}static create(t){const{parent:e,menu:i,event:r}=t;return super.create(e).setMenu(i).setPosition(r)}}s.register(),t.exports=s},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(132),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var r=i(20),n=i.n(r),s=i(21),o=i.n(s)()(n());o.push([t.id,".mirae-menu[mira-editor-el] {\n  margin: 0px;\n  padding: 0px;\n  display: block;\n  position: absolute;\n  overflow: hidden;\n  pointer-events: auto;\n  background: #1A191B;\n  border: 1px solid #393943;\n  border-radius: 3px;\n  z-index: 199;\n  opacity: 0;\n  transition-property: opacity, height;\n  transition-duration: 0.3s;\n  -webkit-user-select: none;\n  user-select: none;\n}\n.mirae-menu[mira-editor-el] * {\n  margin: 0px;\n  padding: 0px;\n}\n.mirae-menu[mira-editor-el] .mirae-menu-line {\n  height: 1px;\n  width: 100%;\n  background: #393943;\n}\n.mirae-menu[mira-editor-el] .mirae-menu-item {\n  display: flex;\n  min-width: 130px;\n  padding: 8px 12px;\n  align-items: center;\n  justify-content: center;\n  color: #FFF;\n}\n.mirae-menu[mira-editor-el] .mirae-menu-item.mirae-menu-item-disable {\n  color: #666;\n  cursor: not-allowed;\n}\n.mirae-menu[mira-editor-el] .mirae-menu-item:hover {\n  background: #3D3D48;\n}\n.mirae-menu[mira-editor-el] .mirae-menu-item .mirae-menu-item-title {\n  flex-grow: 1;\n  font-size: 12px;\n  margin-right: 15px;\n}\n.mirae-menu[mira-editor-el] .mirae-menu-item .mirae-menu-item-keys {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.mirae-menu[mira-editor-el] .mirae-menu-item .mirae-menu-item-keys div {\n  margin-left: 3px;\n  color: #FFF;\n  font-size: 12px;\n  min-width: 18px;\n  height: 18px;\n  background: #3e3e48;\n  border-radius: 2px;\n  line-height: 18px;\n  text-align: center;\n}\n",""]);const a=o},(t,e,i)=>{const r=i(2),{TYPE_SPINE:n,OP_MOVE:s,OP_END:o,CHANGING:a}=i(6),h=i(33);t.exports=class extends r{constructor(t,e){super({type:"clipgroup"}),this.board=t,this.nodes={},Array.isArray(e)?e.map((t=>this.toggleNode(t))):"object"==typeof e&&this.toggleNode(e)}get canUnlock(){return this.ns.filter((t=>t.groupId===this.id)).length>0}get canLock(){return this.ns.filter((t=>t.groupId!==this.id)).length>0&&this.ns.length>1}get ns(){return Object.values(this.nodes)}lock(){this.ns.map((t=>h.apply(t,{to:{groupId:this.id}},s))),this.emit(a,{action:o})}unlock(){this.ns.map((t=>h.apply(t,{to:{groupId:"NULL"}},s))),this.emit(a,{action:o})}moveDelta(t){let e=this.clips();e.sort(((t,e)=>t.node.startTime-e.node.startTime)),e[0].proxyState.left+t.x<0&&(t.x=-e[0].proxyState.left),e.map((e=>e.moveDelta(t)))}clips(){return this.mapClip((t=>t))}contains(t){return t&&this.nodes&&this.nodes[t.id]}mapClip(t){return this.ns.map((e=>this.board.clips[e.id]&&this.contains(e)?t(this.board.clips[e.id]):null)).filter((t=>t))}toggleNode(t){return this.groupSelect(t)||(this.contains(t)?delete this.nodes[t.id]:this.nodes[t.id]=t),this}virtualBox(t){const e=[];return this.ns.map((i=>{e.push(this.board.createBox(i,t))})),{remove:()=>{e.map((t=>t&&t.remove()))},show:()=>{}}}destroy(){super.destroy(),this.nodes=null,this.board=null}}},t=>{"use strict";t.exports=window.miraplayer},(t,e,i)=>{const r=i(100),n=i(63),s=i(136),o=i(25),a=i(34),h=i(140),l=i(146),d=i(11),c=i(26),u=i(64),p=i(35),f=i(137),m=i(141),g=i(147),v=[r,o,n,a,s,h,l];t.exports={Select:r,Resize:n,Move:o,Rotate:a,Crop:s,Fit:h,Constraint:l,MiraEditorBox:d,MiraEditorMove:c,MiraEditorResize:u,MiraEditorRotate:p,MiraEditorCrop:f,MiraEditorFit:m,MiraEditorLine:g,addControls:function(t,e){return v.filter((t=>!Array.isArray(e)||e.includes(t)||e.includes(t.type))).map((e=>t.controls[e.type.toLowerCase()]=new e(t)))}}},(t,e,i)=>{"use strict";const{CHANGING:r,SELECT:n}=i(6),s=i(64),o=i(137),a=i(25),{wrap:h}=i(7),{round:l,norm2d:d}=i(8),c=i(10),{LEFT:u,TOP:p,RIGHT:f,BOTTOM:m}=s;class g extends a{static type="crop";static TAG=s;constructor(t){super(t),this.wrap(this.selector,"fit").after((()=>{this.fit()})),this.timeupdate=()=>{this._controls?.origin&&this._controls?.origin.updateImage()},t.on("timeupdate",this.timeupdate)}fit(){this._controls.origin&&this._controls.cropped&&(this._controls.origin.fit(),this._controls.cropped.fit(),this.updateShow(this.box),this.box.resize())}show(t){return this}controls(){if("frame"!==this.node.cropMode)return{};const t={origin:{tag:o,canvas:this.node.material.canvas,styleClass:"origin"},originTopLeft:{box:"origin",pos:p|u,styleClass:"dot"},originTopRight:{box:"origin",pos:p|f,styleClass:"dot"},originBottomRight:{box:"origin",pos:m|f,styleClass:"dot"},originBottomLeft:{box:"origin",pos:m|u,styleClass:"dot"}},e={cropped:{tag:o,box:"origin",styleClass:"cropped"},left:{box:"cropped",pos:u,styleClass:"ver"},right:{box:"cropped",pos:f,styleClass:"ver"},top:{box:"cropped",pos:p,styleClass:"hor"},bottom:{box:"cropped",pos:m,styleClass:"hor"},topLeft:{box:"cropped",pos:p|u,styleClass:"dot"},topRight:{box:"cropped",pos:p|f,styleClass:"dot"},bottomRight:{box:"cropped",pos:m|f,styleClass:"dot"},bottomLeft:{box:"cropped",pos:m|u,styleClass:"dot"}};return this.selector.cropMode?{origin:t.origin,...e}:{...t,...e}}updateShow(t){if(!this._controls.origin||!this._controls.cropped)return;const e=.5*(this._controls.origin.size.width-this._controls.cropped.size.width),i=.5*(this._controls.origin.size.height-this._controls.cropped.size.height),{x:r,y:n}=this._controls.cropped.position,s={originTopLeft:[e+r,i+n],originTopRight:[e-r,i+n],originBottomRight:[e-r,i-n],originBottomLeft:[e+r,i-n]};for(const[e,i]of Object.entries(s))this._controls[e]&&this._controls[e].show(d(i)*t.scale>10)}getDelta(t){return t.target.constraint?t.target.constraint(t.delta):super.getDelta(t)}onMove(t){if(!this.canMove)return;const[e,i]=[this.node.material.width(),this.node.material.height()],r=this.node.getFrame(),n=this.getDelta(t),s="origin"===t.target.styleClass,o=t.target.parentNode===this._controls.origin||s;if(0!=this.box.rotation){const{x:t,y:e}=new c(n.position).rotate(-this.box.rotation);n.position={x:t,y:e}}const a={x:n.position?.x||0,y:n.position?.y||0,w:n.size?.width||0,h:n.size?.height||0},h={frame:a},l=this._controls.cropped.size,d=this._controls.cropped.position,u=this._controls.origin.size;this.selector.cropMode&&s?(a.x=e*(d.x+a.x)/(u.width+a.w)-e*d.x/u.width,a.y=i*(d.y+a.y)/(u.height+a.h)-i*d.y/u.height,a.w=a.h=0):o?(a.x=-(e*(d.x+a.x)/(u.width+a.w)-e*d.x/u.width),a.y=-(i*(d.y+a.y)/(u.height+a.h)-i*d.y/u.height),a.w=+(e*l.width/(u.width+a.w)-e*l.width/u.width),a.h=+(i*l.height/(u.height+a.h)-i*l.height/u.height)):(a.x*=e/u.width,a.y*=i/u.height,a.w*=e/u.width,a.h*=i/u.height);const[p,f]=t.target.direction||[0,0];if(r.x+a.x<0){if(!(s||p>0))return;a.x=-r.x}if(r.y+a.y<0){if(!(s||f>0))return;a.y=-r.y}if(r.x+r.w+a.x+a.w>e){if(!(s||p<0))return;a.x=e-(r.x+r.w+a.w)}if(r.y+r.h+a.y+a.h>i){if(!(s||f<0))return;a.y=i-(r.y+r.h+a.h)}if(this.selector.cropMode&&s){const t=(a.x+e*d.x/u.width)*u.width/e-d.x,r=(a.y+i*d.y/u.height)*u.height/i-d.y;if(h.position={x:t,y:r},0!=this.box.rotation){const{x:t,y:e}=new c(h.position).rotate(this.box.rotation);h.position={x:t,y:e}}}else if(!o){const e=t.target.constraint(t.delta,this.box.anchor);h.size=e.size,h.position=e.position}g.apply(this.node,h),this.fit()}get canMove(){return this.node&&this.box}onMoveStart(t){if(this.canMove)return this.node.emit(r,{action:`${this.constructor.type}start`}),this._controls.cropped.showGrid(),this}onMoveEnd(t){if(this.canMove)return this.node.emit(r,{action:`${this.constructor.type}end`}),this}destroy(){return this.editor.off("timeupdate",this.timeupdate),this.timeupdate=null,super.destroy()}}t.exports=g},(t,e,i)=>{"use strict";i(138);const{dmap:r}=i(9),n=i(26);class s extends n{static TAG="mira-editor-crop";static STYLE_CLASS="mirae-crop";setOpts(t){return super.setOpts(t),t.canvas&&(this.image=document.createElement("img"),this.image.setAttribute("mira-editor-el",""),this.image.src=t.canvas.toDataURL(),this.canvas=t.canvas,this.appendChild(this.image)),this.origin="origin"===t.styleClass,this.node=this.parentNode.node,this.fit(),this}updateImage(){this.image.src=this.canvas.toDataURL()}showGrid(){if(this.grid)return;this.grid=!0;const t=(t,e)=>{const i=document.createElement("div");return i.setAttribute("mira-editor-el",""),i.classList.add(t),e.appendChild(i),i};for(let e=0;e<3;e++){const e=t("mirae-grid-row",this);for(let i=0;i<3;i++)t("mirae-grid",e)}}fit(){this.origin?this.fitOrigin():this.fitFrame()}metrics(){const t=this.parentNode,e=this.node,[i,r]=[e.material.width(),e.material.height()],[n,s]=e.getWH(),o=e.getFrame(),a=Math.max(n/o.w,s/o.h);return this.rotation=t.rotation,this.scale=t.scale,this.anchor={x:0,y:0},[o,i,r,a]}setFrame(t){const e=this.parentNode;this.position={x:t.x,y:t.y},this.size={width:t.w,height:t.h},this.setStyleVars({"--x":t.x*e.scale+"px","--y":t.y*e.scale+"px","--width":t.w*e.scale+"px","--height":t.h*e.scale+"px"})}fitFrame(){const[t,e,i,r]=this.metrics(),[n,s]=[r*t.w+4,r*t.h+4],o=-(.5*(e-t.w)-t.x)*r,a=-(.5*(i-t.h)-t.y)*r;this.setFrame({x:o,y:a,w:n,h:s})}fitOrigin(){const[t,e,i,r]=this.metrics(),[n,s]=[r*e,r*i],o=(.5*(e-t.w)-t.x)*r,a=(.5*(i-t.h)-t.y)*r;this.setFrame({x:o,y:a,w:n,h:s})}resize(t){const e=t.size.width+this.size.width,i=t.size.height+this.size.height,r=t.position.x+this.position.x+.5*t.size.width,n=t.position.y+this.position.y+.5*t.size.height;this.setFrame({x:r,y:n,w:e,h:i})}remove(){this.canvas=null,this.image=null,super.remove()}}s.register(),t.exports=s},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(139),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var r=i(20),n=i.n(r),s=i(21),o=i.n(s)()(n());o.push([t.id,".mirae-crop.origin[mira-editor-el] {\n  border: 1px dotted var(--miraeBorderColor);\n  box-sizing: content-box;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: var(--width);\n  height: var(--height);\n  cursor: move;\n  pointer-events: auto;\n  transform: translate(var(--x), var(--y));\n}\n.mirae-crop.origin[mira-editor-el] img[mira-editor-el] {\n  opacity: 0.3;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.mirae-crop.origin[mira-editor-el] .cropped[mira-editor-el] {\n  border: 2px solid var(--miraeCropBorderColor);\n  position: static;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n  width: var(--width);\n  height: var(--height);\n  transform: translate(var(--x), var(--y));\n}\n.mirae-crop.origin[mira-editor-el] .mirae-grid-row[mira-editor-el] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: static;\n  width: 100%;\n  height: 100%;\n}\n.mirae-crop.origin[mira-editor-el] .mirae-grid-row[mira-editor-el] .mirae-grid[mira-editor-el] {\n  position: static;\n  border: 0.5px solid rgba(255, 255, 255, 0.5);\n  width: 100%;\n  height: 100%;\n  box-shadow: inset 0px 0px 2px 0px #666;\n}\n",""]);const a=o},(t,e,i)=>{"use strict";const r=i(141),n=i(25),{wrap:s}=i(7),{round:o}=i(8),{OP_END:a,CHANGING:h,CROPFRAME:l}=i(6);class d extends n{static type="fit";static TAG=r;static CHG_HOOK="setRotate";show(t){return void 0===t&&(t=!0),this._controls.fit&&this._controls.fit.show(t&&0===this.node.rotate),this._controls.crop&&this._controls.crop.show(t),this}controls(t){return!["video","image"].includes(this.node.type)||this.node.conf.asMask||this.node.cropMode?{}:{fit:{box:t.handleBox,styleClass:"fit"},crop:{box:t.handleBox,styleClass:"crop"}}}updateShow(t){return this.show()}onMoveStart(t){}onMove(t){}onMoveEnd(t){if(!(t.moved>5)&&this.node)if(t.target.hasClass("fit")){let t={};if("100vw"===this.node.conf.width&&"100vh"===this.node.conf.height){const e=this.node.material.width()/this.node.material.height();t=this.node.creator().width/this.node.creator().height>e?{height:"100vh",width:"NULL"}:{width:"100vw",height:"NULL"}}else t={width:"100vw",height:"100vh"};const e={to:{...t,x:"50vw",y:"50vh","object-fit":"cover"}};d.apply(this.node,e,"resize"),this.node.emit(h,{action:a}),this.box.resize()}else t.target.hasClass("crop")&&this.node.emit(l)}}t.exports=d},(t,e,i)=>{"use strict";i(142);const r=i(26),{deg:n}=i(8);class s extends r{static TAG="mira-editor-fit";static STYLE_CLASS="mirae-fit"}s.register(),t.exports=s},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(143),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>f});var r=i(20),n=i.n(r),s=i(21),o=i.n(s),a=i(29),h=i.n(a),l=new URL(i(144),i.b),d=new URL(i(145),i.b),c=o()(n()),u=h()(l),p=h()(d);c.push([t.id,'.mirae-fit.crop[mira-editor-el] {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: auto;\n  z-index: 3;\n  cursor: pointer;\n  position: relative;\n}\n.mirae-fit.crop[mira-editor-el].hide {\n  width: 0px;\n  height: 0px;\n  pointer-events: none;\n}\n.mirae-fit.crop[mira-editor-el]:after {\n  width: 20px;\n  height: 20px;\n  content: "";\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n  position: relative;\n  border-radius: 10px;\n  box-shadow: 0 0 5px 1px rgba(57, 76, 96, 0.15), 0 0 0 1px rgba(53, 71, 90, 0.2);\n  opacity: 1;\n  background: #FFF 2px no-repeat;\n  background-size: 16px;\n  z-index: 9;\n  transform: rotate(var(--revert-rot));\n  background-image: url('+u+');\n}\n.mirae-fit.fit[mira-editor-el] {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: auto;\n  z-index: 3;\n  cursor: pointer;\n  position: relative;\n}\n.mirae-fit.fit[mira-editor-el].hide {\n  width: 0px;\n  height: 0px;\n  pointer-events: none;\n}\n.mirae-fit.fit[mira-editor-el]:after {\n  width: 20px;\n  height: 20px;\n  content: "";\n  transition-property: opacity, width, height;\n  transition-duration: 0.3s;\n  position: relative;\n  border-radius: 10px;\n  box-shadow: 0 0 5px 1px rgba(57, 76, 96, 0.15), 0 0 0 1px rgba(53, 71, 90, 0.2);\n  opacity: 1;\n  background: #FFF 2px no-repeat;\n  background-size: 16px;\n  z-index: 9;\n  background-image: url('+p+");\n}\n.left[mira-editor-el] .mirae-fit.fit[mira-editor-el],\n.right[mira-editor-el] .mirae-fit.fit[mira-editor-el] {\n  transform: rotate(-90deg);\n}\n",""]);const f=c},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27 xmlns=%27http://www.w3.org/2000/svg%27 x=%276%27 y=%276%27 aria-hidden=%27true%27%3E%3Cpath d=%27M6 2.5a.5.5 0 0 0-1 0V5H2.5a.5.5 0 0 0 0 1H5v6.5A2.5 2.5 0 0 0 7.5 15H14v2.5a.5.5 0 0 0 1 0V15h2.5a.5.5 0 0 0 0-1h-10A1.5 1.5 0 0 1 6 12.5v-10Zm8 5V13h1V7.5A2.5 2.5 0 0 0 12.5 5H7v1h5.5c.83 0 1.5.67 1.5 1.5Z%27 fill=%27%23000%27%3E%3C/path%3E%3C/svg%3E"},t=>{"use strict";t.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 aria-hidden=%27true%27 width=%2720%27 height=%2720%27 viewBox=%270 0 20 20%27 fill=%27none%27%3E%3Cpath d=%27M4 6.5C4 6.43221 4.01349 6.36756 4.03794 6.30861C4.06198 6.25051 4.09744 6.19602 4.14433 6.14857L4.14857 6.14433C4.19602 6.09744 4.25051 6.06198 4.30861 6.03794C4.36756 6.01349 4.43221 6 4.5 6H6.5C6.77614 6 7 6.22386 7 6.5C7 6.77614 6.77614 7 6.5 7H5.70711L6.85355 8.14645C7.04882 8.34171 7.04882 8.65829 6.85355 8.85355C6.65829 9.04882 6.34171 9.04882 6.14645 8.85355L5 7.70711V8.5C5 8.77614 4.77614 9 4.5 9C4.22386 9 4 8.77614 4 8.5V6.5ZM4.03794 13.6914C4.01349 13.6324 4 13.5678 4 13.5V11.5C4 11.2239 4.22386 11 4.5 11C4.77614 11 5 11.2239 5 11.5V12.2929L6.14645 11.1464C6.34171 10.9512 6.65829 10.9512 6.85355 11.1464C7.04882 11.3417 7.04882 11.6583 6.85355 11.8536L5.70711 13H6.5C6.77614 13 7 13.2239 7 13.5C7 13.7761 6.77614 14 6.5 14H4.50049L4.497 14C4.37004 13.9992 4.24331 13.9504 4.14645 13.8536C4.09851 13.8056 4.06234 13.7504 4.03794 13.6914ZM15.6914 6.03794C15.7495 6.06198 15.804 6.09744 15.8514 6.14433L15.8557 6.14857C15.9026 6.19602 15.938 6.25051 15.9621 6.30861C15.9865 6.36756 16 6.43221 16 6.5V8.5C16 8.77614 15.7761 9 15.5 9C15.2239 9 15 8.77614 15 8.5V7.70711L13.8536 8.85355C13.6583 9.04882 13.3417 9.04882 13.1464 8.85355C12.9512 8.65829 12.9512 8.34171 13.1464 8.14645L14.2929 7H13.5C13.2239 7 13 6.77614 13 6.5C13 6.22386 13.2239 6 13.5 6H15.4999C15.5677 6 15.6324 6.01349 15.6914 6.03794ZM15.8514 13.8557C15.804 13.9026 15.7495 13.938 15.6914 13.9621C15.6324 13.9865 15.5678 14 15.5 14H13.5C13.2239 14 13 13.7761 13 13.5C13 13.2239 13.2239 13 13.5 13H14.2929L13.1464 11.8536C12.9512 11.6583 12.9512 11.3417 13.1464 11.1464C13.3417 10.9512 13.6583 10.9512 13.8536 11.1464L15 12.2929V11.5C15 11.2239 15.2239 11 15.5 11C15.7761 11 16 11.2239 16 11.5V13.5C16 13.5678 15.9865 13.6324 15.9621 13.6914C15.938 13.7495 15.9026 13.804 15.8557 13.8514L15.8514 13.8557ZM2 6C2 4.89543 2.89543 4 4 4H16C17.1046 4 18 4.89543 18 6V14C18 15.1046 17.1046 16 16 16H4C2.89543 16 2 15.1046 2 14V6ZM4 5C3.44772 5 3 5.44772 3 6V14C3 14.5523 3.44772 15 4 15H16C16.5523 15 17 14.5523 17 14V6C17 5.44772 16.5523 5 16 5H4Z%27 fill=%27currentColor%27%3E%3C/path%3E%3C/svg%3E"},(t,e,i)=>{"use strict";const{CHANGING:r,RESIZE:n,MAX:s}=i(6),{dmap:o}=i(9),{deg:a,rad:h}=i(8),l=i(5),d=i(31),c=i(2),u=i(34),p=i(25),f=i(147),m=i(11),g="canvas",v=["Shift"];class y extends d{constructor(t){super(t),this.limit=t.opts.refLineRange,this.selector=t.controls.select,this.refBounds={},this._controls={},this.wrap(this.selector,"showSelect").after(((t,e)=>{e&&e.visible&&e.getAnchor&&(this.createProxyNode(e),this.updateConstraint())}));const e=this;for(const i of["resize","rotate","move"])t.controls[i]&&(this.wrap(t.controls[i],"onMoveStart").after((()=>e.onMoveStart())),this.wrap(t.controls[i],"onMove").before((t=>[e.onMove(i,t[0])])),this.wrap(t.controls[i],"onMoveEnd").after((()=>e.onMoveEnd())))}events(){return{keydown:this.onKeyDown(),keyup:this.onKeyUp(),[n]:this.onResize()}}onKeyDown(){return t=>{Object.keys(p.KEY_MAP).includes(t.key)&&(this.limit=this.scale),v.includes(t.key)&&(this.limit=this.scale)}}onKeyUp(){return t=>{v.includes(t.key)&&(this.limit=this.editor.opts.refLineRange),this.lock(1e3,(()=>this.hideAll()),"hide")}}onResize(){return t=>{this.container&&this.container.remove(),this.container=null,this.lock(500,(()=>this.updateConstraint()),"resize")}}initContainer(){for(this.container||(this.container=document.createElement("div"),this.container.classList.add("mirae-constraint"),this.container.setAttribute("mira-editor-el","")),this.container.parentNode!==this.selector.container&&(this.container.remove(),this.selector.container.append(this.container));this.container.firstChild;)this.container.removeChild(this.container.firstChild);this.refBounds={},this.scale=this.editor.scale}onMoveStart(){this.ref={}}onMove(t,e){if(!this.selected||!this.editor.opts.enableCanvasConstraint)return e;if(this.editor.controls.move?.editMode)return e;this.limit=e.event.shiftKey?this.scale:this.editor.opts.refLineRange;const i=this.editor.controls[t].getDelta(e);return d.apply(this.selected,i,"proxy"),"function"==typeof this[t]&&this[t].call(this,e,i),e}onMoveEnd(){this.hideAll()}createProxyNode(t){if(t.cropMode)return this.selected=null;if(this.selected&&this.selected.destroy(),this.selected=c.from(t),this.editor.opts.debugCanvasConstraint){const{container:t,scale:e}=this;this.debug_box&&this.debug_box.remove(),this.debug_box=m.create({node:this.selected,container:t,scale:e}).addClass("mirae-debug-box"),this.selected.on(r,(()=>this.debug_box.fit(e)))}}updateConstraint(){this.initContainer();const t=this.selector.recordTarget();if(!t)return;const e=Array.isArray(t)?t.map((t=>t.id)):[t.id],i=Object.values(this.editor.nodes).filter((t=>!e.includes(t.id)&&t.visible));for(const t of i)if("creator"===t.type){const e={w:t.getConf("width"),h:t.getConf("height")};this.canvas=this.refBounds.canvas=l.from(e).expand(-this.editor.opts.canvasMarginRef)}else t.getAnchor&&(this.refBounds[t.id]=m.create({node:t}).bounds())}resize(t,e){this._resizeTarget&&this._resizeTarget==t.target||(this._resizeTarget=t.target,this.createProxyNode(this.selector.selected),d.apply(this.selected,e,"proxy"));const i=this.selected.bounds(),r=this.selector.selectedBox.bounds(),n=t.target.boundingConstraint(),a={x:[s,null],y:[s,null]};for(const e of["x","y"]){const o=`${e}s`,h=i[o].call(i),l=(r[o].call(r),h.map(((t,i)=>n[e][i]?t:s)));if(0===l.filter((t=>t!==s)).length)continue;for(const[t,i]of Object.entries(this.refBounds)){const r=i[o].call(i),n=y.minDist(l,r);n[0]<a[e][0]&&(a[e]=[...n,t])}const d=t.target.reverse({[e]:a[e][0]},!0);a[e][0]=d?d.r:s}const h=a.x[0]<a.y[0]?"x":"y",l=a[h];this.stick({k:h,oriRect:r,rect:i,r:l,setEventDelta:(e,i,r)=>{if(e===i)return t.delta={x:0,y:0};const n=0===r?-1:1,s=n*(i-e>0?1:-1),a=t.target.reverse({[h]:n*Math.abs(i-e)});a&&(t.delta=o(a,(t=>t*s)),this.hideLine("x"===h?"y":"x"))}})}rotate(t){const e=a(this.selected.getRotation(),2),i=this.selector.selected,n=90*Math.round(e/90),s=n%180==0?"x":"y";if(Math.abs(e%90)<.5*this.limit){const e=`rot_${n}`;if(t.delta={x:0,y:0},!this.ref[s]||this.ref[s]!==e){const t=h(n),o=i.creator().currentTime/1e3;i.setRotate(t),i.emit(r,{action:u.type,delta:t-i.getRotation(),time:o}),this.ref[s]=e;const a=this.selector.selectedBox.position,l=this.selected.bounds().expand(30);this.showLine("x",a.x,[l]),this.showLine("y",a.y,[l])}}else this.ref[s]&&(this.ref[s]=null,this.hideAll())}move(t){if(!this.selected||!this.selector.selectedBox)return;const e=this.selected.bounds(),i=this.selector.selectedBox.bounds(),r={x:[s,null],y:[s,null]};for(const[t,i]of Object.entries(this.refBounds)){const{x:n,y:s}=y.minDist(e,i);n[0]<r.x[0]&&(r.x=[...n,t]),s[0]<r.y[0]&&(r.y=[...s,t])}for(const[n,s]of Object.entries(r)){s[0]*=this.scale;const r=(e,i)=>t.delta[n]=(i-e)*this.scale;this.stick({k:n,oriRect:i,rect:e,r:s,setEventDelta:r})}}stick({k:t,oriRect:e,rect:i,r:[r,n,s,o],setEventDelta:a}){if(!this.ref)return;const h=(t,i,r,n)=>{const s=`${t}s`,o=i<0?0:e[s].call(e)[i],h=r<0?0:n[s].call(n)[r];return a(o,h,i,r),h};if(r<this.limit){const i=this.refBounds[o],r=`${n}_${s}_${o}`;let a;this.ref[t]&&this.ref[t]===r?a=h(t,-1,-1):(a=h(t,n,s,i),this.hideLine(t),this.ref[t]=r),this.showLine(t,a,[e,i],o===g?g:null)}else this.ref[t]&&(h(t,n,n,i),this.hideLine(t))}showLine(t,e,i,r=null){const n="x"===t?"ys":"xs",s=i.reduce(((t,e)=>e[n].call(e,!1).concat(t)),[]),o=[Math.min(...s),Math.max(...s)];if(this._controls[t])this._controls[t].range(o);else{const{container:i,scale:n,canvas:s}=this;this._controls[t]=f.create({container:i,scale:n,type:t,val:e,range:o,key:r,canvas:s})}return this}hideLine(t){return this._controls[t]&&this._controls[t].remove(),this._controls[t]=null,this.ref[t]=null,this}hideAll(){Object.keys(this._controls).map((t=>this.hideLine(t)))}remove(){this.hideAll(),this.container=null,this.debug_box&&this.debug_box.remove(),this.debug_box=null}static minDist(t,e){if(t instanceof DOMRect&&e instanceof DOMRect)return{x:this.minDist(t.xs(),e.xs()),y:this.minDist(t.ys(),e.ys())};if(Array.isArray(t)&&Array.isArray(e)){let i=[s,-1,-1];for(const[r,n]of t.entries())for(const[t,s]of e.entries()){const e=Math.abs(n-s);e<i[0]&&(i=[e,r,t])}return i}}}t.exports=y},(t,e,i)=>{"use strict";i(148);const r=i(22);class n extends r{static TAG="mira-editor-line";static STYLE_CLASS="mirae-line";init(){return this.addClass(this.constructor.STYLE_CLASS),super.init()}get opType(){return"x"===this.type?"y":"x"}range(t){t=this.forceRange||t;const e=Math.floor(t[0]*this.scale),i=Math.ceil((t[1]-t[0])*this.scale);return this.setStyleVars({[`--${this.opType}`]:`${e}px`,"--len":`${i}px`})}setOpts({type:t,val:e,range:i,scale:r,key:n,canvas:s}){if(this.scale=r,this.type=t,"canvas"===n){if(this.addClass(`${this.constructor.STYLE_CLASS}-solid`),e=e.toFixed(1),"x"===t&&s.center.x.toFixed(1)!==e||"y"===t&&s.center.y.toFixed(1)!==e)return this.showCanvasBounds({val:e,range:i,canvas:s});this.forceRange=[0,2*s.center[this.opType]]}else n&&this.addClass(`debug-${n}`);return this.setStyleVars({[`--${t}`]:`${Math.floor(e*r)}px`}).range(i)}showCanvasBounds({val:t,range:e,canvas:i}){this.addClass(`${this.constructor.STYLE_CLASS}-canvas`);const r={"--x":`${Math.floor(i.x*this.scale)}px`,"--y":`${Math.floor(i.y*this.scale)}px`,"--width":`${Math.ceil(i.width*this.scale+1)}px`,"--height":`${Math.ceil(i.height*this.scale+1)}px`};return this.forceRange=[i[this.type],0],this.setStyleVars(r)}static create(t){const{container:e,type:i}=t,r=`${this.STYLE_CLASS}-${i}`;return super.create(e).addClass(r).setOpts(t)}}n.register(),t.exports=n},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>v});var r=i(13),n=i.n(r),s=i(14),o=i.n(s),a=i(15),h=i.n(a),l=i(16),d=i.n(l),c=i(17),u=i.n(c),p=i(18),f=i.n(p),m=i(149),g={attributes:{mira:"editor"}};g.styleTagTransform=f(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=u(),n()(m.default,g);const v=m.default&&m.default.locals?m.default.locals:void 0},(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var r=i(20),n=i.n(r),s=i(21),o=i.n(s)()(n());o.push([t.id,".mirae-constraint[mira-editor-el] {\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  background: transparent!important;\n  z-index: 9;\n  text-align: center;\n}\n.mirae-line[mira-editor-el] {\n  pointer-events: none;\n  box-sizing: border-box;\n  width: 0px;\n  height: 0px;\n  left: 0;\n  top: 0;\n  transform-origin: center;\n  transform: translate(var(--x), var(--y));\n}\n.mirae-line[mira-editor-el].mirae-line-x {\n  width: 1px;\n  height: var(--len);\n  border-left: 1px dashed var(--miraeRefLineColor);\n}\n.mirae-line[mira-editor-el].mirae-line-x.mirae-line-solid {\n  border-left: 1px solid var(--miraeRefLineColor);\n}\n.mirae-line[mira-editor-el].mirae-line-y {\n  height: 1px;\n  width: var(--len);\n  border-top: 1px dashed var(--miraeRefLineColor);\n}\n.mirae-line[mira-editor-el].mirae-line-y.mirae-line-solid {\n  border-top: 1px solid var(--miraeRefLineColor);\n}\n.mirae-line[mira-editor-el].mirae-line-canvas {\n  width: var(--width);\n  height: var(--height);\n  border: 1px solid var(--miraeRefLineColor);\n}\n",""]);const a=o}],e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),i.b=document.baseURI||self.location.href;var r={};(()=>{"use strict";i.r(r),i.d(r,{default:()=>W});var t=i(1),e=i.n(t),n=(i(8),i(79)),s=i.n(n),o=i(80);const{InteractionManager:a,interactiveTarget:h}=i(81),{CHANGING:l,CHANGED:d,SELECT:c,HOVER:u,RESIZE:p,TYPE_SPINE:f,OP_MOVE:m,OP_END:g,OP_ADD:v,OP_SPLIT:y,OP_CHANGE:x,VERSION:E,CROPFRAME:b,OP_DELETE:w}=i(6),C=i(3),{History:_,Record:T}=i(32),{dmap:M,zip:O}=i(9),{Interaction:k}=i(97),L=i(99),N=i(33),{mixin:S}=i(7),A={majorColor:"#1FB0F9",selectedColor:"#1FB0F9",highlightColor:"#B2B5B6",cropColor:"#E33",refLineColor:"#F8DD0B",textSelectionColor:"#7FD4FF",textCursorColor:"#EFEFEF",types:{},refLineRange:10,canvasMarginRef:30,enableCanvasConstraint:!0,enableTrackConstraint:!0,menuItems:[],enableKeyboard:!0,keyboardPlay:!1,tapPlay:!1,cover:!1,enableCursorPreview:!0,enableClipMark:!1,enableGroup:!0,enableDragChangeParent:!0,followTimeMark:!0,debugCanvasConstraint:!1},R={gif:!0,text:!0,rect:!0,image:!0,video:!0,richtext:!0},I={get mctrlKey(){return this.ctrlKey||this.metaKey}};let P,D,B,F,U;S({src:I,dst:KeyboardEvent}),S({src:I,dst:MouseEvent});class H extends C{constructor(t){if(super(),!(()=>{if(P)return!0;P=i(134),D=P.utils.ColorUtil.color,B=P.utils.CacheUtil.cachedResource,F=P.utils.CacheUtil.cacheNode,U=P.TYPES;const{CanvasRenderer:t,WebGLRenderer:e,DisplayObject:r}=P.InkPaint;return t.registerPlugin("interaction",a),e.registerPlugin("interaction",a),S({src:h,dst:r}),!0})())throw new Error("player.js need loaded!");this.initOptions(t),this.initHistory(),this.enabled=!1,this.queue=new(s()),this._keyHist=[],this.controls={};const e=this.opts.previewContainer;if(!e.offsetWidth||!e.offsetHeight)throw new Error("player container null size!");this.playerWrapper=P.create(e,this.opts),this.player=this.playerWrapper.player,this.initEvents()}initEvents(){this.nodes={},this.nodeCbs={},this.nodeCbs[l]=t=>this.emit(l,t),this.nodeCbs[u]=t=>this.emit(u,t),this.nodeCbs[c]=this.onSelect(),this.nodeCbs[b]=this.onCrop(),this.bodyCbs={},this.bodyCbs.keyup=this.onKeyUp(!0),this.bodyCbs.keydown=this.onKeyDown(!0),this.bodyCbs.mousemove=this.onMouseMove(!0),this.bodyCbs.mouseout=this.onMouseMove(!0),this.docCbs={},this.docCbs.click=this.onDocClick(),this.playerCbs={},this.playerCbs.emptied=()=>this.disable(),this.playerCbs.pause=t=>{this.enable(),this.emit("pause",t)},this.playerCbs.ended=t=>{this.enable(),this.emit("ended",t)},this.playerCbs.playing=t=>{this.disable(),this.controls.select&&this.controls.select.hideAll(),this.emit("playing",t)},this.playerCbs.timeupdate=t=>{this.emit("timeupdate",t)},this.playerCbs.resize=()=>{this.initContainer(this.playerWrapper.container)},this.playerCbs.canplay=t=>{this.enable();const e=this.opts.trackContainer;if(e){if(!e.offsetWidth||!e.offsetHeight)throw new Error("track container null size!");this.initTrackBoard(this.opts.trackContainer)}this.emit("canplay",t),this.emit("ready",t)},this.applyPlayerEvents(!0)}initOptions(t){this.opts=t||{};for(const[t,e]of Object.entries(A))void 0===this.opts[t]&&(this.opts[t]=e);for(const[t,e]of Object.entries(R))void 0===this.opts.types[t]&&(this.opts.types[t]=e);this.colors={"--miraeBorderColor":D(this.opts.majorColor,100),"--miraeCropBorderColor":D(this.opts.cropColor,100),"--miraeSelBorderColor":D(this.opts.selectedColor,100),"--miraeRefLineColor":D(this.opts.refLineColor,100),"--miraeHighlightColor":D(this.opts.highlightColor,100)}}initHistory(){this._history=new _(this),this._history.on(_.EVENTS.change,(t=>{this.updateNodes(t.record);const{currentIndex:e}=this._history;this.emit(d,{...t,currentIndex:e,action:t.record.action})})),this._history.on(_.EVENTS.undo,(t=>{this.updateNodes(t.record,!0),this.emit(d,{...t,action:t.type})})),this._history.on(_.EVENTS.redo,(t=>{this.updateNodes(t.record,!1),this.emit(d,{...t,action:t.type})}))}initContainer(t){for(const e of t.querySelectorAll(".mira-editor"))e!==this.container&&t.removeChild(e);if(!this.container||this.container.parentElement!==t){this.container&&(this.parents=null,this.container.remove()),this.container=document.createElement("div"),this.container.classList.add("mira-editor"),this.container.setAttribute("mira-editor-el","");for(const[t,e]of Object.entries(this.colors))this.container.style.setProperty(t,e);for(t.append(this.container),this.onCtrClick=this.onCanvasClick(),t.addEventListener("click",this.onCtrClick),this.parents=[t];t=t.parentElement;)this.parents.push(t)}if(this.container.style.top="-100%",this.container.style.width=this.player.canvasStyle.width,this.container.style.height=this.player.canvasStyle.height,this.container.style.margin=this.player.canvasStyle.margin,this.emit(p),!0!==this.player.opts.hideControls){const t=this.player.$refs.player;t.style.overflow="visible";const e=t.querySelectorAll(".mirap-controls")[0];e.style.bottom="-39px",e.style.background="#333"}}initTrackBoard(t){for(const e of t.querySelectorAll(".mira-editor"))e!==this.board&&t.removeChild(e);this.board&&this.board.container===t||(this.board&&this.board.destroy(),this.board=new L(this.player.creator,t,this)),this.keyboardPlay||(this.keyboardPlay=t=>{if(!this.opts.enableKeyboard)return;const e=this.controls?.select;" "===t.key&&e&&(e.locked("togglePlay")||(e.lock(300,null,"togglePlay"),this.playerWrapper.playing?this.playerWrapper.pause():this.enabled&&this.playerWrapper.play()),t.preventDefault())},document.body.addEventListener("keydown",this.keyboardPlay))}boardScale(t){this.board.onScale(t)}log(...t){this.player&&this.player.log(...t)}error(...t){console.error(...t)}get playing(){return this.playerWrapper.playing}play(){this.playerWrapper.play()}pause(){this.playerWrapper.pause()}get preview(){return this.playerWrapper}get scale(){return this.player&&this.player.scale}get duration(){return this.player.creator.duration}get currentTime(){return this.player.opts.currentTime}set currentTime(t){if(this.currentTime.toFixed(3)!==t.toFixed(3))return this.board?this.board.mark(t):this.player.seek(t)}get spineTrack(){return this.board.tracks.find((t=>t.type==f))}get creator(){return this.player.creator}get canvas(){return this.creator.app.view}toast(t,e){this.player&&this.player.toast(t,e)}dispatch(t){this.enabled&&this.emit(t.type,t)}updateNodes(t,e=!1){t.mapAttr(((t,e)=>{t&&t.active&&t.parent&&(t.updateAnimations&&t.updateAnimations(),t.allNodes.map((t=>t.updateAnimations&&t.updateAnimations())))}))}onMouseMove(){return t=>{this.enabled&&(this.lastMouseEvent=t,this.emit("mousemove",t),this.board?.withMulti&&!t.mctrlKey&&this.board.enableMulti(!1),this.controls?.select?.withMulti&&!t.mctrlKey&&this.controls.select.enableMulti(!1))}}enableKeyboard(t){this.opts.enableKeyboard=t}onKeyUp(t){return t=>{this.enabled&&this.opts.enableKeyboard&&this.emit(t.type,t)}}onKeyDown(t){return t=>{if(!this.enabled||!this.opts.enableKeyboard)return;const e=`${t.key}`.toLowerCase();this._keyHist.push(e),this._keyHist.length>30&&this._keyHist.splice(0,this._keyHist.length-30),this._keyHist.join("").endsWith("showmethecode")?(async()=>{let t=await this.toJson();t=JSON.stringify(t,null,2);try{navigator.clipboard.writeText(t),this.player.toast("source copied!")}catch(t){}})():this._keyHist.join("").endsWith("showmetheversion")&&this.player.toast(`E:${this.version} * P:${this.player.version}`,3e4);const i=`keyboard_${e}`;if(this.controls.select?.locked(i))return t.preventDefault();if("z"===e&&t.mctrlKey)t.shiftKey?this.redo():this.undo();else if("y"===e&&t.mctrlKey)this.redo();else if("enter"!==e||"frame"!==this.selected[0]?.cropMode||this.controls.select.cropMode)if("escape"===e)this.board&&this.board.hasMenu()?this.board.hideMenu():(this.emit(c),this.board&&this.board.escape());else{if(!["+","-","=","_"].includes(e)||!this.board||"board"!==this.responder)return this.emit(t.type,t);{let i=["-","_"].includes(e)?-.01:.01;(t.mctrlKey||t.shiftKey)&&(i*=10),this.board.onScale(this.board.relativeScale+i)}}else this.setCropMode(!1);this.controls.select.lock(100,null,i),t.preventDefault()}}applyPlayerEvents(t){const e=this.playerWrapper;for(const[i,r]of Object.entries(this.playerCbs))t?e.on(i,r):e.off(i,r)}enable(t=null){this.enabled=!0,t=t||this.opts,this.apply({...t,enable:!0}),this.emit("enable",{enabled:!0});for(const[t,e]of Object.entries(this.bodyCbs))document.body.addEventListener(t,e);for(const[t,e]of Object.entries(this.docCbs))document.addEventListener(t,e)}disable(t=null){this.enabled=!1,t=t||this.opts,this.apply({...t,enable:!1}),this.emit("enable",{enabled:!1});for(const[t,e]of Object.entries(this.bodyCbs))document.body.removeEventListener(t,e);for(const[t,e]of Object.entries(this.docCbs))document.removeEventListener(t,e)}getActions(t,e){return t&&e?!e.display||e.conf.asMask?[]:["base"]:null}apply(t){let{node:e,types:i,enable:r,recursive:n}=t;const s=r?k.bindActions:k.unbindActions;if(e=e||this.player.creator,!e)return;const o=this.getActions(i,e);if(null!==o){s(e,o);for(const[t,i]of Object.entries(this.nodeCbs))r&&!e.listeners(t).includes(i)?e.on(t,i):r||e.off(t,i);r?this.nodes[e.id]=e:delete this.nodes[e.id]}!1!==n&&e.children&&e.children.length>0&&e.children.map((e=>this.apply({...t,node:e})))}onCrop(){return t=>{this.canCropFrame&&this.selected[0]===t.target&&this.setCropMode(!0)}}onSelect(){return t=>{this.emit(c,t),this.controls.select.lock(100,null,`select-${t.target?.id||"NULL"}`)}}onDocClick(){return t=>{this.board&&this.board.hideMenu()}}onCanvasClick(){return t=>{this.controls.select.locked("select")||this.controls.select.lock(100,(()=>{this.emit(c)}),"select")}}undo(t=1,e=!0){e&&this.controls.select.hideAll();const i=this._history.undo(t);e&&i.some((t=>[v,w].includes(t.action)))&&this.emit(c)}redo(t=1,e=!0){e&&this.controls.select.hideAll();const i=this._history.redo(t);e&&i.some((t=>[v,w].includes(t.action)))&&this.emit(c)}get history(){return this._history.records}get currentHistoryIndex(){return this._history.currentIndex}get selected(){const t=this.board?this.board.selected:this.controls?.select?.selected;return t&&t.nodes?Object.values(t.nodes):t?[t]:[]}appendHistory(t){this._history.append(t)}hideSelect(){this.controls?.select&&this.controls?.select.hideSelect(),this.board&&this.board.hideSelect(),this.emit(c)}async delNode(t,i=!0){if(this.enabled&&this.controls?.select)return await this.queue.enqueue((async()=>{const r=new(e())(t);r.addEventsTo(this,!0),this.controls.select.delete(r,i);const n=this.controls.select.record;return r.addEventsTo(this,!1),r.destroy(),i||(this.controls.select.record=null),n}))}dragAdd(t){Array.isArray(t)||(t=[t]),this.dragNodes=[];for(const e of t){if(!e||!e.type)continue;let t=U.node;"trans"===e.type&&(e.parent=this.creator.children.find((t=>"spine"===t.type)),t=U.trans),e.parent||(e.parent=this.creator);const i=new t(e);i.isVirtual=!0,i.display=null,i.id=`vn_${i.id}`,this.dragNodes.push(i)}}async dragEnd(){if(this.board.dragClips){const t=this.board.dragClips.map((t=>{const e=t.node.toJson();if(e.parent=t.node.parent,e.trackId=t.shadowTrack.id,t.node.parent?.type===f){delete e.start;const i=t.node.nextSibling;i&&this.nodes[i.id]&&(e.nextSibling=i)}return t.node.parent&&t.node.parent.removeChild(t.node),t.node.destroy(),t.destroy(),e}));if(t.length&&t[0].type){this.hideSelect();let e=null;const i=[];for(const r of t.reverse()){r.parent?.type===f&&!r.nextSibling&&e&&(r.nextSibling=e);const{node:t}=await this.addNode(r.type,r);e=t,i.push(t)}i.length>0&&i[0].emit(c,{action:"multi",nodes:i})}}this.dragCancel()}dragCancel(){this.board.dragEnd(),this.dragNodes?.map((t=>t.remove().destroy())),this.dragNodes=null}async addNode(t,e,i=!0,r=null){if(!this.enabled)return!1;if("video"===t&&(!Array.isArray(e)&&!e.start&&!e.parent||Array.isArray(e)&&0===e.filter((t=>t.start||t.parent)).length)){const t=this.creator.children.find((t=>"spine"===t.type));t&&!t.children.length&&(Array.isArray(e)?e.map((e=>{e.parent=t})):e.parent=t)}return await this.queue.enqueue((async()=>this.add(t,e,i,r)))}async add(t,e,i=!0,r=null){i&&this.board&&this.board.showLoading();const n=this.player.creator;if(Array.isArray(e)){this.board?.showProgress(.01);const r=[],n={};let s=0;for(const i of e){const o="object"==typeof i&&i.type?i.type:t,{node:a,nodes:h,delta:l}=await this.add(o,i,!1,(t=>{this.board?.showProgress(s/e.length+t/e.length)}));"object"==typeof i&&(i.node=a),Array.isArray(h)?h.map((t=>{r.push(t),l[t.id]&&(n[t.id]=l[t.id])})):(r.push(h),n[a.id]=l),s++,this.board?.showProgress(s/e.length)}const o=new T(v,r,n);return i&&this._history.append(o),this.board?.hideLoading(),{nodes:r,delta:n,record:o}}r||(r=t=>this.board?.showProgress(t));const s="object"==typeof e?{...e}:{};if(s.canvasWidth=n.width,s.canvasHeight=n.height,["video","image"].includes(t)){if("string"==typeof e&&(s.src=e),!s.width&&!s.height)if(s.userfile?.file?.width&&s.userfile?.file?.height){const t=s.userfile?.file?.width/s.userfile?.file?.height;n.width/n.height>t?s.height="100vh":s.width="100vw"}else s.width="100vw",s.height="100vh";void 0===s.x&&(s.x="50vw"),void 0===s.y&&(s.y="50vh")}"audio"===t&&"string"==typeof e&&(s.src=e),"text"===t&&("string"==typeof e&&(s.text=e),s.width||(s.width="100vw"),void 0===s.x&&(s.x="50vw"),void 0===s.y&&(s.y="80vh"),s.fontSize||(s.fontSize=30),s.fontFamily||(s.fontFamily="https://mira-1255830993.cos.ap-shanghai.myqcloud.com/fonts/OPPOSansMedium.ttf"),s.stroke||(s.stroke={color:"#000000",size:"10%"}),s.wrap=!0);let o,a=n;if(s.parent&&n.allNodes.includes(s.parent)&&(a=s.parent),s.nextSibling&&n.allNodes.includes(s.nextSibling)&&(o=s.nextSibling,delete s.nextSibling),!(a===n||this.nodes[a.parent.id]?.children.includes(a)&&Object.values(this.nodes).includes(a)))throw new Error("Make sure parent exists and is not Proxy!!!");s.type||(s.type=t),s.parent||(s.parent=a);const h=await this.player.genNode(s,(t=>{console.log("genNode",t)}));s.trackId&&(h.trackId=s.trackId,h.trackId===this.spineTrack?.id&&a.type!==f&&(h.trackId=null));const d=h.allNodes;let c=1;if(d.length){c=0;for(const t of d)c+=1/(d.length+1),await t.preProcessing((t=>{r&&r(.3+.7*c*t)}))}if(await h.preProcessing((t=>{r&&r(.3+.7*c*t)})),h.annotate(),await h.prepareMaterial(),d.length)for(const t of d)t.annotate(),await t.prepareMaterial();h.remove();const u={parent:a};o&&(u.nextSibling=o);let p=N.apply(h,{to:u},v),m=h;a!==n&&(p={[h.id]:p,[a.id]:N.apply(a,{to:{changed:!0}},x)},m=[h,a]);const y=new T(v,m,p);i?this._history.append(y):this.updateNodes(y);const E={types:this.opts.types,recursive:!0,enable:!0};return this.apply({...E,node:h}),h.emit(l,{action:g}),i&&this.board&&this.board.hideLoading(),"object"==typeof e&&(e.node=h),this.board&&this.board.scrollToVisible(h),{node:h,nodes:m,delta:p,record:y}}async applyChange(t,e,i=!0,r=x){return!!this.enabled&&await this.queue.enqueue((async()=>{let n={};this.board&&this.board.showLoading();let s=0,o=1;const a=async(t,e,i)=>{let r=!1;if(B){const i=["text"],n={src:"cachedSrc",fontFamily:"cachedFontFamily"};for(const a of Object.keys(n)){if(!e[a]?.startsWith("http")||!i.includes(t.type))continue;const{url:h}=await B(e[a],(({total:t,loaded:e})=>{this.board?.showProgress(s+e/(t*o))}));e[n[a]]=h,r=!0;break}}return await N.set(t,e,i,(t=>{!r&&this.board?.showProgress(s+t/o)}))};if(Array.isArray(t)){let i=0;o=t.length;for(const h of t)s=i/o,i+=1,h&&e[h?.id]&&(n[h.id]=await a(h,e[h.id],r));n.time=t[0].absShowStartTime}else{if(!t?.type)return void(this.board&&this.board.hideLoading());n=await a(t,e,r),n.time=t.absShowStartTime}const h=new T(r,t,n);return i?this._history.append(h):this.updateNodes(h),this.board&&this.board.hideLoading(),this.controls.select&&this.controls.select.lock(100,(()=>{this.controls.select.fit()}),"fit"),h}))}async split(t,e=null,i=!0){return await this.queue.enqueue((async()=>{if(e=e||this.board.currentMarkTime(),!t||!e||Math.min(e-t.absStartTime,t.absEndTime-e)<.2)return!1;this.board&&this.board.showLoading();const r=await this.cloneNode(t),n={parent:t.parent,active:!0};t.conf.end&&(n.end="NULL"),n.duration=e-t.absStartTime,t.parent.isTrack&&(n.nextSibling=t);const s={};t.conf.end&&(s.end="NULL"),t.parent.isTrack||(s.start=t.startTime+n.duration),t.material&&!t.loop&&(s.ss=t.material.getStartOffset()+n.duration),s.duration=t.duration-n.duration;let o=[];for(const i of t.children)i.absStartTime<e&&o.push(i.id);const a=[...t.children,t,r];N.apply(r,{to:n},y,{relativeNodes:a}),N.apply(t,{to:s},y,{relativeNodes:a});for(const e of t.children)if(o.includes(e.id))N.apply(e,{to:{parent:r}},y,{relativeNodes:a});else{const t=e.startTime-n.duration;N.apply(e,{to:{start:t}},y,{relativeNodes:a})}i&&t.emit(l,{action:g}),this.board&&this.board.hideLoading()}))}async load(t){this.hideSelect(),this.disable(),this.applyPlayerEvents(!1),this._history&&this._history.destroy(),this._history=null,this.container=null,this.board&&(this.board.view.remove(),this.board.destroy(),this.board=null),this.initHistory(),await this.playerWrapper.load(t),this.player=this.playerWrapper.player,this.initEvents()}resize(t,e){this.player.creator.resize(t,e)}scrollToVisible(t,e=!0){this.board.scrollToVisible(t,e)}async cloneNode(t){const e={types:this.opts.types,recursive:!1,enable:!0},i=new t.constructor({...t.conf,id:null});return i.parent=t.parent,t.cachedFontFamily&&(i.cachedFontFamily=t.cachedFontFamily),i.copySourceId=t.id,i.trackId=t.trackId,await i.preProcessing(),i.annotate(),await i.prepareMaterial(),this.apply({...e,node:i}),i.disable(),i.parent=null,i}showLoading(t=null){this.board?.showLoading(),t&&this.board?.showProgress(t)}hideLoading(){this.board?.hideLoading()}enableKeyboard(t){this.opts.enableKeyboard=!!t}trackScale(t){this.board?.autoScale(t)}addMenuItem(t,e,i){this.opts.menuItems||(this.opts.menuItems=[]),this.opts.menuItems.push({action:t,title:e,filter:i})}removeMenuItem(t){this.opts.menuItems&&(this.opts.menuItems=this.opts.menuItems.filter((e=>e.action!==t)))}get canCropFrame(){if(1!==this.selected.length||!this.selected[0].setFrame)return!1;const t=this.selected[0];return!t.conf["object-fit"]||"cover"===t.conf["object-fit"]}get splitMode(){return this.board.splitMode}node(t){const e="function"==typeof t?t:e=>e.id===`${t}`,i=this.creator.allNodes.filter(e);return"function"==typeof t?i:i[0]}setCropMode(t){if(!this.canCropFrame)return;const e=this.controls.select,i=this.selected[0];e.hideSelect(),i.cropMode=!!t&&"frame",setTimeout((()=>{e.showSelect(i)}),1)}setSplitMode(t){t?this.board.onKey("b",{type:"keydown"}):this.board.escape()}async toJson(){return await this.queue.enqueue((async()=>this.creator.toJson()))}async toImage(t=0,{width:e,height:i,format:r="jpeg"}={}){return await this.queue.enqueue((async()=>{let n;for(;!n;)n=await this.creator.getPreview(t,{width:e,height:i,format:r}),await(0,o.sleep)(300);return n}))}fit(){this.playerWrapper&&this.playerWrapper.fit()}destroy(){this.disable(),Object.values(this.controls).map((t=>t.destroy())),this.controls=null,this.container&&this.onCtrClick&&(this.onCtrClick&&this.container.parentNode.removeEventListener("click",this.onCtrClick),this.container.remove()),this.container=null,this.board&&(this.board.view.remove(),this.board.destroy(),this.board=null),this._history&&this._history.destroy(),this._history=null,this.keyboardPlay&&(document.body.removeEventListener("keydown",this.keyboardPlay),this.keyboardPlay=null),this.playerWrapper&&(this.applyPlayerEvents(!1),this.playerCbs=null,this.playerWrapper.destroy(),this.playerWrapper=null,this.player=null),this.lastMouseEvent=null}get version(){return E}}const{Select:z,Move:V,Rotate:G,Resize:j,Crop:Y,addControls:X}=i(135),W={actions:k.plugins,create:t=>{const e=new H(t);return X(e),e}}})(),window.miraeditor=r.default})();